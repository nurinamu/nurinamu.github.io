Array.prototype.indexOf||(Array.prototype.indexOf=function(c,a){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var b=this.length>>>0;a=+a||0;Infinity===Math.abs(a)&&(a=0);0>a&&(a+=b,0>a&&(a=0));for(;a<b;a++)if(this[a]===c)return a;return-1});
Date.now||(Date.now=function(){return +new Date});
if(!Function.prototype.bind){Function.prototype.bind=function(e){function s(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var t=[].slice,n=t.call(arguments,1),r=this,i=function(){return r.apply(this instanceof s?this:e||{},n.concat(t.call(arguments)))};s.prototype=r.prototype;i.prototype=new s;return i}}
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){function u(){if(!v){try{var a=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}v=!0;for(var a=z.length,c=0;c<a;c++)z[c]()}}function M(a){v?a():z[z.length]=a}function N(a){if("undefined"!=typeof n.addEventListener)n.addEventListener("load",a,!1);else if("undefined"!=typeof d.addEventListener)d.addEventListener("load",a,!1);else if("undefined"!=typeof n.attachEvent)U(n,"onload",a);else if("function"==typeof n.onload){var b=
n.onload;n.onload=function(){b();a()}}else n.onload=a}function V(){var a=d.getElementsByTagName("body")[0],b=d.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var f=0;(function(){if("undefined"!=typeof c.GetVariable){var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(10>f){f++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;E()})()}else E()}
function E(){var a=r.length;if(0<a)for(var b=0;b<a;b++){var c=r[b].id,f=r[b].callbackFn,g={success:!1,id:c};if(0<e.pv[0]){var d=p(c);if(d)if(!A(r[b].swfVersion)||e.wk&&312>e.wk)if(r[b].expressInstall&&F()){g={};g.data=r[b].expressInstall;g.width=d.getAttribute("width")||"0";g.height=d.getAttribute("height")||"0";d.getAttribute("class")&&(g.styleclass=d.getAttribute("class"));d.getAttribute("align")&&(g.align=d.getAttribute("align"));for(var h={},d=d.getElementsByTagName("param"),k=d.length,l=0;l<
k;l++)"movie"!=d[l].getAttribute("name").toLowerCase()&&(h[d[l].getAttribute("name")]=d[l].getAttribute("value"));G(g,h,c,f)}else W(d),f&&f(g);else w(c,!0),f&&(g.success=!0,g.ref=H(c),f(g))}else w(c,!0),f&&((c=H(c))&&"undefined"!=typeof c.SetVariable&&(g.success=!0,g.ref=c),f(g))}}function H(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function F(){return!B&&A("6.0.65")&&(e.win||e.mac)&&!(e.wk&&312>e.wk)}
function G(a,b,c,f){B=!0;I=f||null;O={success:!1,id:c};var g=p(c);if(g){"OBJECT"==g.nodeName?(y=J(g),C=null):(y=g,C=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";d.title=d.title.slice(0,47)+" - Flash Player Installation";f=e.ie&&e.win?"ActiveX":"PlugIn";f="MMredirectURL="+encodeURI(n.location).toString().replace(/&/g,"%26")+"&MMplayerType="+
f+"&MMdoctitle="+d.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+f):f;e.ie&&e.win&&4!=g.readyState&&(f=d.createElement("div"),c+="SWFObjectNew",f.setAttribute("id",c),g.parentNode.insertBefore(f,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}());K(a,b,c)}}function W(a){if(e.ie&&e.win&&4!=a.readyState){var b=d.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(J(a),b);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(J(a),a)}function J(a){var b=d.createElement("div");if(e.win&&e.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,f=0;f<c;f++)1==a[f].nodeType&&"PARAM"==a[f].nodeName||8==a[f].nodeType||b.appendChild(a[f].cloneNode(!0));return b}function K(a,b,c){var f,g=p(c);if(e.wk&&312>e.wk)return f;if(g)if("undefined"==typeof a.id&&
(a.id=c),e.ie&&e.win){var q="",h;for(h in a)a[h]!=Object.prototype[h]&&("data"==h.toLowerCase()?b.movie=a[h]:"styleclass"==h.toLowerCase()?q+=' class="'+a[h]+'"':"classid"!=h.toLowerCase()&&(q+=" "+h+'="'+a[h]+'"'));h="";for(var k in b)b[k]!=Object.prototype[k]&&(h+='<param name="'+k+'" value="'+b[k]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+q+">"+h+"</object>";D[D.length]=a.id;f=p(a.id)}else{k=d.createElement("object");k.setAttribute("type","application/x-shockwave-flash");
for(var l in a)a[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?k.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&k.setAttribute(l,a[l]));for(q in b)b[q]!=Object.prototype[q]&&"movie"!=q.toLowerCase()&&(a=k,h=q,l=b[q],c=d.createElement("param"),c.setAttribute("name",h),c.setAttribute("value",l),a.appendChild(c));g.parentNode.replaceChild(k,g);f=k}return f}function P(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(e.ie&&e.win?(b.style.display="none",function(){if(4==b.readyState){var c=p(a);
if(c){for(var f in c)"function"==typeof c[f]&&(c[f]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=null;try{b=d.getElementById(a)}catch(c){}return b}function U(a,b,c){a.attachEvent(b,c);x[x.length]=[a,b,c]}function A(a){var b=e.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function Q(a,b,c,f){if(!e.ie||
!e.mac){var g=d.getElementsByTagName("head")[0];g&&(c=c&&"string"==typeof c?c:"screen",f&&(L=m=null),m&&L==c||(f=d.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("media",c),m=g.appendChild(f),e.ie&&e.win&&"undefined"!=typeof d.styleSheets&&0<d.styleSheets.length&&(m=d.styleSheets[d.styleSheets.length-1]),L=c),e.ie&&e.win?m&&"object"==typeof m.addRule&&m.addRule(a,b):m&&"undefined"!=typeof d.createTextNode&&m.appendChild(d.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(R){var c=
b?"visible":"hidden";v&&p(a)?p(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function S(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var n=window,d=document,t=navigator,T=!1,z=[function(){T?V():E()}],r=[],D=[],x=[],y,C,I,O,v=!1,B=!1,m,L,R=!0,e=function(){var a="undefined"!=typeof d.getElementById&&"undefined"!=typeof d.getElementsByTagName&&"undefined"!=typeof d.createElement,b=t.userAgent.toLowerCase(),c=t.platform.toLowerCase(),f=c?/win/.test(c):
/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\v1",e=[0,0,0],h=null;if("undefined"!=typeof t.plugins&&"object"==typeof t.plugins["Shockwave Flash"])!(h=t.plugins["Shockwave Flash"].description)||"undefined"!=typeof t.mimeTypes&&t.mimeTypes["application/x-shockwave-flash"]&&!t.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(T=!0,g=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(h.replace(/^(.*)\..*$/,
"$1"),10),e[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof n.ActiveXObject)try{var k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");k&&(h=k.GetVariable("$version"))&&(g=!0,h=h.split(" ")[1].split(","),e=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)])}catch(l){}return{w3:a,pv:e,wk:b,ie:g,win:f,mac:c}}();(function(){e.w3&&(("undefined"!=typeof d.readyState&&"complete"==d.readyState||
"undefined"==typeof d.readyState&&(d.getElementsByTagName("body")[0]||d.body))&&u(),v||("undefined"!=typeof d.addEventListener&&d.addEventListener("DOMContentLoaded",u,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){"complete"==d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),u())}),n==top&&function(){if(!v){try{d.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}u()}}()),e.wk&&function(){v||(/loaded|complete/.test(d.readyState)?u():
setTimeout(arguments.callee,0))}(),N(u)))})();(function(){e.ie&&e.win&&window.attachEvent("onunload",function(){for(var a=x.length,b=0;b<a;b++)x[b][0].detachEvent(x[b][1],x[b][2]);a=D.length;for(b=0;b<a;b++)P(D[b]);for(var c in e)e[c]=null;e=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})})();return{registerObject:function(a,b,c,f){if(e.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=f;r[r.length]=d;w(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(e.w3)return H(a)},
embedSWF:function(a,b,c,d,g,q,h,k,l,n){var p={success:!1,id:b};e.w3&&!(e.wk&&312>e.wk)&&a&&b&&c&&d&&g?(w(b,!1),M(function(){c+="";d+="";var e={};if(l&&"object"===typeof l)for(var m in l)e[m]=l[m];e.data=a;e.width=c;e.height=d;m={};if(k&&"object"===typeof k)for(var r in k)m[r]=k[r];if(h&&"object"===typeof h)for(var t in h)m.flashvars="undefined"!=typeof m.flashvars?m.flashvars+("&"+t+"="+h[t]):t+"="+h[t];if(A(g))r=K(e,m,b),e.id==b&&w(b,!0),p.success=!0,p.ref=r;else{if(q&&F()){e.data=q;G(e,m,b,n);return}w(b,
!0)}n&&n(p)})):n&&n(p)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(a,b,c){if(e.w3)return K(a,b,c)},showExpressInstall:function(a,b,c,d){e.w3&&F()&&G(a,b,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,b,c,d){e.w3&&Q(a,b,c,d)},addDomLoadEvent:M,addLoadEvent:N,callDomLoadFunctions:u,getQueryParamValue:function(a){var b=d.location.search||d.location.hash;if(b){/\?/.test(b)&&
(b=b.split("?")[1]);if(null==a)return S(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return S(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(B){var a=p("SWFObjectExprInst");a&&y&&(a.parentNode.replaceChild(y,a),C&&(w(C,!0),e.ie&&e.win&&(y.style.display="block")),I&&I(O));B=!1}}}}();



(function(){function ce(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var Zd;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new ce);if(null==window.AKAMAI_MEDIA_PLAYER["AMP v4.21.0.0003"]){Zd=
window.AKAMAI_MEDIA_PLAYER["AMP v4.21.0.0003"]={};var de=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var e in b)de.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},Oc=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},ee=function(a,b){return function(){return a.apply(b,arguments)}},B=function(a,b){this.config=a;B.__super__.constructor.call(this,b)};f(B,puremvc.Proxy);
B.NAME="ModuleProxy";B.prototype.defaults=null;B.prototype.config=null;B.prototype.initializeNotifier=function(a){B.__super__.initializeNotifier.call(this,a);this.createData()};B.prototype.createData=function(){this.setData(this.config)};B.prototype.setData=function(a){var b,c,e,m;null==a&&(a={});e={};m=this.defaults;for(c in m)b=m[c],b=c in a?a[c]:b,e[c]=b;B.__super__.setData.call(this,e);return a};var x=function(a){var b,c,e;this.viewComponent=a;x.__super__.constructor.call(this,this.getModuleName()+
"-"+Date.now());this.dispatcher=new Ha(this);this.notificationEventMap={};e=this.listNotificationEvents();b=0;for(c=e.length;b<c;b++)a=e[b],this.notificationEventMap[a]=!0;this.logger=N;this.moduleMap={}};f(x,puremvc.Facade);x.prototype.logger=null;x.prototype.config=null;x.prototype.moduleName=null;x.prototype.moduleMap=null;x.prototype.viewComponent=null;x.prototype.dispatcher=null;x.prototype.notificationEventMap=null;x.prototype.oninitialized=null;x.prototype.parentModule=null;x.prototype.initialize=
function(a,b){this.config=a;this.parentModule=b;this.loadResources()};x.prototype.loadResources=function(){y.addResources(this.config.resources,this.resourcesLoaded.bind(this))};x.prototype.resourcesLoaded=function(){this.createFramework();if("function"===typeof this.oninitialized)this.oninitialized(this)};x.prototype.createFramework=function(){this.createModel();this.createController();this.createView()};x.prototype.createModel=function(){this.registerProxy(new B(this.config))};x.prototype.createView=
function(){};x.prototype.createController=function(){};x.prototype.getModuleName=function(){return this.moduleName};x.prototype.getConfig=function(){return this.config};x.prototype.hasModule=function(a){return null!=this.moduleMap[a]};x.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=e[a],b[a]=c.module;return b};x.prototype.registerModule=function(a){var b,c;c=a.getModuleName();null!=a&&null==this.moduleMap[c]&&(b=new Va(a),this.moduleMap[c]=b,this.registerMediator(b),
a.onRegister())};x.prototype.retrieveModule=function(a){return this.moduleMap[a].module};x.prototype.removeModule=function(a){var b;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),b.module.onRemove(),b.module};x.prototype.listNotificationInterests=function(){return[]};x.prototype.listNotificationPublications=function(){return[]};x.prototype.listNotificationEvents=function(){return[]};x.prototype.sendNotification=function(a,b,c){x.__super__.sendNotification.call(this,
a,b,c);this.postProcessNotification(a,b,c)};x.prototype.postProcessNotification=function(a,b,c){a=a===d.DISPATCH_EVENT?b:this.createNotificationEvent(a,b,c);null!=a&&(this.logNotificationEvent(a),this.dispatchEvent(a))};x.prototype.createNotificationEvent=function(a,b,c){var e;if(!0===(null!=(e=this.notificationEventMap)?e[a]:void 0))return a=new $(a,b),a.player=this.player||this,a};x.prototype.logNotificationEvent=function(a){this.logger.log("["+this.getModuleName().toUpperCase()+" EVENT]",a.type,
a)};x.prototype.getViewComponent=function(){return this.viewComponent};x.prototype.setViewComponent=function(a){return this.viewComponent=a};x.prototype.onRegister=function(){};x.prototype.onRemove=function(){};x.prototype.destroy=function(){var a,b,c,e,m;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");m=this.getModules();c=0;for(e=m.length;c<e;c++)b=m[c],this.removeModule(b.getModuleName()),b.destroy();puremvc.Facade.removeCore(this.multitonKey);for(a in this)this[a]=
null,delete this[a]};x.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};x.prototype.dispatchEvent=function(a){this.dispatcher.dispatchEvent(a)};x.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};var aa=function(){};aa.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};aa.updateTextContent=function(a,b){var c;c=aa.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);
return a};aa.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(m){}}}}};aa.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var lc=function(){lc.__super__.constructor.call(this)};
f(lc,puremvc.SimpleCommand);lc.prototype.execute=function(a){var b;this.sendNotification(d.READY,this.facade.config);a=null!=(b=this.facade.config)?b.media:void 0;null!=a&&this.sendNotification(d.SET_MEDIA,a)};var ae=function(a,b){var c;b.className=Mb.PREFIX+"player";c=Da.create("install-flash",b);Da.create(null,c,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");c=Da.create(null,c,"a");c.href="http://www.adobe.com/go/getflashplayer";c=Da.create(null,
c,"img");c.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";c.alt="Get Adobe Flash player"};ae.prototype.getModules=function(){return[]};var mc=function(){this.map={}};mc.prototype.map=null;mc.prototype.add=function(a,b){this.map[a]=b};mc.prototype.item=function(a){return this.map[a]};mc.prototype.remove=function(a){var b;b=this.map[a];null!=b&&(this.map[a]=null,delete this.map[a]);return b};var Xb=function(){Xb.__super__.constructor.call(this)};f(Xb,mc);Xb.prototype.add=
function(a,b){var c;null!=this.item(a.src)?b():(Xb.__super__.add.call(this,a.src,a),c=document.body,a.type===h.mimeTypes.js?h.loadScript(a.src,b,c):(a.type===h.mimeTypes.css&&h.loadStyleSheet(a.src),b()))};Xb.prototype.addResources=function(a,b){var c,e,m,d=this;0<!(null!=a&&a.length)?b():(e=0,m=function(){d.add(a[e],c)},c=function(){e++;e>=a.length?b():m()},m())};var Pc=function(){Pc.__super__.constructor.call(this)};f(Pc,puremvc.SimpleCommand);Pc.prototype.execute=function(a){a=this.facade.retrieveProxy(v.NAME).getActiveState()===
sa.ACTIVE?sa.INACTIVE:sa.ACTIVE;this.sendNotification(d.CHANGE_ACTIVE_STATE,a)};var nc=function(){nc.__super__.constructor.call(this)};f(nc,puremvc.SimpleCommand);nc.prototype.execute=function(a){var b;a=this.facade.retrieveProxy(v.NAME);this.facade.retrieveProxy(l.NAME);switch(a.getPlayState()){case D.ENDED:b=d.REPLAY;break;case D.PAUSED:case D.READY:b=d.PLAY;break;case D.PLAYING:b=d.PAUSE;break;case D.WAITING:!0===this.facade.getMediaElement().paused&&(b=d.PLAY)}this.sendNotification(b,!0)};var Qc=
function(){Qc.__super__.constructor.call(this)};f(Qc,puremvc.SimpleCommand);Qc.prototype.execute=function(a){a=this.facade.retrieveProxy(v.NAME).getDisplayState()===J.FULL_SCREEN?J.NORMAL:J.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var Cb=function(){Cb.__super__.constructor.call(this)};f(Cb,puremvc.MacroCommand);Cb.prototype.initializeMacroCommand=function(){this.addSubCommand(Yb)};Cb.prototype.execute=function(a){var b,c;Cb.__super__.execute.call(this,a);c=a.getBody();a=this.facade.retrieveProxy(n.NAME);
b=this.facade.retrieveProxy(l.NAME);c&&!0!==b.initialized&&this.sendNotification(d.INITIALIZED);!0===b.initialized&&(a.getSrc()||a.getSource())&&(b.getStarted()||this.sendNotification(d.START),b.play())};var Zb=function(){Zb.__super__.constructor.call(this)};f(Zb,puremvc.SimpleCommand);Zb.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE)};var Rc=function(){Rc.__super__.constructor.call(this)};f(Rc,puremvc.SimpleCommand);
Rc.prototype.execute=function(a){this.sendNotification(d.DISPATCH_EVENT,new $(d.PAUSED))};var Sc=function(){Sc.__super__.constructor.call(this)};f(Sc,puremvc.SimpleCommand);Sc.prototype.execute=function(a){this.facade.retrieveProxy(G.NAME).setAutoplay(a.getBody())};var Tc=function(){Tc.__super__.constructor.call(this)};f(Tc,puremvc.SimpleCommand);Tc.prototype.execute=function(a){this.facade.retrieveProxy(G.NAME).setLoop(a.getBody())};var Uc=function(){Uc.__super__.constructor.call(this)};f(Uc,puremvc.SimpleCommand);
Uc.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setVolume(a.getBody())};var oc=function(){oc.__super__.constructor.call(this)};f(oc,puremvc.SimpleCommand);oc.prototype.execute=function(a){a=a.getBody();this.sendNotification(d.MEDIA_CHANGE,a);!0===this.facade.getAutoplay()&&this.sendNotification(d.PLAY)};var pc=function(){pc.__super__.constructor.call(this)};f(pc,puremvc.SimpleCommand);pc.prototype.execute=function(a){var b,c,e,m;e=a.getBody();c=this.facade.retrieveProxy(l.NAME);
a=this.facade.retrieveProxy(n.NAME);0===e&&a.getType()===h.mimeTypes.m3u8&&(e=0.25);m=this.facade.getMediaElement();0===m.readyState?(b=function(a){m.removeEventListener("loadedmetadata",b,!1);return c.setCurrentTime(e)},m.addEventListener("loadedmetadata",b,!1)):c.setCurrentTime(e);this.sendNotification(d.CHANGE_PLAY_STATE,D.WAITING);this.sendNotification(d.DISPLAY_TIME,{currentTime:e,duration:c.getDuration()});this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE)};var Vc=function(){Vc.__super__.constructor.call(this)};
f(Vc,puremvc.SimpleCommand);Vc.prototype.execute=function(a){this.facade.retrieveProxy(v.NAME).setSeeking(!0)};var Wc=function(){Wc.__super__.constructor.call(this)};f(Wc,puremvc.SimpleCommand);Wc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(l.NAME).getSrc();this.facade.retrieveProxy(v.NAME).setSeeking(!1);a=h.getDevice();("desktop"===a||"android"===a&&/\.mp3$/.test(b))&&this.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING)};var Xc=function(){Xc.__super__.constructor.call(this)};
f(Xc,puremvc.SimpleCommand);Xc.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setCurrentTime(0.25);this.sendNotification(d.PLAY);this.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING)};var Yc=function(){Yc.__super__.constructor.call(this)};f(Yc,puremvc.SimpleCommand);Yc.prototype.execute=function(a){a.getBody();a=this.facade.retrieveProxy(l.NAME);a.pause();a.getCurrentTime()!==a.getDuration()&&a.setCurrentTime(a.getDuration())};var qc=function(){qc.__super__.constructor.call(this)};
f(qc,puremvc.SimpleCommand);qc.prototype.execute=function(a){!0===this.facade.retrieveProxy(G.NAME).getLoop()?this.sendNotification(d.REPLAY):(this.sendNotification(d.CHANGE_PLAY_STATE,D.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE))};var rc=function(){rc.__super__.constructor.call(this)};f(rc,puremvc.SimpleCommand);rc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(n.NAME);this.sendNotification(d.DISPLAY_TIME,{currentTime:0,duration:b.getDuration()});this.sendNotification(d.STARTED,
a.getBody());this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.INACTIVE)};var Zc=function(){Zc.__super__.constructor.call(this)};f(Zc,puremvc.SimpleCommand);Zc.prototype.execute=function(a){this.facade.retrieveProxy(v.NAME).setIsUserActive(a.getBody())};var $c=function(){$c.__super__.constructor.call(this)};f($c,puremvc.SimpleCommand);$c.prototype.execute=function(a){this.facade.retrieveProxy(v.NAME).getPlayState()!==D.LOADING&&h.getMimeType(this.facade.getMediaElement().src)!==h.mimeTypes.mp4&&this.sendNotification(d.CHANGE_PLAY_STATE,
D.WAITING)};var ad=function(){ad.__super__.constructor.call(this)};f(ad,puremvc.SimpleCommand);ad.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setMuted(a.getBody())};var bd=function(){bd.__super__.constructor.call(this)};f(bd,puremvc.SimpleCommand);bd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(ba.NAME);a=a.getBody();b.setMedia(a);!1===b.getAuthorized()?this.sendNotification(ta.AUTHORIZE,a):this.sendNotification(d.MEDIA_VALIDATED,a)};var cd=function(){cd.__super__.constructor.call(this)};
f(cd,puremvc.SimpleCommand);cd.prototype.execute=function(a){var b;a=this.facade.retrieveProxy(n.NAME);a.authorized=!0;b=this.facade.retrieveProxy(ba.NAME).createURL(a.getSrc());a.setSrc(b);this.sendNotification(d.MEDIA_VALIDATED,a.getData())};var dd=function(){dd.__super__.constructor.call(this)};f(dd,puremvc.SimpleCommand);dd.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).initialized=!0};var ed=function(){ed.__super__.constructor.call(this)};f(ed,puremvc.SimpleCommand);ed.prototype.execute=
function(a){this.facade.retrieveProxy(O.NAME).registerPlaybackCore(a.getBody())};var fd=function(){fd.__super__.constructor.call(this)};f(fd,puremvc.SimpleCommand);fd.prototype.execute=function(a){a="amp"===a.getBody().target?d.REMOVE_APPLICATION_STATE:d.ADD_APPLICATION_STATE;this.sendNotification(a,"remote-playback")};var gd=function(){gd.__super__.constructor.call(this)};f(gd,puremvc.SimpleCommand);gd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(n.NAME);a=a.getBody();this.sendNotification(d.CHANGE_CONTENT,
{from:b.getData(),to:a});b.updateData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(d.CHANGE_CONTENT,b.getData())};var hd=function(){hd.__super__.constructor.call(this)};f(hd,puremvc.SimpleCommand);hd.prototype.execute=function(a){a=this.facade.retrieveProxy(O.NAME).getActivePlaybackCore();this.sendNotification(d.DISPLAY_TIME,{currentTime:a.getCurrentTime(),duration:a.getDuration()})};var id=function(){id.__super__.constructor.call(this)};f(id,puremvc.SimpleCommand);id.prototype.execute=
function(a){a=this.facade.retrieveProxy(l.NAME);a.setMuted(!a.getMuted())};var Db=function(a){null==this.cssPrefix&&(this.cssPrefix=Mb.PREFIX);Db.__super__.constructor.call(this,this.mediatorName,a)};f(Db,puremvc.Mediator);Db.prototype.config=null;Db.prototype.cssPrefix=null;Db.prototype.classList=null;Db.prototype.initializeNotifier=function(a){Db.__super__.initializeNotifier.call(this,a);this.config=(this.facade.player||this.facade).retrieveProxy(B.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,
contains:function(a,c){var e,m;null==c&&(c=this.element);e=this.prefix+a;return null!=(null!=(m=c.classList)?m.contains:void 0)?c.classList.contains(e):-1!==c.className.indexOf(e)},add:function(a,c){var e,m;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(m=c.classList)?m.add:void 0)?c.classList.add(e):this.contains(a,c)||(c.className=""!==c.className?c.className+(" "+e):e)},remove:function(a,c){var e,m;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(m=c.classList)?m.remove:void 0)?
c.classList.remove(e):this.contains(a,c)&&(e=RegExp(" ?"+e),c.className=c.className.replace(e,""))},toggle:function(a,c){var e;null==c&&(c=this.element);return null!=(null!=(e=c.classList)?e.toggle:void 0)?c.classList.toggle(this.prefix+a):this.contains(a,c)?this.remome(a,c):this.add(a,c)}}};var Nb=function(a){Nb.__super__.constructor.call(this,a)};f(Nb,Db);Nb.prototype.localizationManager=null;Nb.prototype.initializeNotifier=function(a){Nb.__super__.initializeNotifier.call(this,a);this.localizationManager=
(this.facade.player||this.facade).retrieveProxy(T.NAME)};var L=function(a,b,c,e){this.componentName=null!=a?a:this.componentName;this.componentType=null!=b?b:this.componentType;this.viewComponent=this.createViewComponent(c,e);this.classList=this.viewComponent._classList;null==this.mediatorName&&(this.mediatorName=this.createMediatorName());L.__super__.constructor.call(this,this.viewComponent)};f(L,Nb);L.prototype.componentName=null;L.prototype.componentType=null;L.prototype.classList=null;L.prototype.state=
null;L.prototype.disabled=!1;L.prototype.onRegister=function(){Da.bindEvents(this.viewComponent,this)};L.prototype.createViewComponent=function(a,b){var c;c=this.getTypeList();return Da.create(c,a,b)};L.prototype.createMediatorName=function(){var a;a=this.getTypeList();a.push("mediator");a.push(Da.createUID());return a.join("-")};L.prototype.getTypeList=function(){var a;a=[];null!=this.componentName&&a.push(this.componentName);null!=this.componentType&&(a=a.concat(this.componentType));return a};L.prototype.create=
function(a,b,c,e){null==b&&(b=this);!1===b&&(b=null);return Da.create(a,b,c,e)};L.prototype.createText=function(a,b,c,e){null==c&&(c=this);return Da.create(a,c,e,b)};L.prototype.setState=function(a){if(a!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=a,null!=this.state&&this.classList.add(this.state),a};L.prototype.getState=function(){return this.state};L.prototype.setDisabled=function(a){if(a!==this.disabled)return(this.disabled=a)?this.classList.add("disabled"):
this.classList.remove("disabled"),a};L.prototype.getDisabled=function(){return this.disabled};var ia=function(){ia.__super__.constructor.call(this,null,null,null,null)};f(ia,L);ia.prototype.componentType="overlay";ia.prototype.onRegister=function(){ia.__super__.onRegister.call(this);this.registerOverlay()};ia.prototype.onRemove=function(){ia.__super__.onRemove.call(this);this.removeOverlay()};ia.prototype.registerOverlay=function(){this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};ia.prototype.removeOverlay=
function(){this.sendNotification(d.REMOVE_OVERLAY,this.viewComponent)};var vb=function(){vb.__super__.constructor.call(this)};f(vb,ia);vb.prototype.componentName="context-menu";vb.prototype.contextMenu=null;vb.prototype.onRegister=function(){var a=this;vb.__super__.onRegister.call(this);k.create(this.facade.viewComponent,k.CONTEXTMENU,function(b){b.preventDefault();a.contextMenuHandler(b);return!1})};vb.prototype.contextMenuHandler=function(a){var b=this;this.contextMenu&&this.removeContextMenu();
this.contextMenu=Da.create("context-menu",document.body,"ul");Da.create("context-item",this.contextMenu,"li",this.facade.getVersion());this.contextMenu.style.top=a.pageY+"px";this.contextMenu.style.left=a.pageX+"px";k.create(document.body,k.CLICK,function(a){b.removeContextMenu(a);return!1})};vb.prototype.removeContextMenu=function(a){try{k.clear(document.body,k.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(b){}};var Eb=function(){Eb.__super__.constructor.call(this)};
f(Eb,ia);Eb.prototype.componentName="end-slate";Eb.prototype.onRegister=function(){null!=this.config.getEndSlate()&&Eb.__super__.onRegister.call(this)};Eb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Eb.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case d.MEDIA_CHANGE:c=a.getBody(),b=this.config.getEndSlate(),e=this.getViewComponent(),a="",null!=b&&(b=!0===b.usePoster?c.poster:b.url,null!=b&&""!==b&&(a='\x3cimg src\x3d"'+b+'" class\x3d"end-slate-image" /\x3e')),
e.innerHTML=a}};var Fb=function(){Fb.__super__.constructor.call(this)};f(Fb,ia);Fb.prototype.componentName="waiting";Fb.prototype.bar=null;Fb.prototype.text=null;Fb.prototype.onRegister=function(){this.bar=this.create("waiting-bar");this.text=this.createText("waiting-text",this.localizationManager.getString(s.MSG_BUFFERING));Fb.__super__.onRegister.call(this)};var jd=function(){jd.__super__.constructor.call(this)};f(jd,ia);jd.prototype.componentName="loading";var s=function(){};s.MSG_LIVE="MSG_LIVE";
s.MSG_REPLAY="MSG_REPLAY";s.MSG_BUFFERING="MSG_BUFFERING_TEXT";s.MSG_CC="MSG_CC";s.MSG_CC_TITLE="MSG_CC_TITLE";s.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";s.MSG_CC_PRESETS="MSG_CC_PRESETS";s.MSG_CC_FONT="MSG_CC_FONT";s.MSG_CC_EDGE="MSG_CC_EDGE";s.MSG_CC_SIZE="MSG_CC_SIZE";s.MSG_CC_SCROLL="MSG_CC_SCROLL";s.MSG_CC_COLOR="MSG_CC_COLOR";s.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";s.MSG_CC_EDGE="MSG_CC_EDGE";s.MSG_CC_WINDOW="MSG_CC_WINDOW";s.MSG_CC_OPACITY="MSG_CC_OPACITY";s.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";
s.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";s.MSG_CC_RESET="MSG_CC_RESET";s.MSG_CC_CANCEL="MSG_CC_CANCEL";s.MSG_CC_APPLY="MSG_CC_APPLY";s.MSG_SECONDS="MSG_SECONDS";s.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";s.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO";s.MSG_NEXT_AD="MSG_NEXT_AD";s.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR";s.MSG_VIEW_ALL="MSG_VIEW_ALL";s.MSG_VIDEO="MSG_VIDEO";var jb=function(){jb.__super__.constructor.call(this)};f(jb,ia);jb.prototype.componentName="replay";jb.prototype.replay=null;
jb.prototype.icon=null;jb.prototype.label=null;jb.prototype.onRegister=function(){this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(s.MSG_REPLAY),this.replay);jb.__super__.onRegister.call(this)};jb.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.REPLAY);return!1};var kd=function(){kd.__super__.constructor.call(this)};
f(kd,puremvc.SimpleCommand);kd.prototype.execute=function(a){a="persistent"!==this.facade.retrieveProxy(G.NAME).getControls().mode?a.getBody():sa.ACTIVE;this.facade.retrieveProxy(v.NAME).setActiveState(a)};var Na=function(){Na.__super__.constructor.call(this);this.keyHandler=this.keypress.bind(this)};f(Na,puremvc.SimpleCommand);Na.interval=null;Na.keyHandler=null;Na.prototype.keypress=function(a){switch(a.keyCode){case 32:this.facade.getEnded()||(this.facade.getPaused()?this.facade.play():this.facade.pause())}};
Na.prototype.execute=function(a){var b,c,e,m,g=this;e=a.getBody();this.facade.retrieveProxy(v.NAME).setDisplayState(e);"external"!==this.facade.retrieveProxy(G.NAME).getFullscreen().mode&&(a=this.facade.retrieveProxy(l.NAME),b=this.facade.getMediaElement(),m=this.facade.getViewComponent(),c={},null!=m.webkitRequestFullScreen?(c.enter=m.webkitRequestFullScreen.bind(m),c.exit=document.webkitCancelFullScreen.bind(document),c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement"):null!=
m.requestFullscreen?(c.enter=m.requestFullscreen.bind(m),c.exit=document.cancelFullscreen.bind(document),c.event="onfullscreenchange",c.element="fullscreenElement"):null!=m.mozRequestFullScreen?(c.enter=m.mozRequestFullScreen.bind(m),c.exit=document.mozCancelFullScreen.bind(document),c.event="onmozfullscreenchange",c.element="mozFullscreenElement"):null!=b.webkitEnterFullscreen&&(c.enter=b.webkitEnterFullscreen.bind(b),c.exit=b.webkitExitFullscreen.bind(b),c.event=null),e===J.FULL_SCREEN?(null!=c.event?
m[c.event]=function(a){null==document[c.element]&&g.sendNotification(d.CHANGE_DISPLAY_STATE,J.NORMAL)}:(clearInterval(Na.interval),Na.interval=setInterval(function(){!0!==b.webkitDisplayingFullscreen&&(g.sendNotification(d.CHANGE_DISPLAY_STATE,J.NORMAL),clearInterval(Na.interval))},100)),c.enter(),a.keyHandler=this.keypress.bind(this),window.addEventListener("keypress",a.keyHandler)):e===J.NORMAL&&(window.removeEventListener("keypress",a.keyHandler),a.keyHandler=null,null!=c&&"function"===typeof c.exit&&
c.exit(),b[c.event]=null,clearInterval(Na.interval)));this.sendNotifications(e)};Na.prototype.sendNotifications=function(a){setTimeout(this.sendNotification.bind(this,d.FULL_SCREEN_CHANGE,a),100);this.sendNotification(d.DISPATCH_EVENT,new $("fullscreenchange",a===J.FULL_SCREEN))};var q=function(a){q.__super__.constructor.call(this,a)};f(q,x);q.prototype.moduleName="amp";q.prototype.playerType=null;q.prototype.config=null;q.prototype.mediaElement=null;q.prototype.hidden=!1;q.prototype.l10n=null;q.prototype.setViewComponent=
function(a){a.amp=this;return q.__super__.setViewComponent.call(this,a)};q.prototype.setMediaElement=function(a){return this.mediaElement=a};q.prototype.getPlayerType=function(){return this.playerType};q.prototype.getVersion=function(){return y.getVersion()};q.prototype.createPlugins=function(){this.sendNotification(xa.REGISTER_PLUGINS,this.config)};q.prototype.createMediaElement=function(){return null};q.prototype.createFramework=function(){q.__super__.createFramework.call(this);this.mediaElement=
this.createMediaElement();this.createPlugins()};q.prototype.logNotificationEvent=function(a){!0!==/(timeupdate|mediaPlayerPlayheadUpdate)/.test(a.type)&&q.__super__.logNotificationEvent.call(this,a)};q.prototype.listNotificationEvents=function(){return q.__super__.listNotificationEvents.call(this).concat([d.READY,d.LOAD_START,d.TIME_UPDATE,d.DURATION_CHANGE,d.ERROR,d.LOADED_METADATA,d.WAITING,d.SEEKING,d.SEEKED,d.ENDED,d.PROGRESS,d.CAN_PLAY,d.CAN_PLAY_THROUGH,d.PAUSE,d.PLAY,d.PLAYING,d.STARTED,d.PLAY_REQUEST,
d.MEDIUM_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.MEDIA_CHANGE,d.VOLUME_CHANGE,d.FAIL_OVER_ATTEMPT,d.LANGUAGE_CHANGE,d.PLAYBACK_TARGET_AVAILABLE,d.PLAYBACK_TARGET_CHANGE,d.PLAY_STATE_CHANGE,ta.AUTHORIZE,ta.AUTHORIZED])};q.prototype.getLanguage=function(){return this.retrieveProxy(T.NAME).getLanguage()};q.prototype.setLanguage=function(a){this.retrieveProxy(T.NAME).setLanguage(a);return a};q.prototype.getMediaElement=function(){return this.mediaElement};q.prototype.getContainer=function(){return this.getViewComponent()};
q.prototype.evaluateBinding=function(a){};q.prototype.canPlayType=function(a){};q.prototype.load=function(){};q.prototype.play=function(){};q.prototype.replay=function(){};q.prototype.pause=function(){};q.prototype.end=function(){};q.prototype.setParams=function(a){};q.prototype.getParams=function(){};q.prototype.setAutoplay=function(a){};q.prototype.getAutoplay=function(){};q.prototype.setLoop=function(a){};q.prototype.getLoop=function(){};q.prototype.setMuted=function(a){};q.prototype.getMuted=
function(){};q.prototype.mute=function(){return this.setMuted(!0)};q.prototype.unmute=function(){return this.setMuted(!1)};q.prototype.setMedia=function(a){var b,c,e;b=a.src;a=null!=(c=a.source)?null!=(e=c[0])?e.src:void 0:void 0;if(!(null!=b&&""!==b||null!=a&&""!==a))throw Error("[AMP ERROR] Invalid Media");};q.prototype.getMedia=function(){};q.prototype.setCurrentTime=function(a){};q.prototype.getCurrentTime=function(){};q.prototype.getDuration=function(){};q.prototype.setSrc=function(a){};q.prototype.getSrc=
function(){};q.prototype.setSource=function(a){};q.prototype.getSource=function(){};q.prototype.setVolume=function(a){};q.prototype.getVolume=function(){};q.prototype.getSeeking=function(){};q.prototype.getPaused=function(){};q.prototype.getEnded=function(){};q.prototype.setDisplayState=function(a){};q.prototype.getDisplayState=function(){};q.prototype.enterFullScreen=function(){};q.prototype.exitFullScreen=function(){};q.prototype.setHidden=function(a){a!==this.hidden&&(this.hidden=a,a=this.viewComponent.style,
this.hidden?(this.hiddenData={width:a.width,height:a.height,paused:this.getPaused()},a.width=a.height="0px",!1===this.hiddenData.paused&&this.pause()):(a.width=this.hiddenData.width,a.height=this.hiddenData.height,!1===this.hiddenData.paused&&this.play(),this.hiddenData=null))};q.prototype.getHidden=function(){return this.hidden};q.prototype.recordContentChange=function(a){};var u=function(a){u.__super__.constructor.call(this,a)};f(u,q);u.prototype.playerType="html";u.prototype.media=null;u.prototype.bindings=
null;u.prototype.configuration=null;u.prototype.params=null;u.prototype.appState=null;u.prototype.createMediaElement=function(){var a,b;a=new Ob("html5","video");b=a.getViewComponent();null==b.dataset&&(b.dataset={});this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};u.prototype.createModel=function(){var a;this.bindings=new X;this.registerProxy(this.bindings);this.registerProxy(new ba);this.configuration=new G(this.config);this.registerProxy(this.configuration);this.registerProxy(new T(this.config));
this.appState=new v;this.registerProxy(this.appState);this.appState.setRenderMode(fe.HTML);a=new l;this.registerProxy(a);this.media=new n;this.registerProxy(this.media);this.registerProxy(new O(a));this.params=new Wa(this.config.params);this.registerProxy(this.params);this.bindings.initialize()};u.prototype.createView=function(){var a,b,c;this.registerMediator(new oa("html5",this.getViewComponent()));this.registerMediator(new Oa);this.registerMediator(new Pb);this.registerMediator(new Pa);a=new Qa;
this.registerMediator(a);this.registerMediator(new jd);!0!==(null!=(b=this.config.controls)?b["native"]:void 0)&&this.registerMediator(new vb);this.registerMediator(new Fb);this.registerMediator(new jb);this.registerMediator(new Eb);!0===(null!=(c=this.config.titlebar)?c.enabled:void 0)&&this.registerMediator(new Xa);this.registerMediator(new kb)};u.prototype.createController=function(){this.registerCommand(xa.PLUGINS_INITIALIZED,lc);this.registerCommand(d.PLAY,Cb);this.registerCommand(d.PAUSE,Zb);
this.registerCommand(d.PAUSED,Rc);this.registerCommand(d.CHANGE_PLAY_STATE,$b);this.registerCommand(d.TOGGLE_FULL_SCREEN,Qc);this.registerCommand(d.CHANGE_DISPLAY_STATE,Na);this.registerCommand(d.TOGGLE_ACTIVE,Pc);this.registerCommand(d.CHANGE_ACTIVE_STATE,kd);this.registerCommand(d.SET_MEDIA,sc);this.registerCommand(d.CHANGE_MEDIA,tc);this.registerCommand(d.MEDIA_VALIDATED,oc);this.registerCommand(d.MEDIA_CHANGE,uc);this.registerCommand(d.UPDATE_DATA_BINDINGS,vc);this.registerCommand(d.START,rc);
this.registerCommand(d.SEEK,pc);this.registerCommand(d.SEEKING,Vc);this.registerCommand(d.SEEKED,Wc);this.registerCommand(d.CHANGE_VOLUME,Uc);this.registerCommand(d.CHANGE_MUTED,ad);this.registerCommand(d.CHANGE_AUTOPLAY,Sc);this.registerCommand(d.CHANGE_LOOP,Tc);this.registerCommand(d.END,Yc);this.registerCommand(d.ENDED,qc);this.registerCommand(d.REPLAY,Xc);this.registerCommand(d.ERROR,wc);this.registerCommand(d.READY,xc);this.registerCommand(d.WAITING,$c);this.registerCommand(d.CHANGE_DURATION,
yc);this.registerCommand(d.CHANGE_PARAMS,zc);this.registerCommand(d.IS_USER_ACTIVE,Zc);this.registerCommand(ta.CHECK_AUTHORIZATION,bd);this.registerCommand(ta.AUTHORIZED,cd);this.registerCommand(ta.SET_KEY,Ac);this.registerCommand(ta.SET_TOKEN,Bc);this.registerCommand(d.INITIALIZED,dd);this.registerCommand(d.REGISTER_PLAYBACK_CORE,ed);this.registerCommand(M.TOGGLE_PLAY_PAUSE,nc);this.registerCommand(M.SEEK,pc);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,fd);this.registerCommand(d.RECORD_CONTENT_CHANGE,
gd);this.registerCommand(d.TIME_UPDATE,hd);this.registerCommand(d.TOGGLE_MUTED,id)};u.prototype.evaluateBinding=function(a){return this.bindings.evaluateBinding(a)};u.prototype.recordContentChange=function(a){this.sendNotification(d.RECORD_CONTENT_CHANGE,a)};u.prototype.canPlayType=function(a){return this.retrieveProxy(l.NAME).canPlayType(a)};u.prototype.load=function(){this.sendNotification(d.LOAD)};u.prototype.play=function(){this.sendNotification(d.PLAY,!0)};u.prototype.replay=function(){this.sendNotification(d.REPLAY)};
u.prototype.pause=function(){this.sendNotification(d.PAUSE)};u.prototype.end=function(){this.sendNotification(d.END)};u.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};u.prototype.getParams=function(){return this.params.getData()};u.prototype.setAutoplay=function(a){this.sendNotification(d.CHANGE_AUTOPLAY,a);return a};u.prototype.getAutoplay=function(){var a;return this.retrieveProxy(l.NAME).initialized&&(this.configuration.getAutoplay()||!0===(null!=(a=this.getMedia())?
a.autoplay:void 0))};u.prototype.setLoop=function(a){this.sendNotification(d.CHANGE_LOOP,a);return a};u.prototype.getLoop=function(){return this.configuration.getLoop()};u.prototype.setMuted=function(a){this.sendNotification(d.CHANGE_MUTED,a);return a};u.prototype.getMuted=function(){return this.retrieveProxy(l.NAME).getMuted()};u.prototype.setMedia=function(a){u.__super__.setMedia.call(this,a);this.sendNotification(d.SET_MEDIA,a);return a};u.prototype.getMedia=function(){return this.media.getData()};
u.prototype.setCurrentTime=function(a){this.sendNotification(d.SEEK,a);return a};u.prototype.getCurrentTime=function(){return this.retrieveProxy(l.NAME).getCurrentTime()};u.prototype.getDuration=function(){return this.media.getDuration()};u.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,{src:a});return a};u.prototype.getSrc=function(){return this.retrieveProxy(l.NAME).getSrc()};u.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};u.prototype.getSource=
function(){return this.media.getSource()};u.prototype.setVolume=function(a){this.sendNotification(d.CHANGE_VOLUME,a);return a};u.prototype.getVolume=function(){return this.retrieveProxy(l.NAME).getVolume()};u.prototype.getSeeking=function(){return this.retrieveProxy(l.NAME).getSeeking()};u.prototype.getPaused=function(){return this.retrieveProxy(l.NAME).getPaused()};u.prototype.getEnded=function(){return this.retrieveProxy(l.NAME).getEnded()};u.prototype.setDisplayState=function(a){this.sendNotification(d.CHANGE_DISPLAY_STATE,
a)};u.prototype.getDisplayState=function(a){return this.appState.getDisplayState()};u.prototype.enterFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,J.FULL_SCREEN)};u.prototype.exitFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,J.NORMAL)};var da=function(a){da.__super__.constructor.call(this,a)};f(da,B);da.NAME=B.NAME;da.prototype.bindings=null;da.prototype.configurationName=null;da.prototype.configurationData=null;da.prototype.contextName=null;da.prototype.contextData=
null;da.prototype.value=null;da.prototype.getConfigurationName=function(){return this.configurationName};da.prototype.getConfigurationData=function(){return this.configurationData.value||{}};da.prototype.getContextName=function(){return this.contextName};da.prototype.getContextData=function(){return this.contextData};da.prototype.onRegister=function(){var a;a=this.facade.player||this.facade;null==this.configurationName&&(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(X.NAME);
this.bindings.registerConfiguration(this)};da.prototype.setData=function(a){var b,c,e;null==a&&(a={});this.data={};e=this.defaults;for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=new Gb(this.data);return this.data};da.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};da.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;
null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=h.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var Bc=function(){Bc.__super__.constructor.call(this)};f(Bc,puremvc.SimpleCommand);Bc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(ba.NAME);a=a.getBody();b.setToken(a);b.setAuthorized(!0)};var Ac=function(){Ac.__super__.constructor.call(this)};f(Ac,puremvc.SimpleCommand);
Ac.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(ba.NAME);a=a.getBody();b.setKey(a)};var Ya=function(a,b){this.app=a;this.config=b;Ya.__super__.constructor.call(this,this.constructor.NAME);this.proxy=new T(this.config);this.app.registerProxy(this.proxy)};f(Ya,puremvc.Mediator);Ya.prototype.player=null;Ya.prototype.config=null;Ya.prototype.proxy=null;Ya.NAME="LocalizationWrapper";Ya.prototype.getString=function(a){return this.proxy.getString(a)};Ya.prototype.listNotificationInterests=
function(){return["createFlashVars","createXML"]};Ya.prototype.handleNotification=function(a){var b,c,e,m,d,U,f,h;Ya.__super__.handleNotification.call(this,a);d=a.getName();a=a.getBody();switch(d){case "createFlashVars":e=a.flashvars;c=a.config;null!=c.language&&(e.locale_setting=c.language);break;case "createXML":for(c in d=a.xml,b=d.firstChild,a=d.getElementsByTagName("locales")[0],null==a&&(a=d.createElement("locales"),b.appendChild(a)),h=this.config.locales,h)for(e in m=h[c],b=d.createElement("locale"),
b.setAttribute("id",c),a.appendChild(b),m)f=m[e],U=d.createElement("property"),U.setAttribute("key",e),f=aa.createTextContent(d,f),U.appendChild(f),b.appendChild(U)}};var Ob=function(a,b){this.mediatorName="#@{getComponentType()}-mediator";Ob.__super__.constructor.call(this,a,null,null,b)};f(Ob,L);Ob.prototype.componentType="media-element";var Ea=function(){Ea.__super__.constructor.call(this)};f(Ea,L);Ea.prototype.componentType="layer";Ea.prototype.onRegister=function(){Ea.__super__.onRegister.call(this);
this.registerLayer()};Ea.prototype.onRemove=function(){Ea.__super__.onRemove.call(this);this.removeLayer()};Ea.prototype.registerLayer=function(){this.sendNotification(d.ADD_LAYER,this.viewComponent)};Ea.prototype.removeLayer=function(){this.sendNotification(d.REMOVE_LAYER,this.viewComponent)};var Pb=function(){Pb.__super__.constructor.call(this)};f(Pb,Ea);Pb.prototype.componentName="video";Pb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};Pb.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:b=this.facade.getMediaElement(),null!=b&&this.viewComponent.removeChild(b),b=(null!=a?"function"===typeof a.getViewComponent?a.getViewComponent():void 0:void 0)||a,this.facade.setMediaElement(b),null!=b&&this.viewComponent.appendChild(b)}};var oa=function(a,b){this.componentName=a;this.layers=[];oa.__super__.constructor.call(this,null,null,null,b)};f(oa,L);oa.prototype.componentType="player";oa.prototype.core=null;
oa.prototype.medium=null;oa.prototype.layers=null;oa.prototype.ready=!1;oa.prototype.onRegister=function(){var a;oa.__super__.onRegister.call(this);a=h.getDevice();null!=a&&this.classList.add(a)};oa.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,d.DURATION_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};oa.prototype.handleNotification=function(a){var b;
b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=a.newState;a=a.oldState;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);break;case d.TEMPORAL_TYPE_CHANGE:"live"===a?this.sendNotification(d.ADD_APPLICATION_STATE,"live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,
"live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:this.initialize()}};oa.prototype.initialize=function(){var a,b,c,e;this.ready=!0;e=this.layers;b=0;for(c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};oa.prototype.addLayer=function(a){this.layers.push(a);
this.ready&&this.viewComponent.appendChild(a)};oa.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var wb=function(a){wb.__super__.constructor.call(this,this.type,a)};f(wb,oa);wb.NAME="FlashPlayerMediator";wb.prototype.type="flash";wb.prototype.listNotificationInterests=function(){return wb.__super__.listNotificationInterests.call(this).concat([xa.PLUGINS_INITIALIZED])};wb.prototype.handleNotification=
function(a){var b;b=a.getName();a.getBody();switch(b){case d.READY:return;case xa.PLUGINS_INITIALIZED:this.initialize();return}wb.__super__.handleNotification.call(this,a)};var ac=function(){ac.__super__.constructor.call(this)};f(ac,puremvc.SimpleCommand);ac.prototype.getProxy=function(){return this.facade.retrieveProxy(C.NAME)};var ld=function(){ld.__super__.constructor.call(this)};f(ld,ac);ld.prototype.execute=function(a){a=this.getProxy();a.vcsSet(a.currentTime)};var md=function(){md.__super__.constructor.call(this)};
f(md,ac);md.prototype.execute=function(a){this.getProxy().vcsSet(0)};var nd=function(){};nd.setCookie=function(a,b,c,e,m){var d;b=escape(b);null!=c&&(d=new Date,d.setDate(d.getDate()+c),b+="; expires\x3d"+d.toUTCString());null!=m&&(b+="; domain\x3d"+m);null!=e&&(b+="; path\x3d"+e);return document.cookie=a+"\x3d"+b};nd.getCookie=function(a){var b,c,e,m,d,U;c=document.cookie.split(";");d=0;for(U=c.length;d<U;d++)if(b=c[d],e=b.indexOf("\x3d"),m=b.substr(0,e).replace(/^\s+|\s+$/g,""),b=unescape(b.substr(e+
1)),m===a)return b};nd.deleteCookie=function(a){return this.setCookie(a,"",-1)};var od=function(){od.__super__.constructor.call(this)};f(od,ac);od.prototype.execute=function(a){var b;b=this.getProxy();a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==b.currentTime&&b.vcsSet(a);b.currentTime=a};var ea=function(a){ea.__super__.constructor.call(this,a)};f(ea,da);ea.NAME=B.NAME;ea.prototype.enabled=!0;ea.prototype.plugin=null;ea.prototype.setEnabled=function(a){return this.enabled=a};ea.prototype.getEnabled=
function(){return this.enabled};ea.prototype.createPlugin=function(){};ea.prototype.initialize=function(){this.plugin=this.createPlugin()};ea.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var C=function(a){C.__super__.constructor.call(this,a)};f(C,ea);C.NAME=B.NAME;C.prototype.client=null;C.prototype.currentTime=null;C.prototype.idps=null;C.prototype.idp=null;C.prototype.token=null;C.prototype.authz=null;C.prototype.defaults={platformID:null,
resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};C.prototype.getScript=function(){return this.value.plugin};C.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));this.client.assignhandler("chooser",this.chooserHandler.bind(this));
this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};C.prototype.authorize=function(){this.token=this.authz=null;this.disengage();this.sendNotification("startAuthentication")};C.prototype.authorized=
function(a){null==a&&(a=this.token);this.engage();this.sendNotification("authenticationComplete");this.sendNotification(ta.AUTHORIZED,a)};C.prototype.play=function(a){this.sendNotification(d.INITIALIZED);this.sendNotification(d.PLAY);if(null!=a)return this.sendNotification(d.SEEK,a)};C.prototype.engage=function(){this.facade.registerCommand(d.TIME_UPDATE,od);this.facade.registerCommand(d.PAUSE,ld);this.facade.registerCommand(d.ENDED,md)};C.prototype.disengage=function(){this.facade.removeCommand(d.TIME_UPDATE);
this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.ENDED)};C.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),"_top");break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),"ais_popup","width\x3d"+c+",height\x3d"+a)}};C.prototype.bounce=function(a){this.client.bounce()};
C.prototype.init=function(a){this.client.init()};C.prototype.choose=function(){this.client.chooser()};C.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};C.prototype.vcsSet=function(a){a=h.formatTimecode(a);return this.client.vcsSet(this.value.contentID,a)};C.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(d.DISPATCH_EVENT,new $("authenticationfailed")),this.choose()):!0===c&&this.init()};
C.prototype.initHandler=function(a,b){var c,e,m,g;this.idp=b.idps;this.facade.idps={};m=b.idps;for(c in m){m=m[c];this.facade.idps.key=c;for(e in m)g=m[e],this.facade.idps[e]=g;break}for(c in b)m=b[c],"idps"!==c&&null!=m&&(this.facade[c]=m);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key];this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating");this.sendNotification("aisauthenticated",this.facade.idps);this.resourceAccess(this.value.resourceID)};
C.prototype.chooserHandler=function(a,b){this.facade.sendNotification(d.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification("chooseAuthProvider",b)};C.prototype.launchIDPLogin=function(a){var b,c,e;this.sendNotification("aisathenticating",!0);b=this.idps[a];c=(null!=(e=b.window_display)?e.method:void 0)||"redirect";e=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,
e),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,e),"ais_popup","width\x3d"+c+",height\x3d"+b)}};C.prototype.identityHandler=function(a,b){};C.prototype.authz_queryHandler=function(a,b){var c;c="true"===b.authorization.toString();!1===c?(this.sendNotification(ta.AUTHORIZATION_FAILED),this.authorize()):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},
this.facade.player.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),this.token="hdnea\x3d"+b.security_token,this.sendNotification(ta.SET_KEY,"hdnea\x3d"),this.sendNotification(ta.SET_TOKEN,b.security_token),this.sendNotification("aisathenticating",!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};C.prototype.logoutHandler=function(a,b){top.location.href=top.location.href};
C.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification("choosePlayOptions",h.flattenTimecode(b.ph_pos)))};C.prototype.sort=function(a,b,c){var e,m,d,U,f;U={};e=[];m=0;for(d in a)f=a[d],e[m]={key:d,value:f[c]},m++;e.sort(function(a,c){var e,m;e="value"===b?a.value.toLowerCase():a.key.toLowercase();m="value"===b?c.value.toLowerCase():c.key.toLowercase();
return e<m?-1:e>m?1:0});m=c=0;for(d=e.length;c<d;m=++c)m=e[m],U[m.key]=a[m.key];return U};C.prototype.setRedirect=function(a){var b,c,e;try{b=/\/dev\./,e=window.top.location.href||window.top.location,c=b.test(e)?e.replace(b,"/"):null,nd.setCookie(this.getTarget(a),e,1,"/",c)}catch(m){}};C.prototype.getTarget=function(a){null==a&&(a="redirect");return this.value.responseTargets[a]};var l=function(){l.__super__.constructor.call(this,l.NAME);this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,
duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1};"desktop"===h.getDevice()&&(this.initialized=!0);this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),
error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)};this.resumeHandlers={seeked:this.resumeseeked.bind(this),canplay:this.resumecanplay.bind(this)}};f(l,puremvc.Proxy);l.NAME="PlaybackProxy";l.prototype.data=null;l.prototype.initialized=!1;l.prototype.enabled=null;l.prototype.handlers=null;l.prototype.resumeHandlers=null;l.prototype.playWhenLoaded=!1;l.prototype.getEnabled=
function(){return this.enabled};l.prototype.setEnabled=function(a){if(a!==this.enabled)return this.enabled=a,!0===this.enabled?this.load():this.applyHandlers(!1),a};l.prototype.applyHandlers=function(a){var b,c,e,m;null==a&&(a=!0);e=this.getMediaElement();a=a?"addEventListener":"removeEventListener";m=this.handlers;for(c in m)b=m[c],e[a](c,b)};l.prototype.resumecanplay=function(a){var b;b=a.target;b.removeEventListener("canplay",this.resumeHandlers.canplay);this.handlers.durationchange(a);0<this.data.currentTime?
(b.addEventListener("seeked",this.resumeHandlers.seeked),this.seek()):this.resumecomplete()};l.prototype.resumeseeked=function(a){a.target.removeEventListener("seeked",this.resumeHandlers.seeked);this.resumecomplete()};l.prototype.resumecomplete=function(){this.data.loading=!1;this.applyHandlers(!0);!0===this.playWhenLoaded&&setTimeout(this.play.bind(this),0)};l.prototype.ontimeupdate=function(a){this.data.currentTime=a.target.currentTime;this.sendNotification(d.TIME_UPDATE,this.data.currentTime)};
l.prototype.ondurationchange=function(a){var b;b=this.getMediaElement().duration;b===this.data.duration||0===b||isNaN(b)||(this.data.duration=b,/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||this.sendNotification(d.CHANGE_DURATION,b))};l.prototype.onplay=function(a){this.data.paused=!1};l.prototype.onplaying=function(a){this.data.paused=!1;this.data.seeking=!1;this.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING);this.sendNotification(d.PLAYING)};l.prototype.onpause=function(a){!0!==
this.data.seeking&&(this.data.paused=!0,0<a.target.readyState&&(this.sendNotification(d.PAUSED),this.sendNotification(d.CHANGE_PLAY_STATE,D.PAUSED)))};l.prototype.onloadeddata=function(a){this.sendNotification(d.LOADED_DATA)};l.prototype.onwaiting=function(a){this.sendNotification(d.WAITING)};l.prototype.onseeking=function(a){a.target.removeEventListener("timeupdate",this.handlers.timeupdate);this.data.seeking=!0;this.sendNotification(d.SEEKING)};l.prototype.onseeked=function(a){this.data.seeking=
!1;this.sendNotification(d.SEEKED);a.target.addEventListener("timeupdate",this.handlers.timeupdate)};l.prototype.onended=function(a){this.data.ended=!0;this.sendNotification(d.ENDED)};l.prototype.onprogress=function(a){var b,c;try{c=a.target,b=c.buffered,this.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}};l.prototype.onerror=function(a){this.sendNotification(d.ERROR,a.target.error)};l.prototype.onloadstart=function(a){this.sendNotification(d.LOAD_START)};l.prototype.oncanplay=
function(a){this.sendNotification(d.CAN_PLAY)};l.prototype.oncanplaythrough=function(a){this.sendNotification(d.CAN_PLAY_THROUGH);this.sendNotification(d.PROGRESS,this.getDuration())};l.prototype.onloadedmetadata=function(a){this.sendNotification(d.ENABLE_FULL_SCREEN);this.sendNotification(d.LOADED_METADATA)};l.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=null;this.data.ended=!1;this.data.paused=!1;this.data.seeking=!1;this.data.started=!1;this.data.loading=
!1};l.prototype.getStarted=function(){return this.data.started};l.prototype.getMediaElement=function(){return this.facade.getMediaElement()};l.prototype.canPlayType=function(a){var b;b=this.getMediaElement().canPlayType(a)||"";(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===h.mimeTypes.m3u8&&(b="maybe");return b};l.prototype.getPaused=function(){return this.data.paused};l.prototype.getEnded=function(){return this.data.ended};l.prototype.getSeeking=function(){return this.data.seeking};
l.prototype.getCurrentTime=function(){return this.data.currentTime};l.prototype.setCurrentTime=function(a){if(a!==this.data.currentTime)return this.data.currentTime=a,this.getStarted()&&this.seek(a),a};l.prototype.seek=function(a){null==a&&(a=this.data.currentTime);this.getMediaElement().currentTime=a};l.prototype.getSrc=function(){return this.data.src};l.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,"The value of src is not supported: "+a);this.reset();return this.data.src=
a};l.prototype.getVolume=function(){return this.getMediaElement().volume};l.prototype.setVolume=function(a){0<=a&&1>=a&&a!==this.getMediaElement().volume&&this.sendNotification(d.VOLUME_CHANGE,this.getMediaElement().volume=a);return a};l.prototype.getMuted=function(){return this.data.muted};l.prototype.setMuted=function(a){var b;this.data.muted=a;!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume;this.sendNotification(d.CHANGE_VOLUME,b);return a};l.prototype.getDuration=
function(){return this.data.duration};l.prototype.play=function(){!0!==this.data.started?(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0):!0===this.data.loading?this.playWhenLoaded=!0:this.getMediaElement().play()};l.prototype.pause=function(){this.data.paused=!0;this.getMediaElement().pause()};l.prototype.load=function(){var a,b;this.data.loading=!0;this.playWhenLoaded=!1;a=this.getMediaElement();a.addEventListener("canplay",this.resumeHandlers.canplay);a.addEventListener("loadedmetadata",
this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);a.src=this.data.src;h.isIPad()&&8>(null!=(b=h.getIOSversion())?b[0]:void 0)?setTimeout(a.load.bind(a),100):a.load()};var pd=function(){pd.__super__.constructor.call(this)};f(pd,puremvc.SimpleCommand);pd.prototype.execute=function(a){var b,c;a=this.facade.retrieveProxy(n.NAME);b=this.facade.retrieveProxy(ba.NAME);c=a.getSrc()||"";-1===c.indexOf(".smil")&&
(c=b.createURL(c));a.setSrc(c);this.facade.getMediaElement().authenticationComplete({media:a.getData()})};var Ra=function(a){this.supportedTypes=null!=a?a:this.supportedTypes;Ra.__super__.constructor.call(this)};f(Ra,l);Ra.prototype.supportedTypes=null;Ra.prototype.playbackCoreName=null;Ra.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};Ra.prototype.getSupportedTypes=function(){return this.supportedTypes};Ra.prototype.setSupportedTypes=function(a){return this.supportedTypes=
a};Ra.prototype.canPlayType=function(a){return-1!==this.getSupportedTypes().indexOf(a)?"maybe":""};var V=function(a){this.player=a;V.__super__.constructor.call(this)};f(V,Ra);V.NAME=l.NAME;V.prototype.player=null;V.prototype.initialized=!0;V.prototype.playbackCoreName="flash";V.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];V.prototype.getPaused=function(){return this.player.getPaused()};V.prototype.getEnded=function(){return this.player.getEnded()};
V.prototype.getSeeking=function(){return this.player.getSeeking()};V.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};V.prototype.setCurrentTime=function(a){this.player.setCurrentTime(a);return a};V.prototype.getSrc=function(){return this.player.getSrc()};V.prototype.setSrc=function(a){this.player.setSrc(a);return a};V.prototype.getVolume=function(){return this.player.getVolume()};V.prototype.setVolume=function(a){this.player.setVolume(a);return a};V.prototype.getMuted=function(){return this.player.getMuted()};
V.prototype.setMuted=function(a){this.player.setMuted(a);return a};V.prototype.getDuration=function(a){return this.player.getDuration()};V.prototype.play=function(){this.player.play()};V.prototype.pause=function(){this.player.pause()};V.prototype.load=function(){this.player.load()};var p=function(a){this.flashObjectID+=Date.now();this.plugins={};this.displayState=J.NORMAL;this.debug=/debug\=true/.test(location.search);p.__super__.constructor.call(this,a)};f(p,q);p.prototype.createFramework=function(){var a,
b,c,e,m,d,U=this;p.__super__.createFramework.call(this);c=this.config.flash||{};a=!0===(null!=(b=c["static"])?b.enabled:void 0)?c["static"]:c;m=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf";d=c.version||"10.1";b=c.expressInstallSWF||"playerProductInstall.swf";e=this.createParams(c);a=this.createAttributes(c);this.flashvars=this.createFlashVars(c);null==this.flashvars.settings_url&&(c=this.createXML(this.config),null!=c&&(this.flashvars.settings_xml=c));swfobject.embedSWF(m,this.flashObjectID,
"100%","100%",d,b,this.flashvars,e,a,function(a){U.createdHandler(a)})};p.prototype.playerType="flash";p.prototype.flashObjectID="flashObject";p.prototype.playState=null;p.prototype.loaded=!1;p.prototype.flashvars=null;p.prototype.seeking=!1;p.prototype.paused=!1;p.prototype.ended=!1;p.prototype.muted=!1;p.prototype.plugins=null;p.prototype.debug=!1;p.prototype.started=!1;p.prototype.displayState=null;p.prototype.mediaProxy=null;p.prototype.createModel=function(){this.registerProxy(new v);this.registerProxy(new X);
this.registerProxy(new ba);this.mediaProxy=new n;this.registerProxy(this.mediaProxy);this.registerProxy(new V(this))};p.prototype.createView=function(){this.registerMediator(new wb(this.getViewComponent()));this.registerMediator(new Pb);this.registerMediator(new Qa);this.registerMediator(new Ya(this,this.config))};p.prototype.createController=function(){this.registerCommand(ta.AUTHORIZED,pd);this.registerCommand(ta.SET_TOKEN,Bc);this.registerCommand(ta.SET_KEY,Ac);this.registerCommand(d.CHANGE_PLAY_STATE,
$b)};p.prototype.createMediaElement=function(){var a,b;a=new Ob("flash","div");b=a.getViewComponent();b.id=b.name=this.flashObjectID;this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};p.prototype.createParams=function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&
(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};p.prototype.getModules=function(){return this.plugins};p.prototype.createPlugins=function(){var a,b,c,e,m;m=y.plugins;for(c in m)if(a=m[c],c in this.config&&!1!==this.config[c].enabled)if(a=a[this.getPlayerType()],null==a)this.logger.debug("[AMP FLASH]","Plugin could not be found",c);else try{e=this[c]=this.plugins[c]=new a(this,this.config[c]),
this.registerMediator(this.plugins[c]),b="function"===typeof e.getFeatureName?e.getFeatureName():void 0,null!=b&&(this[b]=e),this.logger.debug("[AMP FLASH]","Plugin Registered",c)}catch(d){this.error("Plugin Error: "+c,d)}this.sendNotification(xa.PLUGINS_INITIALIZED,this.plugins)};p.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=a.attributes&&(null!=a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};
p.prototype.createFlashJSON=function(a,b){var c,e;null==a&&(a=this.config);a=JSON.parse(JSON.stringify(a));e=function(a,b,e){switch(typeof e){case "string":a[b]=escape(e);break;case "object":case "array":c(e)}};c=function(a){var b,c,d,f;if(a instanceof Array)for(b=d=0,f=a.length;d<f;b=++d)c=a[b],e(a,b,c);else if("object"===typeof a)for(b in a)c=a[b],e(a,b,c)};c(a);return escape(JSON.stringify(a,null,b))};p.prototype.createFlashVars=function(a){var b,c,e,d,g,U;b={};e=JSON.parse(JSON.stringify(this.config));
e.flash=null;delete e.flash;e.locales=null;delete e.locales;e.params=null;delete e.params;e.rules=null;delete e.rules;b.settings_json=this.createFlashJSON(e);null!=this.config.autoplay&&(b.auto_play=this.config.autoplay);null!=this.config.rules&&h.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(h.rules));null!=this.config.volume&&(b.volume=h.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=this.config.name&&(b.core_player_name=
this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);b.auto_replay=!0===this.config.loop;null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled&&"external"!==this.config.fullscreen.mode);null!=this.config.titlebar&&(b.titlebar_enabled=!1!==this.config.titlebar.enabled);null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);null!=(null!=
(d=this.config.controls)?d.displaySceneMarkers:void 0)&&(b.displaySceneMarkers=this.config.controls.displaySceneMarkers);null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&(this.setSource(this.config.media.source),b.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),
null!=this.config.media.title&&(b.title=escape(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);null!=(null!=(g=this.config.ima)?null!=(U=g.overlay)?U.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&
(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");this.sendNotification("createFlashVars",{flashvars:b,config:this.config});if(null!=a.vars)for(c in e=a.vars,e)a=e[c],b[c]=a;return b};p.prototype.createXML=
function(a){var b,c,e,d,g,U,f;if(null!=(null!=a?null!=(b=a.flash)?b.xml:void 0:void 0)){b=aa.parse(a.flash.xml);this.sendNotification("createXML",{config:a,xml:b});d=b.getElementsByTagName("plugin");g=a.flash["static"];if(!0===(null!=g?g.enabled:void 0)&&null!=g.plugins)for(U=0,f=d.length;U<f;U++)a=d[U],null!=(c=g.plugins[a.getAttribute("id")])&&(a.setAttribute("type","static"),aa.updateTextContent(a,c));else if(!0===this.debug)for(g=0,U=d.length;g<U;g++)a=d[g],"AkamaiAdvancedStreamingPlugin"===a.getAttribute("id")&&
(c=a.textContent||a.text,aa.updateTextContent(a,c.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")));d=null!=(e=this.config.fullscreen)?e.mode:void 0;if(null!=d)for(d=b.getElementsByTagName("element"),a=0,c=d.length;a<c;a++)e=d[a],"fullscreenBtn"===e.getAttribute("id")&&e.setAttribute("action","external");b=aa.serialize(b);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");return escape(b)}};p.prototype.createdHandler=
function(a){var b=this;this.mediaElement=a.ref;this.mediaElement.className=Mb.PREFIX+Ob.prototype.componentType;this.mediaElement.eventHandler=function(a,e){return b.eventHandler(a,e)};this.sendNotification("flashCreated");null!=this.getMedium()&&this.setMedium(this.getMedium())};p.prototype.eventHandler=function(a,b){var c,e,m,g,f,h;try{switch(a){case "mediaPlayerInitialized":g=m="ready";break;case "mediaPlayerReset":null==b&&(m="ready");this.started=!1;break;case "mediaPlayerLoading":g="loadstart";
break;case "mediaPlayerError":g=m="error";break;case "mediaError":g=m="error";break;case "mediaPlayerErrorStreamNotFound":g=m="error";break;case "mediaPlayerCapabilityChange":e=b.type;"canPlayChange"===e&&!0===b.enabled?(g="canplay",this.loaded=!0):"canSeekChange"===e&&!0===b.enabled?g="canplaythrough":"temporalChange"===e&&!0===b.enabled&&(g="loadedmetadata");break;case "mediaPlayerPlaybackOpen":g="started";this.started=!0;break;case "mediaPlayerPlaying":this.started||this.sendNotification(d.PLAY,
b);g=m="playing";this.paused=this.ended=!1;break;case "mediaPlayerElementEvent":"fullscreenBtn"===b.element&&"click"===b.type&&"external"===(null!=(f=this.config)?null!=(h=f.fullscreen)?h.mode:void 0:void 0)&&(m=this.getDisplayState()===J.FULL_SCREEN?J.NORMAL:J.FULL_SCREEN,this.setDisplayState(m));break;case "mediaPlayerPlaybackSequenceInitiated":g="playrequest";break;case "mediaPlayerResumeOrPausePlayback":"paused"!==this.playState&&this.started&&(g="play");break;case "mediaPlayerPlaybackSequenceComplete":g=
m="ended";this.ended=!0;break;case "mediaPlayerPaused":g="pause";m="paused";this.paused=!0;break;case "mediaPlayerBuffering":"ended"!==this.className&&(g=m="waiting");break;case "mediaPlayerDurationChange":isNaN(b.time)||(g="durationchange",b=b.time);break;case "mediaPlayerVolumeChanged":g="volumechange";break;case "mediaPlayerPlayheadUpdate":g="timeupdate";break;case "mediaPlayerSeekingChange":g=b.seeking?"seeking":"seeked";this.seeking=b.seeking;break;case "mediaPlayerFullscreenChange":g="fullscreenchange";
b="fullScreen"===b.displayState;this.applyDisplayState(b?J.FULL_SCREEN:J.NORMAL);break;case "mediaPlayerFailoverAttempt":g="failoverattempt";break;case "error":a=null}null!=a&&a!==g&&(this.sendNotification(d.DISPATCH_EVENT,{type:a,data:b,player:this.parent}),this.sendNotification(a,b));null!=g&&("error"===g&&(c=b.error||b,this.error("Flash Error",c)),this.sendNotification(g,b));null!=m&&this.setPlayState(m)}catch(k){this.error("Event Error: "+a,k)}};p.prototype.error=function(a,b){this.logger.error("[AMP FLASH ERROR]",
a,b)};p.prototype.setPlayState=function(a){var b;if(a!==this.playState)return b={newState:a,oldState:this.playState},this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,b),a};p.prototype.setMedia=function(a){p.__super__.setMedia.call(this,a);null!=this.playState&&this.setPlayState("ready");this.mediaProxy.setData(a);null!=a.src&&this.setSrc(a.src);null!=a.source&&0<a.source.length&&this.setSource(a.source);this.sendNotification(d.MEDIA_CHANGE,a);this.loaded=!0;this.mediaElement.loadURL(this.mediaProxy.getSrc(),
this.mediaProxy.getData());return a};p.prototype.getMedia=function(){return this.mediaProxy.getData()};p.prototype.load=function(){this.loaded=!0;this.mediaElement.loadURL(this.mediaProxy.getSrc())};p.prototype.play=function(){this.loaded||this.load();this.mediaElement.unpause()};p.prototype.setMuted=function(a){this.muted=a;try{!0===a?this.mediaElement.mute():this.mediaElement.unmute()}catch(b){this.error("Flash muted error",b)}return a};p.prototype.getMuted=function(){return this.muted};p.prototype.getSrc=
function(a){return this.mediaElement.getURL()};p.prototype.setSrc=function(a){this.mediaProxy.setSrc(a);this.loaded=!1;this.setMedium(h.getMimeType(a));return a};p.prototype.setAutoplay=function(a){this.mediaElement.setPlayerProperty("autoplay",a);return a};p.prototype.getAutoplay=function(){return this.mediaElement.getPlayerProperty("autoplay")};p.prototype.getMedium=function(){return this.mediaProxy.getData().medium};p.prototype.setMedium=function(a){var b,c;b=this.mediaProxy.getData();if(a!==b.medium)return null!=
b.medium&&(c="medium-"+b.medium),b=b.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,{newState:"medium-"+b,oldState:c}),a};p.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){b=this.mediaProxy.getData();b.source=a;this.loaded=!1;b=h.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");
return a}};p.prototype.getSource=function(a){return this.mediaProxy.getData().source};p.prototype.getSeeking=function(){return this.seeking};p.prototype.getPaused=function(){return this.paused};p.prototype.getEnded=function(){return this.ended};p.prototype.getFlashXML=function(){var a,b;b=unescape(this.flashvars.settings_xml);a=aa.parse(b);a.toString=function(){return b};return a};p.prototype.getFlashVars=function(){return this.flashvars};p.prototype.evaluateBinding=function(a){return this.mediaElement.evaluateBinding(a)};
p.prototype.canPlayType=function(a){return 0<=Oc.call(h.flashTypes,a)?"maybe":""};p.prototype.replay=function(){this.mediaElement.replay()};p.prototype.pause=function(){this.mediaElement.pause()};p.prototype.end=function(){this.mediaElement.stopPlayer()};p.prototype.getCurrentTime=function(a){return this.mediaElement.getCurrentTime()};p.prototype.setCurrentTime=function(a){this.mediaElement.jumpToTime(a);return a};p.prototype.getParams=function(){return this.mediaElement.getParams()};p.prototype.setParams=
function(a){this.mediaElement.setParams(a);return a};p.prototype.getVolume=function(){return this.mediaElement.getVolume()};p.prototype.setVolume=function(a,b){this.mediaElement.setVolume(a,b||"");return a};p.prototype.getDuration=function(){return this.mediaElement.getDuration()};p.prototype.getDisplayState=function(a){return this.displayState};p.prototype.setDisplayState=function(a){var b;if(a!==this.displayState&&(this.applyDisplayState(a),"external"!==(null!=(b=this.config.fullscreen)?b.mode:
void 0)))return this.displayState===J.FULL_SCREEN?this.mediaElement.enterFullScreen():this.mediaElement.exitFullScreen(),a};p.prototype.applyDisplayState=function(a){var b;a!==this.displayState&&(b={newState:a,oldState:this.displayState},this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,b),this.sendNotification(d.DISPATCH_EVENT,new $("fullscreenchange",this.displayState===J.FULL_SCREEN)))};p.prototype.enterFullScreen=function(){this.setDisplayState(J.FULL_SCREEN)};p.prototype.exitFullScreen=
function(){this.setDisplayState(J.NORMAL)};p.prototype.recordContentChange=function(a){this.mediaElement.recordContentChange(a)};var Va=function(a){this.module=a;Va.__super__.constructor.call(this,a.getModuleName(),this)};f(Va,puremvc.Mediator);Va.prototype.module=null;Va.prototype.mediator=null;Va.prototype.initializeNotifier=function(a){var b,c=this;Va.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),
this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};Va.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};Va.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)};Va.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};Va.prototype.handleNotification=
function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languagechange",
TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",
REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",
REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",
MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged"},Hb=function(){};Hb.construct=
function(){var a,b,c;c=this.deserialize(window.location.search);for(a in c)b=c[a],Hb[a]=b;return!0};Hb.serialize=function(a,b){var c,e,d,g;d=[];for(e in a)g=a[e],null!=g&&(c=b?b+"["+e+"]":e,d.push("object"===typeof g?this.serialize(g,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(g)));return d.join("\x26")};Hb.deserialize=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,e,d,g){b[decodeURIComponent(e)]=decodeURIComponent(g)}));return b};Hb.constructed=
Hb.construct();var xa={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},D={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"},xb=function(){xb.__super__.constructor.call(this);null==this.contextName&&(this.contextName=this.constructor.NAME)};f(xb,puremvc.Proxy);xb.prototype.contextName=null;xb.prototype.contextData=null;xb.prototype.getContextName=function(){return this.contextName};
xb.prototype.getContextData=function(){return this.contextData};var Yb=function(){Yb.__super__.constructor.call(this)};f(Yb,puremvc.SimpleCommand);Yb.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST)};var ua=function(){ua.__super__.constructor.call(this)};f(ua,puremvc.Proxy);ua.NAME="PlaybackProxy";ua.prototype.src=null;ua.prototype.canPlayType=function(a){return"external"===a};ua.prototype.getSrc=function(){return this.src};ua.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,
"The value of src is not supported: "+a);a!==this.src&&(this.src=a);return a};ua.prototype.play=function(){window.open(this.getSrc(),"_blank")};ua.prototype.load=function(){};ua.prototype.setVolume=function(){};ua.prototype.pause=function(){};ua.prototype.setEnabled=function(){};ua.prototype.getCurrentTime=function(){return 0};ua.prototype.setCurrentTime=function(a){};ua.prototype.getDuration=function(){return 0};var M={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},
Qb=function(){};Qb.prototype.data=null;Qb.prototype.value=null;Qb.prototype.source=null;Qb.prototype.parse=function(a){};Qb.prototype.compile=function(a,b){};var Mb={PREFIX:"akamai-"},ta={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"},ba=function(){ba.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};f(ba,puremvc.Proxy);ba.NAME="SecurityProxy";ba.prototype.setupHDN1=
function(){var a=this;return window.retrieveToken=function(b,c){var e;a.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",b,c);e=a.getToken();null!=e?a.facade.video.tokenRetrievalSuccess("\x26primaryToken\x3d"+e):a.sendNotification(ta.AUTHORIZE);return!0}};ba.prototype.getKey=function(){return this.data.key};ba.prototype.setKey=function(a){return this.data.key=a};ba.prototype.getToken=function(){return this.data.token};ba.prototype.setToken=function(a){return this.data.token=a};ba.prototype.getSecret=
function(){var a;if(null==this.data.token)return null;a="";null!=this.data.key&&(a+=this.data.key);return a+=this.data.token};ba.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};ba.prototype.getAuthorized=function(){return this.data.authorized};ba.prototype.setAuthorized=function(a){return this.data.authorized=a};ba.prototype.getProvider=function(){return this.data.provider};ba.prototype.setProvider=function(a){return this.data.provider=
a};var $b=function(){$b.__super__.constructor.call(this)};f($b,puremvc.SimpleCommand);$b.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(v.NAME);a=a.getBody();b.setPlayState(a)};var uc=function(){uc.__super__.constructor.call(this)};f(uc,puremvc.SimpleCommand);uc.prototype.execute=function(a){var b;a=a.getBody();this.facade.retrieveProxy(O.NAME).setPlaybackType(a.type);b=this.facade.retrieveProxy(l.NAME);b.setSrc(a.src);b.setCurrentTime(a.startTime||0)};var yc=function(){yc.__super__.constructor.call(this)};
f(yc,puremvc.SimpleCommand);yc.prototype.execute=function(a){var b;a=a.getBody();b=this.facade.retrieveProxy(n.NAME);b.getDuration()!==a&&b.setDuration(a)};var wc=function(){wc.__super__.constructor.call(this)};f(wc,puremvc.SimpleCommand);wc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(l.NAME).getMediaElement();k.clear(b);this.facade.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(d.CHANGE_PLAY_STATE,D.ERROR)};var xc=function(){xc.__super__.constructor.call(this)};
f(xc,puremvc.SimpleCommand);xc.prototype.execute=function(a){var b;a=null!=(b=this.facade.config)?b.volume:void 0;null!=a&&this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(d.CHANGE_DISPLAY_STATE,J.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,D.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE)};var vc=function(){vc.__super__.constructor.call(this)};f(vc,puremvc.SimpleCommand);vc.prototype.execute=function(a){a=a.getBody()||{};this.facade.retrieveProxy(X.NAME).compile(a.contexts,
a.suppressErrors)};var zc=function(){zc.__super__.constructor.call(this)};f(zc,puremvc.SimpleCommand);zc.prototype.execute=function(a){a=a.getBody();this.facade.retrieveProxy(Wa.NAME).setData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var sc=function(){sc.__super__.constructor.call(this)};f(sc,puremvc.SimpleCommand);sc.prototype.execute=function(a){var b;a=a.getBody();this.sendNotification(d.CHANGE_MEDIA,a);b=this.facade.retrieveProxy(n.NAME);a=b.getData();!0===b.authorized&&
this.sendNotification(d.MEDIA_VALIDATED,a)};var tc=function(){tc.__super__.constructor.call(this)};f(tc,puremvc.SimpleCommand);tc.prototype.execute=function(a){var b,c;a=a.getBody();b=this.facade.retrieveProxy(n.NAME);c=this.facade.retrieveProxy(l.NAME);c.setEnabled(!1);c.pause();this.sendNotification(d.CHANGE_PLAY_STATE,D.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE);try{b.setData(a)}catch(e){this.sendNotification(d.ERROR,e.message)}this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(ta.AUTHORIZE)};
var Qa=function(){Qa.__super__.constructor.call(this)};f(Qa,Ea);Qa.prototype.componentName="overlays";Qa.NAME="OverlayLayerMediator";Qa.prototype.createMediatorName=function(){return Qa.NAME};Qa.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};Qa.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var Pa=function(){Pa.__super__.constructor.call(this)};
f(Pa,Ea);Pa.prototype.componentName="poster";Pa.prototype.poster=null;Pa.prototype.clickHandler=null;Pa.prototype.onRegister=function(){this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this);Pa.__super__.onRegister.call(this)};Pa.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE,!0);return!1};Pa.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Pa.prototype.handleNotification=
function(a){switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody().poster,a=null!=a&&""!==a?'\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e':"",this.poster.innerHTML=a}};var kb=function(){kb.__super__.constructor.call(this)};f(kb,Ea);kb.prototype.message=null;kb.prototype.componentName="error";kb.prototype.onRegister=function(){kb.__super__.onRegister.call(this);this.message=this.create("error-message")};kb.prototype.listNotificationInterests=function(){return[d.ERROR]};kb.prototype.handleNotification=
function(a){var b;switch(a.getName()){case d.ERROR:a=a.getBody();b="Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=a}this.message.textContent=b}};var Xa=function(){Xa.__super__.constructor.call(this)};f(Xa,ia);Xa.prototype.componentName="title-bar";Xa.prototype.title=
null;Xa.prototype.description=null;Xa.prototype.onRegister=function(){this.title=this.create("title-text");this.description=this.create("description-text");Xa.__super__.onRegister.call(this)};Xa.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Xa.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody(),b=a.title,null==b||""===b||"undefined"===b?this.classList.add("hidden"):(this.title.innerHTML=b,this.description.innerHTML=a.description?
a.description:"",this.classList.remove("hidden"))}};var Y=function(){Y.__super__.constructor.call(this)};f(Y,x);Y.prototype.player=null;Y.prototype.proxy=null;Y.prototype.initialize=function(a,b){this.player=b;this.logger=this.player.logger;Y.__super__.initialize.call(this,a)};Y.prototype.resourcesLoaded=function(){if("function"===typeof this.oninitialized)this.oninitialized(this)};Y.prototype.onRegister=function(){var a;this.createFramework();null!=(a=this.retrieveProxy(ea.NAME))&&"function"===typeof a.initialize&&
a.initialize();this.sendNotification(xa.PLUGIN_REGISTERED,this)};Y.prototype.createNotificationEvent=function(a,b,c){a=Y.__super__.createNotificationEvent.call(this,a,b,c);if(null!=a)return c=a.type.replace(RegExp("^"+this.getModuleName()),""),b="function"===typeof this.getFeatureName?this.getFeatureName():void 0,null!=b&&(c=c.replace(RegExp("^"+b),"")),a.type=c,a};Y.prototype.logNotificationEvent=function(a){if(!0===/(timeremaining)/.test(a.type))return null;this.logger.log("["+this.player.getModuleName().toUpperCase()+
" "+this.getModuleName().toUpperCase()+" EVENT]",a.type,a)};Y.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.IS_USER_ACTIVE].concat(function(){var c;c=[];for(a in xa)b=xa[a],c.push(b);return c}())};var Oa=function(){this.plugins=[];this.registered=[];Oa.__super__.constructor.call(this,this.constructor.NAME,{})};f(Oa,puremvc.Mediator);Oa.NAME="PluginAdapter";Oa.prototype.plugins=
null;Oa.prototype.registered=null;Oa.prototype.onRegister=function(){return Oa.__super__.onRegister.call(this)};Oa.prototype.listNotificationInterests=function(){return[xa.REGISTER_PLUGINS,xa.PLUGIN_REGISTERED]};Oa.prototype.handleNotification=function(a){var b,c,e,d,g,f,h;e=a.getName();a=a.getBody();switch(e){case xa.REGISTER_PLUGINS:f=this.facade.getPlayerType();d=this.onplugininitialized.bind(this);h=y.plugins;for(c in h)if(b=h[c],c in a&&(e=a[c],null!=e&&!1!==e.enabled))if(b=b[f],null==b)this.facade.logger.debug("Plugin could not be found: "+
c);else try{g=new b,g.oninitialized=d,this.plugins.push(g.initialize.bind(g,e,this.facade))}catch(k){this.logger.error("Plugin could not be created: "+c+". "+k)}this.plugins.forEach(function(a){return a()});break;case xa.PLUGIN_REGISTERED:this.registered.push(a),e="function"===typeof a.getModuleName?a.getModuleName():void 0,null!=e&&(this.facade[e]=a),c="function"===typeof a.getFeatureName?a.getFeatureName():void 0,null!=c&&(this.facade[c]=a),this.facade.logger.debug("[AMP]","registered:",a.getModuleName(),
"plugin"),this.registered.length===this.plugins.length&&this.sendNotification(xa.PLUGINS_INITIALIZED,this.plugins)}};Oa.prototype.onplugininitialized=function(a){this.facade.registerModule(a)};var Za=function(a){this.element=a};Za.prototype.element=null;Za.prototype.prefix=Mb.PREFIX;Za.prototype.contains=function(a){return this.constructor.contains(a,this.element,this.prefix)};Za.prototype.add=function(a){this.constructor.add(a,this.element,this.prefix)};Za.prototype.remove=function(a){this.constructor.remove(a,
this.element,this.prefix)};Za.prototype.toggle=function(a){return this.constructor.contains(a,this.element,this.prefix)};Za.contains=function(a,b,c){var e;null==c&&(c="");a=c+a;return null!=(null!=(e=b.classList)?e.contains:void 0)?b.classList.contains(a):-1!==b.className.indexOf(a)};Za.add=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.add:void 0)?b.classList.add(c):this.contains(a,b)||(b.className=""!==b.className?b.className+(" "+c):c)};Za.remove=function(a,b,c){var e;
null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.remove:void 0)?b.classList.remove(c):this.contains(a,b)&&(a=RegExp(" ?"+c),b.className=b.className.replace(a,""))};Za.toggle=function(a,b,c){var e;null!=(null!=(e=b.classList)?e.toggle:void 0)?b.classList.toggle(this.prefix+a):this.contains(a,b)?this.remome(a,b):this.add(a,b)};var X=function(){X.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}};f(X,puremvc.Proxy);X.NAME="DataBindingProxy";
X.prototype.contextMap=null;X.prototype.configurationMap=null;X.prototype.paramsProxy=null;X.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(Wa.NAME);this.registerContext(this.facade.retrieveProxy(n.NAME));this.registerContext(this.facade.retrieveProxy(T.NAME));this.registerContext(this.facade.retrieveProxy(O.NAME));this.update()};X.prototype.registerContext=function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};X.prototype.retrieveContext=function(a){return this.contextMap[a]};
X.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};X.prototype.registerConfiguration=function(a){null!=a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};X.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};X.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];delete this.configurationMap[a];return b};X.prototype.evaluateBinding=function(a){a=new lb(a);a.compile(this.data);
return a.value};X.prototype.update=function(a){var b,c,e,d;this.data.now=Date.now();d=this.contextMap;for(e in d)b=d[e],-1!==(null!=a?"function"===typeof a.indexOf?a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};X.prototype.compile=function(a,b){var c,e,d,g,f;null==b&&(b=!1);this.update(a);e=h.clone(this.data);g=this.paramsProxy.getConfigurationName();f=this.configurationMap;
for(d in f)c=f[d],d!==g&&c.compile(e,b)};var Da=function(){};Da.create=function(a,b,c,e){var d,g,f,h,k;null==c&&(c="div");"string"===typeof c&&(c=document.createElement(c));d=new Za(c);if(null!=a)for("string"===typeof a&&(a=[a]),h=0,k=a.length;h<k;h++)g=a[h],d.add(g);c._classList=d;null!=e&&(null!=c.innerText?c.innerText=e:c.textContent=e);null!=b&&(null!=b.getViewComponent&&(f=b.getViewComponent()),null!=f&&(b=f),b.appendChild(c));return c};Da.bindEvents=function(a,b,c){var e,d;null==c&&(c=["onRemove",
"onRegister"]);for(e in b)d=b[e],0<=Oc.call(c,e)||!/^on/.test(e)||null==(null!=d?d.bind:void 0)||(a[e]=d.bind(b))};Da.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};var mb=function(a){null!=a&&this.parse(a)};f(mb,Qb);mb.prototype.data=null;mb.prototype.value=null;mb.prototype.source=null;mb.prototype.parse=function(a){return a instanceof Array?new bc(a):a instanceof Object?new Gb(a):new lb(a)};var bc=
function(a){bc.__super__.constructor.call(this,a)};f(bc,mb);bc.prototype.parse=function(a){var b,c,e,d;this.data=[];b=e=0;for(d=a.length;e<d;b=++e)c=a[b],this.data[b]=bc.__super__.parse.call(this,c);return this.data};bc.prototype.compile=function(a,b){var c,e,d,g,f;null==a&&(a={});null==b&&(b=!1);this.value=[];f=this.data;c=d=0;for(g=f.length;d<g;c=++d){e=f[c];try{this.value[c]=e.compile(a,b)}catch(h){this.value[c]=null,b||N.error(h)}}return this.value};var Cc=function(a){this.message=Cc.MESSAGE+
a};f(Cc,Error);Cc.MESSAGE="Tokenization Error: Could not find token value for: ";var cc=function(a){cc.__super__.constructor.call(this,a)};f(cc,mb);cc.prototype.parse=function(a){return this.source=this.data=this.value=a};cc.prototype.compile=function(a,b){return this.value};var dc=function(a){dc.__super__.constructor.call(this,a)};f(dc,mb);dc.prototype.exec=null;dc.prototype.parse=function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+
";}return value;");return this.data};dc.prototype.compile=function(a,b){null==a&&(a={});null==b&&(b=!1);if(null==this.exec)return this.value;try{this.value=this.exec(a)}catch(c){if(this.value=null,!b)throw new Cc(this.data);}return this.value};var lb=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");lb.__super__.constructor.call(this,a)};f(lb,mb);lb.prototype.exec=null;lb.prototype.tokenStart=/#{/;lb.prototype.tokenEnd=/}/;lb.prototype.token=null;lb.prototype.parse=
function(a){var b,c,e,d,g,f;this.source=a;this.data=[];if(this.token.test(this.source)){d=[];c=null;a=this.source.replace(this.token,function(a,b,e,g){d.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<g.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");g=e=0;for(f=b.length;g<f;g++)a=b[g],""===a&&d[e]?(this.data.push(new dc(d[e])),e++):""!==a&&this.data.push(new cc(a));1===this.data.length&&(this.data=this.data[0])}else this.data=new cc(a);return this.data};lb.prototype.compile=
function(a,b){var c,e,d,g;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof Qb)this.value=this.data.compile(a,b);else for(this.value="",g=this.data,e=0,d=g.length;e<d;e++)c=g[e],this.value+=c.compile(a,b)}catch(f){if(this.value=null,!b)throw new Cc(this.source);}return this.value};var Gb=function(a){Gb.__super__.constructor.call(this,a)};f(Gb,mb);Gb.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=Gb.__super__.parse.call(this,
c);return this.data};Gb.prototype.compile=function(a,b){var c,e,d;null==a&&(a={});null==b&&(b=!1);this.value={};d=this.data;for(c in d){e=d[c];try{this.value[c]=e.compile(a,b)}catch(g){this.value[c]=null,N.error(g)}}return this.value};var T=function(a){var b,c;T.__super__.constructor.call(this);if(null!=a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=
a.locales[c]};f(T,xb);T.NAME="LocalizationProxy";T.prototype.contextName="l10n";T.prototype.data={language:navigator.language||navigator.browserLanguage,locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",
MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_NEXT_VIDEO:"Video starts in: ",MSG_NEXT_AD:"Next ad starts in: ",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};T.prototype.locale=null;T.prototype.onRegister=function(){this.setLocale(this.data.language)};
T.prototype.getContextData=function(){return this.locale};T.prototype.getLanguage=function(){return this.data.language};T.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(d.LANGUAGE_CHANGE,a);return a};T.prototype.setLocale=function(a){this.locale=this.data.locales[a];null==this.locale&&(this.locale=this.data.locales[a.substring(0,2)]);this.facade.l10n=this.locale;return a};T.prototype.getLocales=function(){return this.data.locales};T.prototype.setLocales=
function(a){return this.data.locales=a};T.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||""};T.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var Wa=function(a){Wa.__super__.constructor.call(this,a)};f(Wa,da);Wa.NAME="ParamsProxy";Wa.prototype.defaults={};Wa.prototype.configurationName="params";
Wa.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new Gb(this.data);return this.data};var Rb=function(){Rb.__super__.constructor.call(this)};f(Rb,puremvc.MacroCommand);Rb.prototype.initializeMacroCommand=function(){return this.addSubCommand(Yb)};Rb.prototype.execute=function(a){Rb.__super__.execute.call(this,a);this.facade.retrieveProxy(l.NAME).play()};var J={NORMAL:"normal",FULL_SCREEN:"full-screen"},
fe={FLASH:"flash",HTML:"html"},sa={ACTIVE:"active",INACTIVE:"inactive"},v=function(){v.__super__.constructor.call(this);this.device=h.getDevice()};f(v,puremvc.Proxy);v.NAME="ApplicationStateProxy";v.prototype.displayState=null;v.prototype.playState=null;v.prototype.renderMode=null;v.prototype.activeState=null;v.prototype.seeking=!1;v.prototype.isUserActive=!1;v.prototype.device=null;v.prototype.getDisplayState=function(){return this.displayState};v.prototype.setDisplayState=function(a){var b;a!==
b&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{oldState:b,newState:this.displayState}))};v.prototype.getPlayState=function(){return this.playState};v.prototype.setPlayState=function(a){var b;if(a!==this.playState){if(!0===this.seeking)switch(a){case D.PLAYING:case D.READY:this.seeking=!1;break;default:return}b=this.playState;this.playState=a;this.sendNotification(d.PLAY_STATE_CHANGE,{oldState:b,newState:this.playState})}};v.prototype.getDevice=function(){return this.device};
v.prototype.getSeeking=function(){return this.seeking};v.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a)};v.prototype.getIsUserActive=function(){return this.isUserActive};v.prototype.setIsUserActive=function(a){a!==this.isUserActive&&(this.isUserActive=a)};v.prototype.getRenderMode=function(){return this.renderMode};v.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};v.prototype.getMedium=function(){return this.medium};v.prototype.setMedium=function(a){var b;
a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{oldState:b,newState:"medium-"+this.medium}))};v.prototype.getActiveState=function(){return this.activeState};v.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{oldState:b,newState:this.activeState}))};var G=function(a){G.__super__.constructor.call(this,a)};f(G,B);G.NAME=B.NAME;
G.prototype.defaults={name:null,autoplay:!1,loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null,version:null};G.prototype.setData=function(a){null!=a.rules&&h.mergeRules(a.rules);return G.__super__.setData.call(this,a)};G.prototype.getAutoplay=function(){return this.data.autoplay};G.prototype.setAutoplay=function(a){return this.data.autoplay=a};G.prototype.getLoop=function(){return this.data.loop};G.prototype.setLoop=function(a){return this.data.loop=a};G.prototype.getEndSlate=
function(){return this.data.endslate};G.prototype.setEndSlate=function(a){return this.data.endslate=a};G.prototype.getDomain=function(){return this.data.domain};G.prototype.setDomain=function(a){return this.data.domain=a};G.prototype.getTarget=function(){return this.data.target};G.prototype.setTarget=function(a){return this.data.target=a};G.prototype.getName=function(){return this.data.name};G.prototype.setName=function(a){return this.data.name=a};G.prototype.getVersion=function(){return this.data.version};
G.prototype.getControls=function(){return this.data.controls};G.prototype.setControls=function(a){return this.data.controls=a};G.prototype.getFullscreen=function(){return this.data.fullscreen||{}};G.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var k=function(a,b,c){var e;this.target=a;this.type=b;this.handler=c;this.trigger=ee(this.trigger,this);k.instances.push(this);this.types=[];(e=this.type,0<=Oc.call(k.EVENTS,e))?h.isTouchDevice()?(this.types.push(k.TOUCH_EVENTS[this.type]),
this.type===k.TOUCH_EVENTS[1]&&this.types.push(k.TOUCH_EVENTS[4])):this.types.push(k.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};k.PRESS=0;k.RELEASE=1;k.MOVE=2;k.CLICK=3;k.CONTEXTMENU=4;k.EVENTS=[k.PRESS,k.RELEASE,k.MOVE,k.CLICK,k.CONTEXTMENU];k.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"];k.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];k.instances=[];k.create=function(a,b,c){return new k(a,
b,c)};k.bind=function(a,b){var c,e,d,g;g=k.instances;c=e=0;for(d=g.length;e<d;c=++e)c=g[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};k.unbind=function(a,b){var c,e,d,g;g=k.instances;c=e=0;for(d=g.length;e<d;c=++e)c=g[c],c.target===a&&(null!=b&&c.type!==b||c.unbind())};k.clear=function(a,b){var c,e,d,g,f;f=k.instances;c=d=0;for(g=f.length;d<g;c=++d)e=f[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),k.instances.splice(c,1))};k.prototype.types=null;k.prototype.bind=function(){var a,
b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};k.prototype.unbind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};k.prototype.clear=function(){this.unbind();
this.types=this.type=this.handler=this.target=null};k.prototype.trigger=function(a){this.handler(a)};var ec=function(){ec.__super__.constructor.call(this)};f(ec,Ra);ec.prototype.onRegister=function(){var a;a=new Ob("html5","audio");this.sendNotification(d.PLAYBACK_CORE_CHANGE,a)};ec.prototype.onRemove=function(){this.facade.createMediaElement()};ec.prototype.canPlayType=function(a){return/audio/.test(a)?"maybe":""};var O=function(a){this.defaultPlaybackCore=a;O.__super__.constructor.call(this);this.playbackCoreMap=
{};this.registerPlaybackCore(new ec)};f(O,xb);O.NAME="PlayerProxy";O.prototype.contextName="player";O.prototype.playbackCoreMap=null;O.prototype.defaultPlaybackCore=null;O.prototype.activePlaybackCore=null;O.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};O.prototype.registerPlaybackCore=function(a){null!=a&&(this.playbackCoreMap[a.getPlaybackCoreName()]=a)};O.prototype.retrievePlaybackCore=function(a){return this.playbackCoreMap[a]};O.prototype.removePlaybackCore=function(a){var b;
b=this.playbackCoreMap[a];delete this.playbackCoreMap[a];return b};O.prototype.setPlaybackType=function(a){var b,c,e,d;e=this.defaultPlaybackCore;d=this.playbackCoreMap;for(c in d)if(b=d[c],""!==b.canPlayType(a)){e=b;break}b=this.facade.retrieveProxy(l.NAME);b!==e&&(this.facade.removeProxy(l.NAME),this.facade.registerProxy(e),e.setData(b.getData()));this.activePlaybackCore=e;return a};O.prototype.canPlayType=function(a){var b,c,e;e=this.playbackCoreMap;for(c in e)if(b=e[c],b=b.canPlayType(a),""!==
b)return b;return b=this.defaultPlaybackCore.canPlayType(a)};O.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(G.NAME);e=this.facade.retrieveProxy(l.NAME);c=this.facade.retrieveProxy(n.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),duration:e.getDuration(),version:a.getVersion(),timecode:{duration:h.formatTimecode(c.getDuration()),
currentTime:h.formatTimecode(e.getCurrentTime())}}};var n=function(){this.data={metadata:{}};n.__super__.constructor.call(this)};f(n,xb);n.NAME="MediaProxy";n.prototype.contextName="media";n.prototype.data=null;n.prototype.authorized=!0;n.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),
temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}};n.prototype.setData=function(a){var b;this.data.autoplay=a.autoplay;this.data.type=a.type;null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;null!=a.duration&&this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.startTime=
a.startTime;this.data.description=a.description;this.data.status=a.status||{};"blocked"===(null!=(b=this.data.status)?b.state:void 0)&&(this.authorized=!1);this.data.category=a.category;this.data.metadata=a.metadata||{};null!=a.isLive&&this.setIsLive(a.isLive);null!=a.temporalType?this.setTemporalType(a.temporalType):this.setTemporalType("vod");null!=a.medium&&this.setMedium(a.medium);null!=a.pubDate&&this.setPubDate(a.pubDate);null!=a.track&&this.setTrack(a.track);return a};n.prototype.updateData=
function(a){var b,c;for(b in a)c=a[b],b in this.data&&(this.data[b]=c)};n.prototype.getGUID=function(){return this.data.guid};n.prototype.setGUID=function(a){return this.data.guid=a};n.prototype.getLink=function(){return this.data.link};n.prototype.setLint=function(a){return this.data.link=a};n.prototype.getStartTime=function(){return this.data.startTime||0};n.prototype.getEmbed=function(){return this.data.embed};n.prototype.setEmbed=function(a){return this.data.embed=a};n.prototype.getAutoplay=function(){return this.data.autoplay};
n.prototype.setAutoplay=function(a){return this.data.autoplay=a};n.prototype.getPubDate=function(){return this.data.pubDate};n.prototype.setPubDate=function(a){return this.data.pubDate=a};n.prototype.getCategory=function(){return this.data.category};n.prototype.setCategory=function(a){return this.data.category=a};n.prototype.getSrc=function(){return this.data.src};n.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(h.getMimeType(this.data.src))};
n.prototype.getType=function(){return this.data.type};n.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};n.prototype.getMedium=function(){return this.data.medium};n.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(v.NAME).setMedium(a)};n.prototype.getMetadata=function(){return this.data.metadata};n.prototype.setMetadata=function(a){return this.data.metadata=a};n.prototype.getSource=
function(){return this.data.source};n.prototype.setSource=function(a){var b,c;if(!(null==a||1>a.length)){this.data.source=a;c=this.facade.retrieveProxy(O.NAME)||this.facade;null!=c&&(b=h.selectSource(a,function(a){return c.canPlayType(a)}));if(null!=(null!=b?b.src:void 0)&&""!==b.src)return this.setSrc(b.src),this.setType(b.type);throw Error("No valid source could be found");}};n.prototype.getTrack=function(){return this.data.track};n.prototype.setTrack=function(a){return this.data.track=a};n.prototype.getTitle=
function(){return this.data.title};n.prototype.setTitle=function(a){return this.data.title=a};n.prototype.getWidth=function(){return this.data.width};n.prototype.setWidth=function(a){return this.data.width=a};n.prototype.getHeight=function(){return this.data.height};n.prototype.setHeight=function(a){return this.data.height=a};n.prototype.getDescription=function(){return this.data.description};n.prototype.setDescription=function(a){return this.data.description=a};n.prototype.getCategory=function(){return this.data.category};
n.prototype.setCategory=function(a){return this.data.category=a};n.prototype.getDuration=function(a){return this.data.duration};n.prototype.setDuration=function(a){var b;if(0!==a&&(b=navigator.userAgent,1!==a||!/Android/.test(b)||/Android.*Chrome/.test(b)))return a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,a)),Infinity===a&&this.setTemporalType("live"),a};n.prototype.getPoster=function(a){return this.data.poster};n.prototype.setPoster=function(a){return this.data.poster=
a};n.prototype.getIsLive=function(){return this.data.isLive};n.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a};n.prototype.getTemporalType=function(){return this.data.temporalType};n.prototype.setTemporalType=function(a){if(a!==this.data.temporalType)return this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,a)};var fc=function(){fc.__super__.constructor.call(this)};f(fc,n);fc.NAME="MediaProxy";fc.prototype.setSource=function(a){if(!(null==a||1>
a.length))return a=a.filter(function(a){return"external"===a.type}),fc.__super__.setSource.call(this,a)};var E=function(a,b,c){E.__super__.constructor.call(this,a,b,c)};f(E,q);E.prototype.playerType="external";E.prototype.createModel=function(){var a,b;this.registerProxy(new T(this.config));this.registerProxy(new v);b=new ua;this.registerProxy(new O(b));a=new X;this.registerProxy(a);this.registerProxy(new G(this.config));this.registerProxy(b);this.registerProxy(new fc);this.registerProxy(new Wa(this.config.params));
a.initialize()};E.prototype.createView=function(){var a,b=this;this.registerMediator(new oa("external",this.getViewComponent()));this.registerMediator(new Oa);a=new Qa;this.registerMediator(a);k.create(a.viewComponent,k.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)});this.registerMediator(new Pa);this.registerMediator(new Xa);a=new kb;this.viewComponent.appendChild(a.getViewComponent());this.registerMediator(a)};E.prototype.createController=function(){this.registerCommand(d.UPDATE_DATA_BINDINGS,
vc);this.registerCommand(M.TOGGLE_PLAY_PAUSE,Rb);this.registerCommand(d.PLAY,Rb);this.registerCommand(d.CHANGE_PLAY_STATE,$b);this.registerCommand(d.SET_MEDIA,sc);this.registerCommand(d.CHANGE_MEDIA,tc);this.registerCommand(d.MEDIA_CHANGE,uc);this.registerCommand(d.MEDIA_VALIDATED,oc);this.registerCommand(d.ERROR,wc);this.registerCommand(xa.PLUGINS_INITIALIZED,lc);this.registerCommand(d.READY,xc);this.registerCommand(d.CHANGE_PARAMS,zc)};E.prototype.evaluateBinding=function(a){var b;return null!=
(b=this.retrieveProxy(X.NAME))?b.evaluateBinding(a):void 0};E.prototype.canPlayType=function(a){return"maybe"};E.prototype.play=function(){this.sendNotification(d.PLAY)};E.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};E.prototype.getParams=function(){return this.retrieveProxy(Wa.NAME).getData()};E.prototype.setAutoplay=function(a){return!1};E.prototype.getAutoplay=function(){return!1};E.prototype.setLoop=function(a){return!1};E.prototype.getLoop=function(){return!1};
E.prototype.setMuted=function(a){return!1};E.prototype.getMuted=function(){return!1};E.prototype.setMedia=function(a){this.sendNotification(d.SET_MEDIA,a);return a};E.prototype.getMedia=function(a){var b;return null!=(b=this.retrieveProxy(n.NAME))?b.getData():void 0};E.prototype.setCurrentTime=function(a){return 0};E.prototype.getCurrentTime=function(a){return 0};E.prototype.getDuration=function(a){return this.retrieveProxy(n.NAME).getDuration()};E.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,
{src:a});return a};E.prototype.getSrc=function(a){return this.retrieveProxy(n.NAME).getSrc()};E.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};E.prototype.getSource=function(){return this.retrieveProxy(n.NAME).getSource()};E.prototype.setVolume=function(a){return a};E.prototype.getVolume=function(a){return 1};E.prototype.getSeeking=function(){return!1};E.prototype.getPaused=function(){return!1};E.prototype.getEnded=function(){return!1};var nb=function(){this.item=
[];this.metadata={}};nb.prototype.title=null;nb.prototype.link=null;nb.prototype.description=null;nb.prototype.category=null;nb.prototype.pubDate=null;nb.prototype.language=null;nb.prototype.ttl=null;nb.prototype.item=null;nb.prototype.metadata=null;var ja=function(){this.metadata={}};ja.prototype.src=null;ja.prototype.source=null;ja.prototype.title=null;ja.prototype.description=null;ja.prototype.link=null;ja.prototype.guid=null;ja.prototype.pubDate=null;ja.prototype.poster=null;ja.prototype.thumbnail=
null;ja.prototype.embed=null;ja.prototype.category=null;ja.prototype.type=null;ja.prototype.medium=null;ja.prototype.duration=null;ja.prototype.track=null;ja.prototype.metadata=null;ja.prototype.scenes=null;ja.prototype.startTime=null;var $=function(a,b){this.type=a;null!=b&&(this.detail=this.data=b)};$.prototype.type=null;$.prototype.target=null;$.prototype.detail=null;var gc=function(){};gc.prototype.getFeed=function(a,b,c){return h.getJson(a,b,c)};gc.prototype.getMediaNode=function(a,b,c){var e,
d,g,f;null==c&&(c=!0);g="media-"+b;e=a["media-group"]||a;d=e["media-content"];null!=d&&null!=d[g]?f=d[g]:null!=e[g]?f=e[g]:null!=a[g]?f=a[g]:null!=a[b]&&c&&(f=a[b]);return f};gc.prototype.createEmbed=function(a){var b,c,e,d,g,f;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);f=b["media-param"];d=0;for(g=f.length;d<
g;d++)e=f[d],c.params[e["@attributes"].name]=e["#text"]}catch(h){N.error("[AMP Feed Parse Error] embed parse error: "+h.message,h)}return c};gc.prototype.createFeed=function(a){var b,c,e,d,g,f,h,k,l;try{if(b=a.channel,c=new nb,null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];k=0;for(l=d.length;k<l;k++)e=d[k],f=this.createMedia(e),c.item.push(f);for(g in b)h=
b[g],g in c||(c.metadata[g]=h)}}catch(n){N.error("[AMP Feed Parse Error] feed parse error: "+n.message,n)}return c};gc.prototype.createMedia=function(a){var b,c,e,d,g,f,h,k,l,n,p,q,r,s,t,u,v,w,x,y;try{h=new ja;f=this.getMediaNode(a,"content");if(f instanceof Array)for(h.source=[],q=0,t=f.length;q<t;q++)e=f[q],l={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(g=b.label||c["#text"],null!=g&&
""!==g&&(null==l.rules&&(l.rules=[]),l.rules.push(g)))),h.source.push(l),h.medium=e["@attributes"].medium,h.duration=parseFloat(e["@attributes"].duration);else h.type=f["@attributes"].type,h.src=f["@attributes"].url,h.medium=f["@attributes"].medium,h.duration=parseFloat(f["@attributes"].duration);h.guid=a.guid;h.title=this.getMediaNode(a,"title");h.link=a.link;h.description=this.getMediaNode(a,"description");h.pubDate=new Date(Date.parse(a.pubDate));h.thumbnail=h.poster=null!=(w=this.getMediaNode(a,
"thumbnail"))?null!=(x=w["@attributes"])?x.url:void 0:void 0;h.embed=this.createEmbed(a);h.scenes=null!=(y=this.getMediaNode(a,"scenes"))?y["media-scene"]:void 0;k=this.getMediaNode(a,"status",!1);null!=k&&(h.status={state:k["@attributes"].state,reason:k["@attributes"].reason});h.category=a.category;h.category instanceof Array||(h.category=[h.category]);k=this.getMediaNode(a,"category",!1);if(null!=k)for(r=0,u=k.length;r<u;r++)c=k[r],null!=c["#text"]&&""!==c["#text"]&&h.category.push(c["#text"]);
null!=h.category&&h.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});k=this.getMediaNode(a,"subTitle");if(null!=k)for(null==h.track&&(h.track=[]),k instanceof Array||(k=[k]),s=0,v=k.length;s<v;s++)n=k[s],null!=n["@attributes"]&&h.track.push({src:n["@attributes"].href,type:n["@attributes"].type,kind:"captioning",srclang:n["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);h.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");
h.temporalType=h.isLive?"live":"ondemand";for(d in a)p=a[d],d in h||(h.metadata[d]=p)}catch(z){N.error("[AMP Feed Parse Error] media parse error: "+z.message,z)}return h};var N=function(){};N.enabled=!1;N.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};N.log=function(){try{console.log.apply(console,arguments)}catch(a){}};N.trace=function(){try{console.trace.apply(console,
arguments)}catch(a){}};N.debug=function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};N.info=function(){try{console.info.apply(console,arguments)}catch(a){}};N.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};N.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};N.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var Ha=function(a,b){this.target=null!=a?a:this;this.catchErrors=
null!=b?b:!0;this.listenerMap={}};Ha.prototype.addEventListener=function(a,b,c){null!=b&&null!=a&&(null==this.listenerMap[a]&&(this.listenerMap[a]=[]),-1===this.listenerMap[a].indexOf(b)&&this.listenerMap[a].push(b))};Ha.prototype.dispatchEvent=function(a){var b,c,e,d;c=this.listenerMap[a.type];b=this.target["on"+a.type];a.target=this.target;null!=b&&b.apply(this.target,[a]);if(null!=c)for(e=0,d=c.length;e<d;e++)b=c[e],b.apply(this.target,[a])};Ha.prototype.callListener=function(a,b){try{b.apply(this.target,
[a])}catch(c){if(!0===this.catchErrors)this.processEventError(c,a,b);else throw c;}};Ha.prototype.processEventError=function(a,b,c){var e,d;e=a.fileName||a.sourceURL;d=a.lineNumber||a.line;setTimeout(function(a){throw a;},0,{message:a.message,name:"AMP Event Listener Error",file:e,fileName:e,line:d,lineNumber:d,error:a,event:b,listener:c,functionName:c.name,toString:function(){var a;a=""+this.name+":";a+="\n\t"+this.error.toString();null!=this.event&&(a+="\n\t\tevent: "+this.event.type);null!=this.listener&&
(a+="\n\t\tfunction: "+this.listener.name);null!=this.file&&(a+="\n\t\tfile: "+this.file);null!=this.line&&(a+="\n\t\tline: "+this.line);return a}})};Ha.prototype.removeEventListener=function(a,b,c){if(null!=b&&null!=a&&(a=this.listenerMap[a],null!=a&&(b=null!=a?a.indexOf(b):void 0,-1!==b)))return a.splice(b,1)};var fa=function(){fa.__super__.constructor.call(this)};f(fa,Ha);fa.prototype.xhr=null;fa.prototype.headers=null;fa.prototype.response=null;fa.prototype.responseXML=null;fa.prototype.responseText=
null;fa.prototype.responseType=null;fa.prototype.withCredentials=!1;fa.prototype.readyState=0;fa.prototype.status=null;fa.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(g){e=new window.ActiveXObject("Microsoft.XMLHTTP")}if(fa.isCORS(b))if(Object.prototype.hasOwnProperty.call(e,"withCredentials"))try{e.withCredentials=this.withCredentials}catch(f){N.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",f)}else"undefined"!==typeof XDomainRequest&&
(c=!0,e=new XDomainRequest);if(null!=e){c&&(e.onprogress=function(){},e.ontimeout=function(){},e.onerror=function(){},e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=!1,e.responseXML.loadXML(e.responseText)),e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new $("readystatechange",e));
if(4===e.readyState)if(d.status=e.status,199<(b=d.status)&&400>b||0===d.status){null==e.responseText&&(e.responseText=e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=JSON.parse(e.responseText),d.responseType="json"}catch(g){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new $("load",d))}else 0!==d.status&&d.dispatchEvent(new $("error",
d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new $("error",d))})}catch(h){}e.open(a,b)}this.xhr=e};fa.prototype.send=function(a){var b,c,e,d=this;if(null!=this.headers)for(b in e=this.headers,e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);setTimeout(function(){d.xhr.send(a)},0)};fa.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};fa.prototype.setRequestHeaders=function(a){return this.headers=
a};fa.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};fa.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};fa.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==
b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var h=function(){};h.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
h.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];h.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css"};h.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},
html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};h.playbackModes={HTML:"html",AUTO:"auto",FLASH:"flash",NONE:"none",EXTERNAL:"external"};h.getPlaybackMode=function(a){var b,c,e,d;null==a&&(a=(null!=(c=Hb["amp-mode"])?c.toLowerCase():void 0)||this.playbackModes.AUTO);c=!1;d=this.playbackModes;for(b in d)if(e=d[b],e===a){c=!0;break}c||(a=this.playbackModes.AUTO);
if(a!==this.playbackModes.AUTO)return a!==this.playbackModes.FLASH||this.hasFlash()||(a=this.playbackModes.NONE),a;this.hasFlash()||(a=this.supportsHTML5Video()?this.playbackModes.HTML:this.playbackModes.NONE);a===this.playbackModes.AUTO&&(a=this.isHTML5()?this.playbackModes.HTML:this.playbackModes.FLASH);return a};h.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=a[b],e.push(h.rules[b]=c);return e};h.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],
b=h.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;return!1};h.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],h.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||h.getMimeType(c.src)))return c;return null};h.getMimeType=function(a){return this.mimeTypes[h.getFileExtension(a)]};h.selectTrack=function(a,b){var c,e,d,g;d=0;for(g=a.length;d<g;d++)if(c=a[d],c.kind===b){e=c;break}return e};h.isIPhone=function(){return/iPhone/.test(navigator.platform)||
/iPhone/.test(navigator.userAgent)};h.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};h.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)};h.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};h.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};h.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};h.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};
h.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType};h.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};h.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};h.getIOSversion=function(){var a;if(/iP(hone|od|ad)/.test(navigator.platform))return a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(a[1],10),parseInt(a[2],10),
parseInt(a[3]||0,10)]};h.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};h.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};h.getDevice=function(){var a;a=null;this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()?a="kindlefire":/Mac|Win32/.test(navigator.platform)&&(a="desktop");return a};h.xmlToJson=function(a){var b,c,e,d,g;e={};9===a.nodeType&&(a=
a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,b=d=0,g=c.length;d<g;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;if(a.hasChildNodes())for(g=a.childNodes,b=a=0,d=g.length;a<d;b=++a)if(c=g[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),
e[b].push(c));return e};h.getXHR=function(){return new fa};h.get=function(a,b,c){var e;null==b&&(b={});null==c&&(c=null);e=h.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&(e.onload=b.onload),null!=b.onerror&&(e.onerror=b.onerror));e.open("GET",a);null!=c&&e.setRequestHeaders(c);e.send();return e};h.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=h.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&
(d.onerror=c.onerror);d.open("POST",a);null!=e&&d.setRequestHeaders(e);d.send(b);return d};h.loadScript=function(a,b,c){var e;c=c||document.getElementsByTagName("head")[0];e=document.createElement("script");e.type="text/javascript";null!=b&&(e.addEventListener?e.onload=function(a){b()}:e.readyState&&(e.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));e.src=a;c.appendChild(e);return e};h.loadStyleSheet=function(a){var b,
c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};h.read=function(a,b,c,e){var d,g;null==b&&(b={});null==c&&(c="");null==e&&(e=[]);try{return g=this.get(a,b,e),d=g.responseText||g.text,c===h.mimeTypes.json?JSON.parse(d):c===h.mimeTypes.xml&&null!=g.responseXML?g.responseXML:d}catch(f){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",
f),null}};h.getFileExtension=function(a){return a.split(".").pop().replace(/\?.*/,"")};h.getResponseHeader=function(a,b,c){var e;null==c&&(c={});e=h.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();return e.getResponseHeader(b)};h.getResponseHeaders=function(a,b,c){var e,d,g;null==c&&(c={});e=h.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(g=b.length;d<g;d++)a=b[d],c[a]=e.getResponseHeader(a);
return c};h.isTouch=null;h.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(a){this.isTouch=!1}return this.isTouch};h.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};h.beacon=function(a){var b;b=document.getElementById("beaconId");null==b&&(b=document.createElement("img"),b.setAttribute("id","beaconId"),b.setAttribute("height",0),b.setAttribute("width",0),document.body.appendChild(b),b.style.display="none");b.setAttribute("src",a);return b};
h.getElementOffset=function(a){var b;b={left:0,top:0};if(a.offsetParent)for(b.left=a.offsetLeft,b.top=a.offsetTop;a=a.offsetParent;)b.left+=a.offsetLeft,b.top+=a.offsetTop;return b};h.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;if(null==b)return a;!0===c&&(a=h.clone(a),b=h.clone(b));for(e in b)c=b[e],"object"===typeof c?(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=h.override(a[e],c,!1)):a[e]=c;return a};h.clone=function(a,b){var c,e,d,g,f,h,k;null==b&&(b=!0);if("object"!==
typeof a)c=a;else for(g in c=a instanceof Array?[]:{},a)if(f=a[g],"object"===typeof f&&!0===b)if(f instanceof Array)for(c[g]=[],h=0,k=f.length;h<k;h++)e=f[h],c[g].push(this.clone(e));else for(d in c[g]={},f)e=f[d],c[g][d]=this.clone(e);else c[g]=f;return c};h.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";c=h.formatZeroFill(a%60);a=parseInt(a/60);c=h.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=h.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};
h.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};h.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/b:3===d.length&&(d[2]=d[2].replace(",","."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};h.cacheBust=function(a,b,c){var e;null==b&&
(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};h.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};h.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};h.getJson=function(a,b,c){var e;e=h.getXHR();e.open("GET",a);e.onload=function(a){a="document"===e.responseType?h.xmlToJson(e.responseXML):e.response;"function"===typeof b&&b(a)};e.onerror=function(a){"function"===typeof c&&c(a)};e.send();return e};
h.getSource=function(a,b,c){var e;e=h.getPlaybackMode();h.getJson(a,function(a){var c,d;a=(new gc).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==h.flashTypes.indexOf(a)||"html"===e&&-1===h.flashTypes.indexOf(a)?"maybe":""},c=h.selectSource(a.item[0].source,c));"function"===typeof b&&b(c)},c)};h.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",
this.mouseTracker)}catch(a){}};h.mouseTracker=function(a){h.clientX=a.clientX;h.clientY=a.clientY;h.pageX=a.pageX;h.pageY=a.pageY};h.isMouseOverElement=function(a){return null==a?!1:a.contains(document.elementFromPoint(h.clientX,h.clientY))};h.trackMouse();h.getActualSize=function(a,b){var c,e,d;null==b&&(b=!0);d=a.offsetWidth;c=a.offsetHeight;!0===b&&(e=getComputedStyle(a),d+=parseInt(e.marginLeft)+parseInt(e.marginRight),c+=parseInt(e.marginTop)+parseInt(e.marginBottom));return{width:d,height:c}};
var Z=function(){Z.__super__.constructor.call(this,this,!1)};f(Z,Ha);Z.UNINITIALIZED=0;Z.LOADING=1;Z.LOADED=2;Z.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};Z.parseItem=function(a){var b,c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;
case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};Z.prototype.url=null;Z.prototype.data=null;Z.prototype.xml=null;Z.prototype.readyState=Z.UNINITIALIZED;Z.prototype.loaded=!1;Z.prototype.loadURL=function(a,b){var c=this;null==b&&(b=!1);this.url=a;this.setReadyState(Z.LOADING);h.get(a,{withCredentials:b,onload:function(a){a=a.detail;"document"===a.responseType?
(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=Z.parseModule(a)):(a=a.response,"string"===typeof a&&(a=JSON.parse(a)));c.loadData(a)},onerror:function(a){c.dispatchEvent(new $("error",a));N.error(a)}})};Z.prototype.loadData=function(a){this.data=a;this.setReadyState(Z.LOADED)};Z.prototype.load=function(a,b){null==b&&(b=!1);switch(typeof a){case "object":this.loadData(a);break;case "string":this.loadURL(a,b);break;default:throw Error("[AMP ERROR] Invalid default configuration resource");
}};Z.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new $("readystatechange",a));a!==Z.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new $("load",this.data)))};var Ia=function(a,b,c,e,d){this.onclick=null!=d?d:this.onclick;Ia.__super__.constructor.call(this,e,null,b,c);this.icon=this.create("icon");null!=a&&(this.label=this.createText("label",a))};f(Ia,L);Ia.prototype.componentType="button";Ia.prototype.icon=null;Ia.prototype.label=null;Ia.prototype.onclick=null;
var ya=function(a,b){this.element=a;this.timeout=b;ya.__super__.constructor.call(this);this.resetHandler=this.reset.bind(this)};f(ya,Ha);ya.prototype.events="mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove".split(" ");ya.prototype.resetHandler=null;ya.prototype.element=null;ya.prototype.timeout=null;ya.prototype.active=!0;ya.prototype.timeoutId=null;ya.prototype.applyListeners=function(a){var b,c,e,d;null==a&&(a="add");d=this.events;c=0;for(e=d.length;c<e;c++)b=d[c],
this.element[""+a+"EventListener"](b,this.resetHandler)};ya.prototype.start=function(a){null!=a&&(this.timeout=a);this.stop();this.applyListeners("add");this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)};ya.prototype.stop=function(){this.applyListeners("remove");clearTimeout(this.timeoutId)};ya.prototype.reset=function(){this.setActive(!0);this.start()};ya.prototype.setActive=function(a){if(a!==this.active)return this.active=a,this.dispatchEvent(new $("activechange",{active:this.active})),
a};ya.prototype.getActive=function(){return this.active};var ob=function(a){ob.__super__.constructor.call(this,null,a)};f(ob,Ia);ob.prototype.componentName="full-screen";ob.prototype.onRegister=function(){ob.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};ob.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);return!1};ob.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,
d.ENABLE_FULL_SCREEN]};ob.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case d.ENABLE_FULL_SCREEN:this.setDisabled(!1)}};var Q=function(a,b){this.player=a;this.config=b;Q.__super__.constructor.call(this);this.dispatcher=new Ha(this)};f(Q,puremvc.Mediator);Q.NAME="PluginWrapper";Q.prototype.player=null;Q.prototype.config=null;Q.prototype.dispatcher=null;Q.prototype.createFlashVars=null;Q.prototype.createXML=
null;Q.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};Q.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",a.type,a.detail,a);a.player=this.player.parent;this.dispatcher.dispatchEvent(a)};Q.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};Q.prototype.createElement=function(a,b,c){var e;e=a.createElement("element");
e.setAttribute("id",b);null==c&&(c=this.getControls(a).controls);null!=c&&c.appendChild(e);return e};Q.prototype.createProperty=function(a,b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=aa.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,b,e,d);return d};Q.prototype.getControls=function(a){var b,c,e,d,g;c=a.getElementsByTagName("element");if(1>(null!=
c?c.length:void 0))return null;a={};d=0;for(g=c.length;d<g;d++)b=c[d],e=b.getAttribute("id"),a[e]=b;return a};Q.prototype.hasControls=function(a){var b;return null!=(null!=(b=this.getControls(a))?b.controls:void 0)};Q.prototype.listNotificationInterests=function(){return["createFlashVars","createXML"]};Q.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case "createFlashVars":"function"===typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case "createXML":"function"===
typeof this.createXML&&this.createXML(a.xml)}};var qd=function(){qd.__super__.constructor.call(this)};f(qd,puremvc.SimpleCommand);qd.prototype.execute=function(a){this.facade.retrieveProxy(R.NAME).start()};var rd=function(){rd.__super__.constructor.call(this)};f(rd,puremvc.SimpleCommand);rd.prototype.execute=function(a){this.facade.retrieveProxy(R.NAME).stop()};var sd=function(){sd.__super__.constructor.call(this)};f(sd,puremvc.SimpleCommand);sd.prototype.execute=function(a){var b,c;c=this.facade.retrieveProxy(R.NAME);
b=this.facade.player.retrieveProxy(v.NAME);a.getBody().newState===sa.ACTIVE&&b.getPlayState()!==D.READY&&"desktop"!==h.getDevice()&&c.start()};var td=function(){td.__super__.constructor.call(this)};f(td,puremvc.SimpleCommand);td.prototype.execute=function(a){this.facade.player.getMediaElement().controls=!1};var ud=function(){ud.__super__.constructor.call(this)};f(ud,puremvc.SimpleCommand);ud.prototype.execute=function(a){this.facade.player.getMediaElement().controls=!0};var vd=function(){vd.__super__.constructor.call(this)};
f(vd,puremvc.SimpleCommand);vd.prototype.execute=function(a){var b,c;b=a.getBody();c=b.poster;a=this.facade.player.getMediaElement();null!=c&&""!==c&&(a.poster=c);a.src=b.src;!0!==this.facade.player.getAutoplay()&&this.facade.applyClickHandler()};var wd=function(){wd.__super__.constructor.call(this)};f(wd,puremvc.SimpleCommand);wd.prototype.execute=function(a){this.facade.applyClickHandler(!1)};var za=function(a,b){za.__super__.constructor.call(this,a,b)};f(za,Q);za.NAME="ControlsWrapper";za.prototype.mode=
"auto";za.prototype.autoHide=5;za.prototype.listNotificationInterests=function(){return za.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIUM_CHANGE])};za.prototype.handleNotification=function(a){var b;za.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIUM_CHANGE:b=/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};za.prototype.createFlashVars=function(a){null!=this.config.mode&&(this.mode=a.controls_mode=this.config.mode);return a};
za.prototype.createXML=function(a){var b,c,e,d,g,f;d=a.getElementsByTagName("view")[0];e=a.getElementsByTagName("element");b=null;g=0;for(f=e.length;g<f;g++)if(c=e[g],"controls"===c.getAttribute("id")){b=c;break}null==b&&(b=a.createElement("element"),b.setAttribute("id","controls"),d.appendChild(b));null!=b.attributes.autoHideDelay?this.autoHide=b.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,b.setAttribute("autoHideDelay",this.config.autoHide));return a};
za.prototype.getMode=function(){return this.mode};za.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.mediaElement.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("[AMP CONTROLS ERROR]",b)}return a}};za.prototype.getAutoHide=function(){return this.autoHide};var R=function(a){R.__super__.constructor.call(this,a)};f(R,B);R.NAME=B.NAME;R.prototype.defaults={mode:"auto",autoHide:3};R.prototype.timeout=null;R.prototype.appState=null;R.prototype.controls=
null;R.prototype.interactiveElement=null;R.prototype.idleUtil=null;R.prototype.initializeNotifier=function(a){R.__super__.initializeNotifier.call(this,a);this.appState=this.facade.player.retrieveProxy(v.NAME);this.controls=this.facade.retrieveMediator(v.NAME)};R.prototype.onRegister=function(){var a=this;R.__super__.onRegister.call(this);null!=this.config.mode&&this.changeMode(this.config.mode);this.interactiveElement=this.facade.player.retrieveMediator(Qa.NAME).getViewComponent();"desktop"===h.getDevice()?
(k.create(this.interactiveElement,"mouseenter",function(){a.stop();a.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE)}),k.create(this.interactiveElement,"mouseleave",function(){a.start()}),this.idleUtil=new ya(this.facade.player.getViewComponent(),1E3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(b){a.sendNotification(d.CHANGE_ACTIVE_STATE,!0!==b.detail.active?sa.INACTIVE:sa.ACTIVE)}),this.idleUtil.start()):k.create(this.interactiveElement,k.CLICK,function(){a.sendNotification(d.TOGGLE_ACTIVE)})};
R.prototype.setMode=function(a){if(this.data.mode===a)return a;this.changeMode(a);return a};R.prototype.changeMode=function(a){"auto"===this.data.mode&&this.stop();this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode);this.data.mode=a;this.facade.sendNotification(d.ADD_APPLICATION_STATE,"controls-"+this.data.mode)};R.prototype.getMode=function(){return this.data.mode};R.prototype.setAutoHide=function(a){return this.data.autoHide=a};R.prototype.getAutoHide=function(){return this.data.autoHide};
R.prototype.start=function(){this.stop();"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1E3*this.data.autoHide))};R.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};R.prototype.hide=function(){"auto"===this.data.mode&&(!0!==this.appState.getIsUserActive()&&!h.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===J.FULL_SCREEN?this.facade.sendNotification(d.CHANGE_ACTIVE_STATE,sa.INACTIVE):this.start())};var F=function(a,b){this.direction=
null!=b?b:this.direction;F.__super__.constructor.call(this,null,null,a)};f(F,L);F.prototype.componentType="slider";F.prototype.trackView=null;F.prototype.handleView=null;F.prototype.valueView=null;F.prototype.startCapView=null;F.prototype.endCapView=null;F.prototype.min=0;F.prototype.max=1;F.prototype.value=0;F.prototype.dragging=!1;F.prototype.direction="vertical";F.prototype.pressHandler=null;F.prototype.releaseHandler=null;F.prototype.moveHandler=null;F.prototype.clickHandler=null;F.prototype.onRegister=
function(){F.__super__.onRegister.call(this);this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=this.create("track");this.valueView=this.create("value",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=k.create(this.handleView,k.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=k.create(window,k.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=k.create(window,k.MOVE,
this.updateHandler.bind(this));this.moveHandler.unbind();this.clickHandler=k.create(this.trackView,k.CLICK,this.updateHandler.bind(this))};F.prototype.setDirection=function(a){return this.direction=a};F.prototype.getDirection=function(){return this.direction};F.prototype.setValue=function(a){this.updateValue(a);return a};F.prototype.getValue=function(){return this.value};F.prototype.setDragging=function(a){if(a!==this.dragging)return this.dragging=a,this.sendNotification(d.IS_USER_ACTIVE,this.dragging),
this.dragging};F.prototype.getDragging=function(){return this.dragging};F.prototype.updateValue=function(a){var b;this.value=h.clamp(a,this.min,this.max);"vertical"===this.direction?(a="height",b="bottom"):(a="width",b="left");this.valueView.style[a]=this.handleView.style[b]=""+100*this.value+"%"};F.prototype.calculateValue=function(a){var b,c;"vertical"===this.getDirection()?(c=this.viewComponent.offsetHeight,b=h.getElementOffset(this.viewComponent).top+c,a=-(a.y-b)):(c=this.viewComponent.offsetWidth,
b=h.getElementOffset(this.viewComponent).left,a=a.x-b);return h.clamp(a/c,0,1)};F.prototype.handlePressHandler=function(a){this.moveHandler.bind();this.releaseHandler.bind();this.setDragging(!0);a.stopImmediatePropagation();return!1};F.prototype.handleReleaseHandler=function(a){this.moveHandler.unbind();this.releaseHandler.unbind();this.setDragging(!1);a.stopImmediatePropagation();return!1};F.prototype.updateHandler=function(a){a.stopImmediatePropagation();this.setValue(this.calculateValue({x:a.clientX||
a.targetTouches[0].screenX,y:a.clientY||a.targetTouches[0].screenY}));return!1};var pa={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"},Aa=function(a){Aa.__super__.constructor.call(this,null,null,a)};f(Aa,L);Aa.prototype.componentName="time-display";Aa.prototype.duration=null;Aa.prototype.currentTimeDisplay=null;Aa.prototype.separatorDisplay=null;Aa.prototype.durationDisplay=null;Aa.prototype.liveDisplay=
null;Aa.prototype.onRegister=function(){Aa.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",this.localizationManager.getString(s.MSG_LIVE));this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(s.MSG_TIME_SEPARATOR),this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};Aa.prototype.listNotificationInterests=function(){return[d.PLAY,
d.DURATION_CHANGE,d.ENDED,d.DISPLAY_TIME]};Aa.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAY:this.updateDuration();break;case d.DURATION_CHANGE:this.duration=a;this.updateCurrentTime();this.updateDuration();break;case d.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case d.DISPLAY_TIME:this.updateCurrentTime(a.currentTime,a.duration),this.updateDuration(a.duration)}};Aa.prototype.updateCurrentTime=function(a,b){null==a&&(a=
this.currentTime);null==b&&(b=this.duration);this.currentTimeDisplay.textContent=h.formatTimecode(a,b)};Aa.prototype.updateDuration=function(a){null==a&&(a=this.duration);this.durationDisplay.textContent=h.formatTimecode(a)};var va=function(a){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);va.__super__.constructor.call(this,null,null,a)};f(va,L);va.prototype.componentName="panels";va.prototype.activePanel=null;va.prototype.panels=null;va.prototype.closeHandler=null;va.prototype.listNotificationInterests=
function(){var a,b,c;c=[];for(a in pa)b=pa[a],c.push(b);return c.concat([])};va.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case pa.ADD_PANEL:this.addPanel(a);break;case pa.REMOVE_PANEL:this.removePanel(a);break;case pa.OPEN_PANEL:this.openPanel(a);break;case pa.CLOSE_PANEL:this.closePanel(a);break;case pa.CLOSE_ALL_PANELS:this.closeAllPanels(a);break;case pa.TOGGLE_PANEL:this.togglePanel(a)}};va.prototype.addPanel=function(a){this.panels.push(a);this.viewComponent.appendChild(a.getViewComponent())};
va.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1);this.viewComponent.removeChild(a.getViewComponent())};va.prototype.openPanel=function(a){a!==this.activePanel&&null!=a&&(this.closeAllPanels(),this.activePanel=a,this.activePanel.classList.add("active"),"desktop"!==h.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))};va.prototype.closePanel=function(a){a.classList.remove("active");null!=this.activePanel&&
(this.activePanel=null,"desktop"!==h.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))};va.prototype.togglePanel=function(a){a===this.activePanel?this.closePanel(a):this.openPanel(a)};va.prototype.closeAllPanels=function(){var a,b,c,e;e=this.panels;b=0;for(c=e.length;b<c;b++)a=e[b],this.closePanel(a)};va.prototype.mouseupHandler=function(a){var b,c;b=document.elementFromPoint(a.clientX,a.clientY);c=this.activePanel.getViewComponent();
a=this.activePanel.control.getViewComponent();b!==c&&!1===c.contains(b)&&b!==a&&!1===a.contains(b)&&this.closeAllPanels()};var S=function(a){S.__super__.constructor.call(this,a,"horizontal")};f(S,F);S.prototype.componentName="progress";S.prototype.bufferValue=null;S.prototype.scrubTime=null;S.prototype.scrubTimeSeparator=null;S.prototype.cuePoints=null;S.prototype.duration=0;S.prototype.isLive=!1;S.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null};
S.prototype.onRegister=function(){S.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",!1);this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView);this.scrubTime=this.create("scrub-time",this.trackView);this.thumbPreview=this.create("thumb-preview")};S.prototype.listNotificationInterests=function(){return[d.ENDED,d.MEDIA_CHANGE,
d.DURATION_CHANGE,d.PROGRESS,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISPLAY_TIME]};S.prototype.handleNotification=function(a){var b,c,e,m;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(a.metadata);break;case d.PROGRESS:a=h.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=a+"%";break;case d.DURATION_CHANGE:this.duration=a;break;case d.ENDED:this.updateValue(1);break;
case d.ADD_CUE_POINTS:if(null!=(null!=(c=this.facade.player.config)?null!=(e=c.controls)?e.displaySceneMarkers:void 0:void 0)&&!1===this.facade.player.config.controls.displaySceneMarkers)break;this.removeCuePoints();e=0;for(m=a.length;e<m;e++)b=a[e],0!==b&&-1!==b&&(c=this.create("cue-point",this.cuePoints),c.style.left=100*(b/this.duration)+"%");break;case d.REMOVE_CUE_POINTS:this.removeCuePoints();break;case d.DISPLAY_TIME:this.updateValue(a.currentTime/a.duration,a.duration)}};S.prototype.updatePreview=
function(a){var b=this;this.previewData.src=a.previewThumbnailSrc;this.previewData.previewHeight=a.previewThumbnailHeight;this.previewData.previewWidth=a.previewThumbnailWidth;this.previewData.count=a.previewThumbnailCount;a=new Image;this.previewData.src&&(a.src=this.previewData.src);k.create(a,"load",function(a){a.stopImmediatePropagation();b.previewData.imgWidth=a.target.width;b.previewData.imgHeight=a.target.height;return!1});this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+
this.previewData.src+")");this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=this.previewData.previewHeight+"px"};S.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")};S.prototype.setValue=function(a){S.__super__.setValue.call(this,a);this.sendNotification(M.SEEK,a*this.facade.player.retrieveProxy(n.NAME).getDuration())};S.prototype.updateValue=function(a,b){null==b&&(b=this.duration);!0===this.isLive&&(a=1);!0===isNaN(a)&&
(a=0);S.__super__.updateValue.call(this,a);!0===this.getDragging()&&(this.scrubTime.textContent=h.formatTimecode(this.value*b));this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%";this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(this.value*b/this.previewInterval);this.previewRow=Math.floor(this.previewImgIndex*this.previewData.previewWidth/this.previewData.imgWidth);this.xpos="-"+this.previewData.previewWidth*this.previewImgIndex+
"px ";this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ";this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos;this.thumbPreview.style.left=""+(100*this.value-18).toFixed(2)+"%"};S.prototype.handlePressHandler=function(a){S.__super__.handlePressHandler.call(this,a);this.classList.add("scrubbing")};S.prototype.handleReleaseHandler=function(a){S.__super__.handleReleaseHandler.call(this,a);this.classList.remove("scrubbing")};var Dc=function(a){Dc.__super__.constructor.call(this,
null,a)};f(Dc,Ia);Dc.prototype.componentName="play-pause";Dc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1};var Sa=function(){Sa.__super__.constructor.call(this)};f(Sa,Ea);Sa.prototype.componentName="controls";Sa.prototype.activeControlPanel=null;Sa.prototype.controlBar=null;Sa.prototype.panels=null;Sa.prototype.onRegister=function(){Sa.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.controlBar=
this.create("control-bar");this.facade.registerMediator(new va(this.viewComponent));this.facade.registerMediator(new Dc(this.controlBar));this.facade.registerMediator(new Aa(this.controlBar));this.facade.registerMediator(new S(this.controlBar));this.create("separator",this.controlBar)};Sa.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE]};Sa.prototype.handleNotification=function(a){var b,c;b=a.getName();a=a.getBody();
switch(b){case d.READY:!1!==(null!=(c=a.fullscreen)?c.enabled:void 0)&&this.facade.registerMediator(new ob(this.controlBar));break;case d.ADD_CONTROL_STATE:this.classList.add(a);break;case d.REMOVE_CONTROL_STATE:this.classList.remove(a);break;case d.ADD_CONTROL:this.controlBar.appendChild(a);break;case d.REMOVE_CONTROL:this.controlBar.removeChild(a)}};var y=function(){};y.create=function(a,b,c){var e,d;"string"===typeof a&&(a=document.getElementById(a));if(null==a)throw Error("[AMP ERROR] Invalid container. Could not find DOM element with id: "+
a);null==b&&(b={});null!=y.defaults.data&&(b=h.override(y.defaults.data,b));!0===/amp\-debug\=true/.test(location.search.toLowerCase())&&(b.debug=!0);N.enable(b.debug);d=this.getVersion();b.mode=h.getPlaybackMode(b.mode);null==b.version&&(b.version=d);null==a.dataset&&(a.dataset={});a.dataset["amp.version"]=d;N.log("[AMP]",d);switch(b.mode){case "html":e=new u(a);break;case "flash":e=new p(a);break;case "external":e=new E(a);break;case "none":e=new ae(a)}e.onready=c;e.initialize(b);return a.amp=e};
y.getVersion=function(){return this.VERSION};y.VERSION="AMP v4.21.0.0003";y.defaults=new Z;y.plugins=[];y.loadDefaults=function(a,b,c,e){null==e&&(e=!1);null!=b&&this.defaults.addEventListener("load",b);null!=c&&this.defaults.addEventListener("error",c);this.defaults.load(a,e)};y.getPlaybackMode=function(){return h.getPlaybackMode()};y.registerPlugin=function(a,b,c){var e;null==(e=this.plugins)[a]&&(e[a]={});this.plugins[a][b]=c};y.resourceManager=null;y.getResourceManager=function(){null==this.resourceManager&&
(this.resourceManager=new Xb);return this.resourceManager};y.addResource=function(a,b){return this.getResourceManager().add(a,b)};y.addResources=function(a,b){return this.getResourceManager().addResources(a,b)};y.getResource=function(a){return this.getResourceManager().item(a)};y.removeResource=function(a){return this.getResourceManager().remove(a)};var Ec=function(){return Ec.__super__.constructor.apply(this,arguments)};f(Ec,Q);Ec.NAME="PlayOverlayWrapper";Ec.prototype.createFlashVars=function(a){a.show_play_button_overlay=
null!=this.config.enabled?this.config.enabled:!0;return a};y.registerPlugin("playoverlay","flash",Ec);var Fc=function(){Fc.__super__.constructor.call(this)};f(Fc,ia);Fc.prototype.componentName="play";Fc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1};var ka=function(){ka.__super__.constructor.call(this)};f(ka,Y);ka.prototype.moduleName="controls";ka.prototype.createFramework=function(){!0===this.config["native"]?(this.player.getMediaElement().controls=
!0,this.player.sendNotification(d.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(d.MEDIA_VALIDATED,vd),this.registerCommand("adsbreakstart",td),this.registerCommand("adsbreakend",ud),this.registerCommand(d.STARTED,wd),this.createView=function(){}):ka.__super__.createFramework.call(this)};ka.prototype.applyClickHandler=function(a){null==a&&(a=!0);this.player.getMediaElement().onclick=a?this.clickHandler.bind(this):null};ka.prototype.clickHandler=function(a){this.sendNotification(M.TOGGLE_PLAY_PAUSE,
!0)};ka.prototype.createController=function(){this.registerCommand(d.PLAY,qd);this.registerCommand(d.PAUSE,rd);this.registerCommand(d.ACTIVE_STATE_CHANGE,sd)};ka.prototype.createModel=function(){this.proxy=new R(this.config);this.registerProxy(this.proxy)};ka.prototype.createView=function(){this.registerMediator(new Sa)};ka.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in pa)b=pa[a],c.push(b);return c.concat([d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ENDED,
d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN,d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.ACTIVE_STATE_CHANGE,d.PLAY,d.PAUSE,"adsbreakstart","adsbreakend",d.CHANGE_MEDIA,d.DISPLAY_TIME,d.MEDIA_VALIDATED,d.STARTED])};ka.prototype.listNotificationPublications=function(){return ka.__super__.listNotificationPublications.call(this).concat([d.CHANGE_ACTIVE_STATE,d.TOGGLE_FULL_SCREEN,M.SEEK,d.TOGGLE_ACTIVE,M.TOGGLE_PLAY_PAUSE])};ka.prototype.setMode=
function(a){this.proxy.setMode(a);return a};ka.prototype.getMode=function(){return this.proxy.getMode()};ka.prototype.setAutoHide=function(a){this.proxy.setAutoHide(a);return a};ka.prototype.getAutoHide=function(){return this.proxy.getAutoHide()};y.registerPlugin("controls","html",ka);y.registerPlugin("controls","flash",za);y.registerPlugin("controls","external",ka);var W=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=e?e:null;W.__super__.constructor.call(this)};
f(W,Ha);W.prototype.timeout=null;W.prototype.interval=null;W.prototype.url=null;W.prototype.lastModified=null;W.prototype.contentLenght=null;W.prototype.data=null;W.prototype.text=null;W.prototype.type=null;W.prototype.headers=null;W.prototype.useHeadRequest=!0;W.prototype.xhr=null;W.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};W.prototype.poll=function(){var a,b=this;a=h.getXHR();this.useHeadRequest?(a.onload=function(c){var e;304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),
c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",h.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};W.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};W.prototype.updateData=
function(){var a,b=this;a=h.getXHR();a.open("GET",h.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=function(a){b.error(a)};this.applyHeaders();return a.send()};W.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===h.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};W.prototype.setData=function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new $("datachanged",this.data)));return a};
W.prototype.error=function(a){N.error(event);this.stop()};W.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},this.interval)};W.prototype.stop=function(){clearTimeout(this.timeout)};var hc=function(){return hc.__super__.constructor.apply(this,arguments)};f(hc,Q);hc.NAME="EventManagementWrapper";hc.prototype.createFlashVars=function(a){null!=this.config.enabled&&(a.eventmanagementstates_enabled=this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=
this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};hc.prototype.createXML=function(a){var b,c,e,d,g,f,h;b=a.firstChild;c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);h=this.config.states;g=0;for(f=h.length;g<f;g++)d=h[g],c=a.createElement("state"),b.appendChild(c),e=a.createElement("property"),
e.setAttribute("key","ID"),e.appendChild(aa.createTextContent(a,d.id)),c.appendChild(e),e=a.createElement("property"),e.setAttribute("key","POSTER_SRC"),e.appendChild(aa.createTextContent(a,d.poster)),c.appendChild(e),null!=d.url&&(e=a.createElement("property"),e.setAttribute("key","URL"),e.appendChild(aa.createTextContent(a,d.url)),c.appendChild(e));return a};var yb=function(){yb.__super__.constructor.call(this)};f(yb,ia);yb.prototype.componentName="event-management";yb.prototype.poster=null;yb.prototype.onRegister=
function(){this.classList.add("hidden");this.poster=this.create("event-poster",!1,"img");yb.__super__.onRegister.call(this)};yb.prototype.listNotificationInterests=function(){return["eventStateChanged"]};yb.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),"on"!==a.id?(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),this.classList.remove("hidden"),this.sendNotification(d.PAUSE),this.sendNotification(d.CHANGE_DISPLAY_STATE,
J.NORMAL)):(this.viewComponent.contains(this.poster)&&this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var xd=function(){xd.__super__.constructor.call(this)};f(xd,puremvc.SimpleCommand);xd.prototype.execute=function(a){var b;(null!=(b=this.facade.retrieveProxy(ma.NAME).getState())?b.id:void 0)!==ma.ON.id&&this.sendNotification(d.PAUSE)};var ma=function(a){var b=this;ma.__super__.constructor.call(this,a);this.poller=new W;this.poller.ondatachanged=function(a){var e,d,g,f;
a=a.detail;if("on"===a)e=ma.ON;else for(f=b.data.states,d=0,g=f.length;d<g&&(e=f[d],e.id!==a);d++);if(null!=e)return b.setState(e)}};f(ma,B);ma.NAME=B.NAME;ma.ON={id:"on"};ma.prototype.defaults={url:null,interval:null,states:null,enabled:!1};ma.prototype.poller=null;ma.prototype.state=null;ma.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),this.setInterval(this.data.interval),this.poller.start())};ma.prototype.setURL=function(a){return this.data.url=this.poller.url=
a};ma.prototype.getURL=function(){return this.data.url};ma.prototype.getInterval=function(){return this.data.interval};ma.prototype.setInterval=function(a){this.data.interval=this.poller.interval=1E3*a;return a};ma.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",a);return a};ma.prototype.getState=function(){return this.state};var zb=function(){zb.__super__.constructor.call(this)};f(zb,Y);zb.prototype.moduleName="playoverlay";zb.prototype.createModel=function(){};
zb.prototype.createView=function(){this.registerMediator(new Fc)};zb.prototype.listNotificationPublications=function(){return zb.__super__.listNotificationPublications.call(this).concat([M.TOGGLE_PLAY_PAUSE])};y.registerPlugin("playoverlay","html",zb);y.registerPlugin("playoverlay","external",zb);var Ib=function(){Ib.__super__.constructor.call(this)};f(Ib,puremvc.SimpleCommand);Ib.prototype.applicationState=null;Ib.prototype.media=null;Ib.prototype.player=null;Ib.prototype.initializeNotifier=function(a){Ib.__super__.initializeNotifier.call(this,
a);a=this.facade.player||this.facade;this.applicationState=a.retrieveProxy(v.NAME);this.media=a.retrieveProxy(n.NAME);this.player=a};var $a=function(){$a.__super__.constructor.call(this)};f($a,Ib);$a.prototype.ads=null;$a.prototype.initializeNotifier=function(a){$a.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(B.NAME)};var Ab=function(){Ab.__super__.constructor.call(this)};f(Ab,puremvc.MacroCommand);Ab.prototype.ads=null;Ab.prototype.initializeNotifier=function(a){Ab.__super__.initializeNotifier.call(this,
a);this.ads=this.facade.retrieveProxy(A.NAME)};Ab.prototype.initializeMacroCommand=function(){this.addSubCommand(Yb)};Ab.prototype.execute=function(a){Ab.__super__.execute.call(this,a);!1===this.facade.player.retrieveProxy(l.NAME).initialized&&this.facade.player.sendNotification(d.INITIALIZED);this.ads.start();this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING)};var ga=function(){ga.__super__.constructor.call(this)};f(ga,puremvc.SimpleCommand);ga.prototype.config=null;ga.prototype.plugin=
null;ga.prototype.initializeNotifier=function(a){ga.__super__.initializeNotifier.call(this,a);return this.config=this.plugin=this.facade.retrieveProxy(B.NAME)};var yd=function(){yd.__super__.constructor.call(this)};f(yd,puremvc.SimpleCommand);yd.prototype.execute=function(a){this.facade.player.getMediaElement().dataset.isad=!0};var zd=function(){zd.__super__.constructor.call(this)};f(zd,puremvc.SimpleCommand);zd.prototype.execute=function(a){this.facade.player.getMediaElement().dataset.isad=!1};var Ad=
function(){Ad.__super__.constructor.call(this)};f(Ad,puremvc.SimpleCommand);Ad.prototype.execute=function(a){var b,c;try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",e)}};var Bd=function(){Bd.__super__.constructor.call(this)};f(Bd,ga);Bd.prototype.execute=function(a){try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
b)}};var Cd=function(){Cd.__super__.constructor.call(this)};f(Cd,ga);Cd.prototype.execute=function(a){a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));try{25<=a&&25>this.config.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>this.config.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&
75>this.config.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.config.percent=a};var Dd=function(){Dd.__super__.constructor.call(this)};f(Dd,puremvc.SimpleCommand);Dd.prototype.execute=function(a){try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
b)}this.facade.player.getMediaElement().dataset.isad=!0};var Ed=function(){Ed.__super__.constructor.call(this)};f(Ed,ga);Ed.prototype.execute=function(a){a=a.getBody();this.config.setDimensions(a)};var Fd=function(){Fd.__super__.constructor.call(this)};f(Fd,ga);Fd.prototype.execute=function(a){this.config.updatedMedia(a.getBody())};var Gd=function(){Gd.__super__.constructor.call(this)};f(Gd,ga);Gd.prototype.execute=function(a){a=a.getBody();this.config.setMedia(a)};var Gc=function(){Gc.__super__.constructor.call(this)};
f(Gc,$a);Gc.prototype.execute=function(a){!1===this.ads.getStarted()?this.sendNotification(d.START,!0):(this.ads.play(),this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING))};var Hc=function(){Hc.__super__.constructor.call(this)};f(Hc,$a);Hc.prototype.execute=function(a){this.ads.pause();this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PAUSED)};var Hd=function(){Hd.__super__.constructor.call(this)};f(Hd,$a);Hd.prototype.execute=function(a){a=this.ads.getPaused()||!1===this.ads.getStarted()?
d.PLAY:d.PAUSE;this.sendNotification(a,!0)};var Id=function(){Id.__super__.constructor.call(this)};f(Id,$a);Id.prototype.execute=function(a){this.ads.setVolume(a.getBody())};var Jd=function(){Jd.__super__.constructor.call(this)};f(Jd,$a);Jd.prototype.execute=function(a){this.ads.contentEnded()};var Kd=function(){Kd.__super__.constructor.call(this)};f(Kd,$a);Kd.prototype.execute=function(a){this.ads.contentStarted()};var ab=function(a,b){ab.__super__.constructor.call(this,a,b)};f(ab,Q);ab.NAME="MediaAnalyticsWrapper";
ab.prototype.listNotificationInterests=function(){return ab.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};ab.prototype.createFlashVars=function(a){var b,c,e,d;b=null!=(e=this.player.config)?null!=(d=e.media)?d.mediaanalytics:void 0:void 0;if(null!=b)for(c in b)e=b[c],a["report_"+c]=e;return a};ab.prototype.createXML=function(a){var b,c,e,d,g;b=a.firstChild;e=a.getElementsByTagName("metrics")[0];null==e&&(e=a.createElement("metrics"),b.appendChild(e));
b=a.createElement("vendor");b.setAttribute("id","akamai");e.appendChild(b);null!=this.config.config&&(e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_BEACON"),e.appendChild(aa.createTextContent(a,this.config.config)),b.appendChild(e),g=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),e.appendChild(aa.createTextContent(a,g)),b.appendChild(e));
if(null!=this.config.dimensions)for(d in c=a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),g=this.config.dimensions,g)b=g[d],e=a.createElement("property"),e.setAttribute("key",d),e.appendChild(aa.createTextContent(a,b)),c.appendChild(e);return a};ab.prototype.handleNotification=function(a){var b,c,e;ab.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case d.MEDIA_CHANGE:if(null!=(null!=(e=a.mediaanalytics)?e.dimensions:void 0))for(b in a.dimensions=
[],e=a.mediaanalytics.dimensions,e)c=e[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};ab.prototype.setDimensions=function(a){this.player.mediaElement.setPlayerProperty("maDimensions",a);return a};var Ja=function(a,b,c,e,d,g,f,h,k,l,n){this.id=a;this.title=b;this.duration=c;this.position=e;this.type=d;this.partner=g;this.advertiser=f;this.companions=h;this.request=k;this.metadata=l;this.totalAds=n};Ja.prototype.id=null;Ja.prototype.title=null;
Ja.prototype.duration=NaN;Ja.prototype.position=NaN;Ja.prototype.totalAds=NaN;Ja.prototype.type=null;Ja.prototype.partner=null;Ja.prototype.advertiser=null;Ja.prototype.companions=null;Ja.prototype.metadata=null;Ja.prototype.request=null;Ja.prototype.error=null;var Ba=function(a){Ba.__super__.constructor.call(this,a)};f(Ba,da);Ba.prototype.configurationName="imaoverlay";Ba.NAME="IMAOveralyProxy";Ba.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30};Ba.prototype.durationTimer=null;
Ba.prototype.intervalTimer=null;Ba.prototype.delayTimer=null;Ba.prototype.stop=function(){clearTimeout(this.durationTimer);clearTimeout(this.delayTimer);clearTimeout(this.intervalTimer)};Ba.prototype.play=function(){var a=this;this.stop();this.delayTimer=setTimeout(function(){return a.requestAd()},1E3*this.value.delay)};Ba.prototype.requestAd=function(){var a;a=this.getValue("adTagUrl");null!=a&&(a=a.replace("[timestamp]",(new Date).getTime()),a=a.replace("__random-number__",(new Date).getTime()));
h.get(a,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)};Ba.prototype.vastLoadHandler=function(a){var b,c,e,d,g;a=a.target.responseXML;if(null!=a)try{b=a.querySelector("NonLinear"),null!=b?(g=null!=a.querySelector("Impression")?a.querySelector("Impression").textContent:"",e=null!=a.querySelector("Tracking[event\x3dcreativeView]")?a.querySelector("Tracking[event\x3dcreativeView]").textContent:"",c=null!=b.querySelector("NonLinearClickThrough")?b.querySelector("NonLinearClickThrough").textContent:
"",d={src:b.querySelector("StaticResource").textContent,width:b.getAttribute("width"),height:b.getAttribute("height"),tracking:[g,e],href:c},this.displayAd(d)):this.error("No overlay was returned")}catch(f){this.error(f)}};Ba.prototype.error=function(a){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",a);this.stop()};Ba.prototype.displayAd=function(a){var b=this;this.sendNotification("ima/addOverlay",a);this.durationTimer=setTimeout(function(){b.sendNotification("ima/removeOverlay");return b.intervalTimer=
setTimeout(function(){return b.requestAd()},1E3*b.value.interval)},1E3*this.value.duration)};var A=function(a){A.__super__.constructor.call(this,a)};f(A,ea);A.NAME=ea.NAME;A.prototype.inprogress=!1;A.prototype.paused=!1;A.prototype.started=!1;A.prototype.adVO=null;A.prototype.contextName="ad";A.prototype.getContextData=function(){return this.adVO||{}};A.prototype.setCompanions=function(a){this.adVO.companions=a;this.sendNotification("adscompanion",this.adVO);return a};A.prototype.getCompanions=function(){var a;
return null!=(a=this.adVO)?a.companions:void 0};A.prototype.getInProgress=function(){return this.inprogress};A.prototype.setInProgress=function(a){return this.inprogress=a};A.prototype.getStarted=function(){return this.started};A.prototype.setStarted=function(a){return this.started=a};A.prototype.getPaused=function(){return this.paused};A.prototype.setPaused=function(a){return this.paused=a};A.prototype.play=function(){this.setPaused(!1);this.sendNotification("adsplay",this.adVO)};A.prototype.pause=
function(){this.setPaused(!0);this.sendNotification("adspause",this.adVO)};A.prototype.breakStart=function(){};A.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};A.prototype.error=function(a,b){var c;null==b&&(b=!0);c=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+c+" Skipping ad content.",a);null==this.adVO&&(this.adVO={});this.adVO.error=a;this.sendNotification("adserror",this.adVO);!0===b&&this.sendNotification("adsbreakend")};
A.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())};A.prototype.engageAds=function(){this.facade.player.removeCommand(d.START);this.facade.player.removeCommand(d.PLAY);this.facade.player.removeCommand(d.PAUSE);this.facade.player.removeCommand(d.ENDED);this.facade.player.removeCommand(M.PLAY);this.facade.player.removeCommand(M.PAUSE);this.facade.player.removeCommand(M.TOGGLE_PLAY_PAUSE);
this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(d.CHANGE_DURATION);this.facade.removeCommand(d.STARTED);this.facade.removeCommand(d.ENDED);this.facade.registerCommand(d.START,Ab);this.facade.registerCommand(d.PLAY,Gc);this.facade.registerCommand(d.PAUSE,Hc);this.facade.registerCommand(M.PLAY,Gc);this.facade.registerCommand(M.PAUSE,Hc);this.facade.registerCommand(M.TOGGLE_PLAY_PAUSE,Hd);this.facade.registerCommand(d.VOLUME_CHANGE,Id)};A.prototype.reset=function(){this.facade.removeCommand(d.START);
this.facade.removeCommand(d.PLAY);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(M.PLAY);this.facade.removeCommand(M.PAUSE);this.facade.removeCommand(M.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(d.VOLUME_CHANGE);this.facade.player.registerCommand(d.START,rc);this.facade.player.registerCommand(d.PLAY,Cb);this.facade.player.registerCommand(d.PAUSE,Zb);this.facade.player.registerCommand(d.ENDED,qc);this.facade.player.registerCommand(M.PLAY,Cb);this.facade.player.registerCommand(M.PAUSE,
Zb);this.facade.player.registerCommand(M.TOGGLE_PLAY_PAUSE,nc);this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(d.CHANGE_DURATION,yc);this.facade.registerCommand(d.STARTED,Kd);this.facade.registerCommand(d.ENDED,Jd)};A.prototype.start=function(){if(!1===this.getEnabled())return this.sendNotification("adsbreakend"),!1;this.setStarted(!0);return!0};A.prototype.contentPlay=function(){this.facade.player.sendNotification(d.PLAY,!0)};A.prototype.contentPause=function(){this.facade.player.mediaElement.pause()};
A.prototype.contentStarted=function(){};A.prototype.contentSeek=function(a){};A.prototype.contentEnded=function(){};A.prototype.setVolume=function(a){};A.prototype.getVolume=function(){};A.prototype.terminateAd=function(){};A.prototype.terminateAllAds=function(){};var r=function(a){r.__super__.constructor.call(this,a);this.intervals=[];this.loadedmetadata=this.onLoadedMetadata.bind(this)};f(r,A);r.NAME=A.NAME;r.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,
companions:null};r.prototype.key="ima";r.prototype.intervals=null;r.prototype.adDisplayContainer=null;r.prototype.adDisplayContainerInitialized=!1;r.prototype.adsLoader=null;r.prototype.adsRenderingSettings=null;r.prototype.adsManagerLoaded=!1;r.prototype.adsManager=null;r.prototype.cuepoints=null;r.prototype.adLoaded=!1;r.prototype.playWhenLoaded=!1;r.prototype.contentHasEnded=!1;r.prototype.adTagUrl=null;r.prototype.viewMode=null;r.prototype.playbackCore=null;r.prototype.loadedmetadata=null;r.prototype.setEnabled=
function(a){var b;r.__super__.setEnabled.call(this,a);!1===a&&(null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy(),this.getInProgress()&&this.contentPlay());return a};r.prototype.onLoadedMetadata=function(a){a.target.removeEventListener("loadedmetadata",this.loadedmetadata);this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};r.prototype.initialize=function(){this.facade.player.getViewComponent().addEventListener("resize",this.resize.bind(this))};r.prototype.ready=function(){this.viewMode=
google.ima.ViewMode.NORMAL;this.facade.player.getViewComponent().addEventListener("resize",this.resize.bind(this));null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed);this.adDisplayContainer=this.createPlugin();this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsRenderingSettings=new google.ima.AdsRenderingSettings;this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),
!1);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)};r.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)};r.prototype.engage=function(a){var b;!1!==this.getEnabled()&&(r.__super__.engage.call(this),!0===this.adsManagerLoaded&&!1===this.contentHasEnded&&null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy(),this.playWhenLoaded=this.adsManagerLoaded=this.contentHasEnded=
this.adsManagerLoaded=!1)};r.prototype.setVolume=function(a){var b;null!=(b=this.adsManager)&&b.setVolume(a);return a};r.prototype.getVolume=function(){var a;return null!=(a=this.adsManager)?a.getVolume():void 0};r.prototype.requestAd=function(){var a,b,c,e,d,g;this.sendNotification("adsrequest",this.adVO);e=this.facade.player.getViewComponent().clientWidth;c=this.facade.player.getViewComponent().clientHeight;a=new google.ima.AdsRequest;this.adTagUrl=this.getValue("adTagUrl");b=this.getValue("adsResponse");
null!=b&&""!==b?a.adsResponse=h.read(b,null,h.mimeTypes.txt):a.adTagUrl=this.adTagUrl;if(null==a.adsResponse&&null==a.adTagUrl)this.onAdError("No valid adTagUrl or adsResponse provided.");else a.linearAdSlotWidth=e,a.linearAdSlotHeight=c,a.nonLinearAdSlotWidth=(null!=(d=this.value.overlay)?d.width:void 0)||e,a.nonLinearAdSlotHeight=(null!=(g=this.value.overlay)?g.height:void 0)||c,b=this.adsLoader.getSettings(),null!=this.config.ppid&&b.setPpid(this.getValue("ppid")),this.adsLoader.requestAds(a)};
r.prototype.requestOverlay=function(){var a,b;b=this.value.overlay;null!=b&&(a=new google.ima.AdsRequest,a.adTagUrl=b.adTagUrl,a.nonLinearAdSlotWidth=b.width||300,a.nonLinearAdSlotHeight=b.height||50,this.adsLoader.requestAds(a))};r.prototype.start=function(){var a;this.playbackCore=this.facade.player.retrieveProxy(O.NAME).getActivePlaybackCore();a=this.facade.player.getMediaElement();this.playbackCore.setEnabled(!1);a.src=this.playbackCore.getSrc();a.addEventListener("loadedmetadata",this.loadedmetadata);
a.load();if(!1===r.__super__.start.call(this))return!1;!0!==this.adDisplayContainerInitialized&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0);!0===this.canPlay()?this.startAd():(this.playWhenLoaded=!0,this.requestAd())};r.prototype.canPlay=function(){return!0===this.adsManagerLoaded};r.prototype.startAd=function(){var a;this.playWhenLoaded=!1;try{a=this.facade.player.retrieveProxy(l.NAME).getVolume(),this.setVolume(a),null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),
this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(b){this.error(b)}};r.prototype.resize=function(a){var b;null!=a&&(this.viewMode=a===J.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL);null!=(b=this.adsManager)&&b.resize(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode)};r.prototype.onAdsManagerLoaded=
function(a){var b;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate");this.adsRenderingSettings.autoAlign=!0;this.adsRenderingSettings.useStyledNonLinearAds=!0;null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy();this.adsManager=a.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings);this.adsManagerLoaded=!0;this.cuePoints=this.adsManager.getCuePoints();this.facade.player.sendNotification(d.ADD_CUE_POINTS,this.cuePoints);a=this.onAdEvent.bind(this);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,
this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUME,
this.onAdResumed.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,a);!0===
this.facade.player.getConfig().debug&&this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,a);this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};r.prototype.onAdClick=function(a){!1===(null!=a?a.getAd().isLinear():void 0)?this.facade.player.sendNotification(d.PAUSE):this.getPaused()||this.pause()};r.prototype.onAdPaused=function(a){this.setPaused(!0);this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PAUSED);this.facade.player.sendNotification(d.CHANGE_ACTIVE_STATE,sa.ACTIVE);
this.facade.player.sendNotification("adspaused",this.adVO)};r.prototype.onAdResumed=function(a){this.setPaused(!1);this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING)};r.prototype.onAdEvent=function(a){var b,c,e,f,g,h,k;b=a.getAd();null!=this.adVO&&(null!=b&&(b.wrapperAdIds="function"===typeof b.getWrapperAdIds?b.getWrapperAdIds():void 0,b.wrapperAdSystems="function"===typeof b.getWrapperAdSystems?b.getWrapperAdSystems():void 0),this.adVO.metadata=b);switch(a.type){case google.ima.AdEvent.Type.LOADED:b.isLinear()?
(a=b.getAdPodInfo().getPodIndex(),c=0===a?"preroll":-1===a?"postroll":"midroll",this.adVO=new Ja(b.getAdId(),b.getAdId(),b.getDuration(),a,c,"ima",null,null,this.adTagUrl,b,b.getAdPodInfo().getTotalAds()),this.sendNotification("adsloaded",this.adVO),this.sendNotification("adsdurationchange",this.adVO),"midroll"!==c&&"postroll"!==c||this.engageAds()):(this.facade.player.sendNotification(d.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:b.isLinear()&&
(this.setInProgress(!0),this.adVO.position=b.getAdPodInfo().getAdPosition(),this.sendNotification("adsstarted",this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),300)),this.facade.player.sendNotification(d.CHANGE_PLAY_STATE,D.PLAYING),this.sendNotification("adsplay",this.adVO));try{e=[];f=("function"===typeof this.getConfigurationData?null!=(k=this.getConfigurationData())?k.companions:void 0:void 0)||[];g=0;for(h=f.length;g<h;g++)c=f[g],e=e.concat(b.getCompanionAds(c.width,
c.height));0<(null!=e?e.length:void 0)&&this.setCompanions(e)}catch(l){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",l)}break;case google.ima.AdEvent.Type.COMPLETE:b.isLinear()&&this.sendNotification("adsended",this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification("adsfirstquartile",this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification("adsmidpoint",this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification("adsthirdquartile",
this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification("adslog",this.adVO)}};r.prototype.onAdTimeUpdate=function(a){this.sendNotification("adstimeremaining",this.adsManager.getRemainingTime())};r.prototype.onAdError=function(a){a=(null!=a?a.getError():void 0)||a;this.error(a);this.contentPlay()};r.prototype.play=function(){var a;r.__super__.play.call(this);try{null!=(a=this.adsManager)&&a.resume(),this.sendNotification("adsresume")}catch(b){this.facade.logger.error("[AMP IMA ERROR]",
"resume",b)}};r.prototype.pause=function(){r.__super__.pause.call(this);try{this.adsManager.pause()}catch(a){this.facade.logger.error("[AMP IMA ERROR]","pause",a)}};r.prototype.breakEnd=function(){var a,b;b=this.intervals;a=0;for(b=b.length;a<b;a++)clearInterval(this.intervals.pop());r.__super__.breakEnd.call(this);a=this.facade.retrieveProxy(Ba.NAME);null!=a&&a.play()};r.prototype.setCompanions=function(a){var b,c,e,d,g;c=[];e=0;for(d=a.length;e<d;e++)b=a[e],c.push({data:b.getContent(),type:null!=
(g=b.getContentType())?g.toLowerCase():void 0,width:b.getWidth(),height:b.getHeight(),metadata:b});r.__super__.setCompanions.call(this,c);return a};r.prototype.contentPause=function(){this.sendNotification(d.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);r.__super__.contentPause.call(this);this.sendNotification("adsbreakstart",this.adVO)};r.prototype.contentPlay=function(){var a,b;this.sendNotification(d.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);this.sendNotification("adsbreakend",
this.adVO);"midroll"===(null!=(a=this.adVO)?a.type:void 0)&&"desktop"===h.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()));"postroll"===(null!=(b=this.adVO)?b.type:void 0)?this.facade.player.sendNotification(d.ENDED):r.__super__.contentPlay.call(this)};r.prototype.contentEnded=function(){var a;this.contentHasEnded=!0;try{null!=(a=this.adsLoader)&&"function"===typeof a.contentComplete&&a.contentComplete()}catch(b){this.facade.logger.error("[AMP IMA ERROR]",
"contentComplete",b)}};r.prototype.terminateAd=function(){var a;try{null!=(a=this.adsManager)&&a.stop()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",b)}this.breakEnd();this.contentPlay()};r.prototype.terminateAllAds=function(){var a;try{null!=(a=this.adsManager)&&a.destroy()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",b)}this.breakEnd();this.contentPlay()};var Ta=function(a){Ta.__super__.constructor.call(this,a)};f(Ta,ea);Ta.NAME=B.NAME;Ta.prototype.defaults=
{config:null,dimensions:null};Ta.prototype.ready=function(){try{window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",a)}};Ta.prototype.setDimensions=function(a){var b,c,e;b=this.configurationData.source.dimensions;for(c in a)e=a[c],null!=e&&(b[c]=e);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};Ta.prototype.applyDimensions=function(a){var b,c;if(null!=
window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",e)}};Ta.prototype.setMedia=function(a){var b,c;b=null!=(null!=(c=a.mediaanalytics)?c.dimensions:void 0)?h.override(this.value.dimensions,a.mediaanalytics.dimensions):this.value.dimensions;this.applyDimensions(b);return a};Ta.prototype.udpateMedia=function(a){"function"===typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(a);
return a};var Ld=function(){Ld.__super__.constructor.call(this)};f(Ld,puremvc.SimpleCommand);Ld.prototype.execute=function(a){this.facade.retrieveProxy(Ta.NAME).ready()};var bb=function(){bb.__super__.constructor.call(this)};f(bb,Y);bb.prototype.moduleName="eventmanagement";bb.prototype.createModel=function(){this.registerProxy(new ma(this.config))};bb.prototype.createController=function(){this.registerCommand(d.PLAY,xd)};bb.prototype.createView=function(){this.registerMediator(new yb)};bb.prototype.listNotificationInterests=
function(){return[d.PLAY]};bb.prototype.listNotificationPublications=function(){return bb.__super__.listNotificationPublications.call(this).concat([d.CHANGE_DISPLAY_STATE,d.PAUSE,"eventStateChanged"])};bb.prototype.listNotificationEvents=function(){return["eventStateChanged"]};y.registerPlugin("eventmanagement","html",bb);y.registerPlugin("eventmanagement","flash",hc);var Bb=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};Bb.prototype.id=null;Bb.prototype.startTime=null;Bb.prototype.endTime=
null;Bb.prototype.text=null;Bb.prototype.html=null;Bb.prototype.align=null;var be=function(){};be.prototype.parse=function(a,b){var c,e,d,g,f,k,l,n,p;b=b.replace(/\r/g,"");e=b.split("\n\n");n=0;for(p=e.length;n<p;n++){c=e[n];c=c.split("\n");try{g=c[0],l=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),f=h.flattenTimecode(l[0]),d=h.flattenTimecode(l[1]),k=c.slice(2)}catch(q){N.warn("SRT Parsing Warning")}c=new Bb(f,d,"cue_"+g);c.html="\x3cp\x3e"+k.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=
k.join("\n");a.cues.push(c)}return a};var $d=function(){};$d.prototype.parse=function(a,b){var c,e;"string"===typeof b&&(b=aa.parse(b));Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===a.prefix)return d+=h.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,
c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var f;d=b.getAttribute("begin");b.removeAttribute("begin");null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(f=c[e+1].getAttribute("begin"));e=new Bb(h.flattenTimecode(d),
h.flattenTimecode(f),"cue_"+e);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(e.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"));b=aa.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var pb=function(){pb.__super__.constructor.call(this)};
f(pb,Y);pb.prototype.moduleName="mediaanalytics";pb.prototype.initialize=function(a,b){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=a.config;pb.__super__.initialize.call(this,a,b)};pb.prototype.createModel=function(){this.proxy=new Ta(this.config);this.registerProxy(this.proxy)};pb.prototype.createController=function(){this.registerCommand(d.READY,Ld);this.registerCommand(d.MEDIA_CHANGE,Gd);this.registerCommand("adsbreakstart",yd);this.registerCommand("adsbreakend",zd);this.registerCommand("adsloaded",
Ad);this.registerCommand("adsstarted",Bd);this.registerCommand("adstimeupdate",Cd);this.registerCommand("adsended",Dd);this.registerCommand("mediaanalytics:setDimensions",Ed);this.registerCommand(d.CONTENT_CHANGED,Fd)};pb.prototype.listNotificationInterests=function(){return[d.READY,d.MEDIA_CHANGE,"adsbreakstart","adsbreakend","adsloaded","adsstarted","adstimeupdate","adsended","mediaanalytics:setDimensions",d.CONTENT_CHANGED]};pb.prototype.setDimensions=function(a){this.retrieveProxy(Ta.NAME).setDimensions(a);
return a};y.registerPlugin("mediaanalytics","html",pb);y.registerPlugin("mediaanalytics","flash",ab);var qa=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);b.poll()};null==window.com&&(window.com=a);qa.__super__.constructor.call(this,
this.constructor.NAME)};f(qa,puremvc.Proxy);qa.NAME="LiveCaptionProxy";qa.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};qa.prototype.caption=null;qa.prototype.head=null;qa.prototype.script=null;qa.prototype.timeout=null;qa.prototype.getURL=function(){return this.data.url};qa.prototype.setURL=function(a){return this.data.url=a};qa.prototype.start=function(){this.send()};qa.prototype.poll=function(){var a=this;setTimeout(function(){a.send()},this.data.interval||
1E3)};qa.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=h.loadScript(this.data.base+this.data.url+".js?nocache\x3d"+Date.now())};qa.prototype.stop=function(){clearTimeout(timeout)};qa.prototype.parse=function(a){var b,c,e,d;if(a.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=new Bb(h.flattenTimecode(a.From),h.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=
d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(w.CUE_CHANGE,[this.caption]);return this.caption}};CaptionParsers={"application/ttml+xml":new $d,"application/x-subrip":new be,undefined:new $d};var Md=function(){Md.__super__.constructor.call(this)};f(Md,puremvc.SimpleCommand);Md.prototype.execute=function(a){var b,c,e,d,g,f;d=a.getBody();b=this.facade.retrieveProxy(P.NAME).getTrack();if(null!=b){a=b.activeCues;
e=b.cues;b=!1;g=0;for(f=e.length;g<f;g++)c=e[g],d>=c.startTime&&d<c.endTime?0<=Oc.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(w.CUE_CHANGE,a)}};var Nd=function(){Nd.__super__.constructor.call(this)};f(Nd,puremvc.SimpleCommand);Nd.prototype.execute=function(a){var b;a=a.getBody();b=this.facade.retrieveProxy(P.NAME);null!=a.track&&b.setTracks(a.track);null!=a.track&&this.sendNotification(w.ENABLED,!0)};var Od=function(){Od.__super__.constructor.call(this)};
f(Od,puremvc.SimpleCommand);Od.prototype.execute=function(a){this.facade.retrieveProxy(P.NAME).setHidden(!a.getBody())};var Pd=function(){Pd.__super__.constructor.call(this)};f(Pd,puremvc.SimpleCommand);Pd.prototype.execute=function(a){var b,c;a=this.facade.retrieveProxy(P.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(qa.NAME),null==a&&(a=new qa,
this.facade.registerProxy(a)),a.setURL(b.src),a.start())};var Ka=function(a,b){Ka.__super__.constructor.call(this,a,b)};f(Ka,Q);Ka.NAME="CaptioningWrapper";Ka.prototype.hidden=!0;Ka.prototype.createXML=function(a){var b,c,e,d;e=null!=(d=this.config.flash)?d.subply:void 0;if(null!=e)try{null!=e.timeMethod&&(c=a.getElementsByTagName("player")[0],c.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=a.firstChild,e=a.getElementsByTagName("subply")[0],null==e&&(e=a.createElement("subply"),
b.appendChild(e)),this.createProperty(a,"SUBPLY_URL",this.config.flash.subply.plugin,e))}catch(g){this.facade.logger.error("[AMP CAPTIONING ERROR]",g)}};Ka.prototype.createFlashVars=function(a){var b,c,e,d,g,f;e=this.player.config;if(null!=(null!=(b=e.media)?b.track:void 0)){d=h.selectTrack(e.media.track,"captions");null!=d.src&&""!==d.src&&(a.caption_url=d.src);if(1<e.media.track.length){c=[];b=[];f=e.media.track;e=0;for(g=f.length;e<g;e++)d=f[e],c.push(d.src),b.push(d.srclang);a.caption_url=c.join(",");
a.caption_language=b.join(",")}a.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml"}};Ka.prototype.listNotificationInterests=function(){return Ka.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIA_CHANGE,"mediaPlayerCaptioningRequest","mediaPlayerCaptionLangChange"])};Ka.prototype.handleNotification=function(a){var b,c,e;Ka.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case "mediaPlayerCaptionLangChange":e="";break;
case "mediaPlayerCaptioningRequest":e="visibilitychange";a=a.enabled;this.hidden=!a;break;case d.MEDIA_CHANGE:b=a,null!=b.track&&(c=h.selectTrack(b.track,"captions"),null!=(null!=c?c.src:void 0)&&""!==c.src&&(b.captioningUrl=c.src),b.captioningType=c.type||"application/ttml+xml")}null!=e&&""!==e&&this.dispatchEvent(new $(e,a))};Ka.prototype.getHidden=function(){return this.hidden};Ka.prototype.setHidden=function(a){this.hidden=a;this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!a});
return a};y.registerPlugin("captioning","flash",Ka);var qb=function(a,b){var c,e=this;this.kind=a.kind;this.type=a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=h.get(this.src,{onload:function(){try{CaptionParsers[e.type].parse(e,c.response)}catch(a){N.error("Could not parse caption track: "+
e.src);return}"function"===typeof b&&b()},onerror:function(){N.error("Could not load caption track: "+e.src)}})};qb.prototype.kind=null;qb.prototype.src=null;qb.prototype.language=null;qb.prototype.cues=null;qb.prototype.label=null;qb.prototype.activeCues=null;qb.prototype.type=null;qb.prototype.styles=null;qb.prototype.isLive=!1;var w={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",
SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},P=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];P.__super__.constructor.call(this,a)};f(P,ea);P.NAME=B.NAME;P.prototype.defaults={};P.prototype.hidden=!0;P.prototype.tracks=null;P.prototype.track=null;P.prototype.activeCaptions=null;P.prototype.captions=null;P.prototype.loaded=!0;P.prototype.useNative=function(){var a;return null!=
this.facade.player.mediaElement.textTracks&&3===(null!=(a=window.TextTrackCue)?a.length:void 0)};P.prototype.getTracks=function(){return this.tracks};P.prototype.setTracks=function(a){var b,c,e,d,g,f,h=this;this.tracks=[];this.track=null;b=a.length;e=0;d=function(){e++;e===b&&(h.sendNotification(w.TRACKS_LOADED,h.tracks),h.autoSelectTrack())};g=0;for(f=a.length;g<f;g++)c=a[g],c=new qb(c,d),this.tracks.push(c);return a};P.prototype.getTrack=function(){return this.track};P.prototype.setTrack=function(a){this.track=
a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(w.TRACK_SELECTED,this.track);return a};P.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};P.prototype.selectTrackByLanguage=function(a){var b,c,e,d,g;g=this.tracks;e=0;for(d=g.length;e<d;e++)if(b=g[e],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};P.prototype.getHidden=function(){return this.hidden};P.prototype.setHidden=function(a){return this.hidden=
a};P.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.player.retrieveProxy(T.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var K=function(a){K.__super__.constructor.call(this,null,null,a,null)};f(K,L);K.prototype.componentName="captioning-settings";K.prototype.captioningObject={"default":{fontFamily:"Arial,sans-serif",size:"1.3em",scroll:"popout",fontColor:"rgba(255,255,255,1)",
edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",
edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};K.prototype.captionText=
null;K.prototype.settingsUiVisible=!1;K.prototype.captionningStyle=null;K.prototype.swatchColorCurr=null;K.prototype.swatchOpacityCurr=null;K.prototype.colorPicker=null;K.prototype.colorPickerOpacity=null;K.prototype.advancedSettingContainer=null;K.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};K.prototype.picker={color:null,background:null,edge:null,window:null};K.prototype.toggle={ON:null,OFF:null,disabled:!1};K.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],
speed:10,popout:null,rollup:null,painton:null};K.prototype.onRegister=function(){var a,b,c,e,d,g=this;this.captionText=this.create("caption-text",this.viewComponent.parentElement);c=this.create("captioning-titlebar");this.create("captioning-title",c,"span",this.localizationManager.getString(s.MSG_CC_TITLE));this.toggle.OFF=this.create("captioning-toggle-btn",c,"div","OFF");this.toggle.ON=this.create("captioning-toggle-btn",c,"div","ON");k.create(this.toggle.ON,k.CLICK,function(a){a.stopImmediatePropagation();
g.toggle.disabled||g.toggleButtonHandler(!0);return!1});this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF);k.create(this.toggle.OFF,k.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!1);return!1});c=this.create("captioning-row");this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",c,"select");this.languageListPopulate();k.create(this.list.language,
"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;g.sendNotification(w.VISIBILITY_CHANGE,b);b&&g.facade.setTrack(g.facade.selectTrackByIndex(a.target.selectedIndex));return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_PRESETS));a=this.create(["captioning-preset","captioning-preset1"],c,null,"Aa");b=this.create(["captioning-preset","captioning-preset2"],c,null,"Aa");d=this.create(["captioning-preset","captioning-preset3"],
c,null,"Aa");c=this.create(["captioning-preset","captioning-preset4"],c,null,"Aa");k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset1);g.applyCaptioningStyle();return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset2);g.applyCaptioningStyle();return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=
g.cloneObject(g.captioningObject.preset3);g.applyCaptioningStyle();return!1});k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset4);g.applyCaptioningStyle();return!1});this.advancedSettingContainer=this.create("captioning-advanced-container");c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_FONT));this.list.font=this.create("captioning-dropdown",
c,"select");this.create(null,this.list.font,"option","Arial").value="Arial,sans-serif";this.create(null,this.list.font,"option","Times New Roman");this.create(null,this.list.font,"option","Courier");this.create(null,this.list.font,"option","Georgia");this.create(null,this.list.font,"option","Helvetica");this.create(null,this.list.font,"option","Verdana");this.create(null,this.list.font,"option","Impact");this.create(null,this.list.font,"option","Comic Sans Serif");this.create(null,this.list.font,
"option","Times New Roman");k.create(this.list.font,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.fontFamily=a.target.value;g.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",c,"select");this.create(null,this.list.edge,"option","none").value="none";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";
this.create(null,this.list.edge,"option","Left drop shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Right drop shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px";k.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.edgeType=a.target.value;g.applyCaptioningStyle(!1);
return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",c,"select");this.create(null,this.list.size,"option","Small").value=".8em";this.create(null,this.list.size,"option","Medium").value="1.3em";this.create(null,this.list.size,"option","Large").value="2.3em";this.list.size.selectedIndex=1;k.create(this.list.size,"change",function(a){a.stopImmediatePropagation();
g.captioningObject.selected.size=a.target.value;g.applyCaptioningStyle(!1);return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(s.MSG_CC_SCROLL));this.list.scroll=this.create("captioning-dropdown",c,"select");this.create(null,this.list.scroll,"option","Pop out").value="popout";this.create(null,this.list.scroll,"option","Roll on").value="rollon";this.create(null,this.list.scroll,"option","Paint on").value="painton";k.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();
g.scroll.type=a.target.value;"painton"===a.target.value?g.captionText.classList.add("akamai-captioning-typed"):g.captionText.classList.remove("akamai-captioning-typed");return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",c,"span",this.localizationManager.getString(s.MSG_CC_COLOR));this.picker.color=this.create("captioning-color-picker",c);this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor;k.create(this.picker.color,
k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="152px",g.colorPicker.name="fontColor",g.captioningObject.instance=g.picker.color,-1!==g.picker.color.style.backgroundColor.indexOf("rgba")&&(b=g.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=
null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(s.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",c);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;k.create(this.picker.background,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=
g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="264px",g.colorPicker.name="backgroundColor",g.captioningObject.instance=g.picker.background,-1!==g.picker.background.style.backgroundColor.indexOf("rgba")&&(b=g.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(s.MSG_CC_EDGE));this.picker.edge=this.create("captioning-color-picker",
c);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;k.create(this.picker.edge,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="212px",g.colorPicker.name="edgeColor",g.captioningObject.instance=g.picker.edge,-1!==g.picker.edge.style.backgroundColor.indexOf("rgba")&&
(b=g.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(s.MSG_CC_WINDOW));this.picker.window=this.create("captioning-color-picker",c);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;k.create(this.picker.window,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===
g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="300px",g.colorPicker.name="windowColor",g.captioningObject.instance=g.picker.window,-1!==g.picker.window.style.backgroundColor.indexOf("rgba")&&(b=g.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c=this.create(["caption-text","caption-text-preview"]);
this.create(null,c,"p","Lorem ipsum dolor sit amet");c=this.create("captioning-footer-container");a=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(s.MSG_CC_APPLY));b=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(s.MSG_CC_CANCEL));d=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(s.MSG_CC_RESET));0<=this.facade.getViewComponent().clientWidth&&(c=this.create("captioning-advanced-button",c,"div",
this.localizationManager.getString(s.MSG_CC_SHOW_ADVANCED)),k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();"block"===g.advancedSettingContainer.style.display?(a.target.innerHTML=g.localizationManager.getString(s.MSG_CC_SHOW_ADVANCED),g.advancedSettingContainer.style.display="none",g.colorPicker.style.display="none"):(a.target.innerHTML=g.localizationManager.getString(s.MSG_CC_HIDE_ADVANCED),g.advancedSettingContainer.style.display="block");return!1}));k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();
try{localStorage.setItem(Mb.PREFIX+"captioningDefault",JSON.stringify(g.captioningObject.selected))}catch(b){g.facade.logger.error("LocalStorage Not Supported on this Browser",b)}g.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);g.applyCaptioningStyle(!1,!0);g.sendNotification(w.SETTINGS_CHANGE,g.captioningObject.selected);return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();g.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);return!1});k.create(d,
k.CLICK,function(a){a.stopImmediatePropagation();g.colorPicker.style.display="none";g.applyCaptioningStyle(!0);return!1});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";c="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);a=this.create("colorpicker-swatch",!1,null,"\x26nbsp;");b=0;for(d=c.length;b<d;b++)e=c[b],a.style.backgroundColor=e,e=a.cloneNode(),k.create(e,k.CLICK,function(a){a.stopImmediatePropagation();null!==g.swatchColorCurr&&(g.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");g.swatchColorCurr=a.target;g.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=
g.toRGBA(a.target.style.backgroundColor);g.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(e);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(s.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;k.create(this.colorPickerOpacity,"change",
function(a){a.stopImmediatePropagation();g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(g.captioningObject.instance.style.backgroundColor);g.applyCaptioningStyle(!1);return!1});this.swatchOpacityCurr=this.colorPickerOpacity;k.create(document,k.CLICK,function(a){a.stopImmediatePropagation();"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==
g.colorPicker.style.display&&(g.colorPicker.style.display="none");return!1});null!=localStorage.getItem(Mb.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Mb.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1)):(c=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),c||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(c));K.__super__.onRegister.call(this)};K.prototype.toRGBA=
function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};K.prototype.languageListPopulate=function(){var a,b,c,d;b=this.facade.getTracks();if(null!=b){this.list.language.innerHTML="";c=0;for(d=b.length;c<d;c++)a=b[c],a=a.language,a=this.facade.player.retrieveProxy(T.NAME).getLanguageString(a),null!=a&&""!==a&&this.create(null,this.list.language,"option",a);this.toggle.disabled=0===this.list.language.childElementCount;this.toggle.disabled&&
this.create(null,this.list.language,"option","None")}};K.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};K.prototype.applyCaptioningStyle=function(a,b){var c,d,f,g,h,k;null==a&&(a=!1);null==b&&(b=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"none",this.list.size.value=
this.captioningObject["default"].size,this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=
this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&
(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));g="font-family: "+(a?this.captioningObject["default"].fontFamily:this.list.font.value)+" !important;";f=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;";h="font-size: "+
(a?this.captioningObject["default"].size:this.list.size.value)+" !important;";d="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;";c="background-color: "+(a?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;";k="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;";this.captionningStyle.innerHTML=b?this.captioningObject.appliedStyleText=
".akamai-caption-text { "+g+h+f+k+" }.akamai-caption-text p { "+d+c+" }":this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+g+h+f+k+" }.akamai-caption-text-preview p { "+d+c+" }"};K.prototype.toggleButtonHandler=function(a){null==a&&(a=!1);a?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",
this.toggle.ON));this.sendNotification(w.VISIBILITY_CHANGE,a);this.sendNotification("updatesettings",{captioning:{hidden:!a}})};K.prototype.getCaptionDisplayHeight=function(){var a,b,c;a=0;for(b=c=this.captionText.childNodes.length;b;){--b;if(3===c&&0===b)break;a+=h.getActualSize(this.captionText.childNodes[b]).height}return a+"px"};K.prototype.scrollCaptions=function(a,b,c){var d,f,g;null==a&&(a=this.captionText.scrollHeight);null==b&&(b=this.captionText.scrollTop);null==c&&(c=20);g=(a-b)/c;d=this.captionText;
f=function(){var c;if(b<a)return d.scrollTop=b+=g,setTimeout(f,20);for(c=[];2<d.childNodes.length;)c.push(d.removeChild(d.firstChild));return c};f()};K.prototype.listNotificationInterests=function(){return[w.CUE_CHANGE,w.SETTINGS_VISIBILITY_CHANGE,w.TOGGLE_SETTINGS_VISIBILITY,w.SETTINGS_CHANGE]};K.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case w.CUE_CHANGE:b="";c=0;for(f=a.length;c<f;c++)e=a[c],b+=e.html;switch(this.scroll.type){case "popout":this.captionText.innerHTML=
b;break;case "rollon":case "painton":a=document.createElement("div");a.innerHTML=b;e=a.childNodes;c=a=0;for(b=e.length;a<b;c=++a)c=e[c],this.captionText.appendChild(c);this.captionText.style.maxHeight=this.getCaptionDisplayHeight();this.scrollCaptions()}break;case w.SETTINGS_VISIBILITY_CHANGE:case w.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();
a=this.settingsUiVisible?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;this.sendNotification(a,"cc-setting-active");break;case w.SETTINGS_CHANGE:this.captioningObject.selected=a,this.applyCaptioningStyle(!1,!0)}};var rb=function(a){rb.__super__.constructor.call(this,rb.NAME,a)};f(rb,Nb);rb.NAME="CaptioningNativeMediator";rb.prototype.video=null;rb.prototype.index=-1;rb.prototype.plugin=null;rb.prototype.onRegister=function(){this.video=this.facade.player.mediaElement;this.plugin=this.facade.retrieveProxy(P.NAME)};
rb.prototype.listNotificationInterests=function(){return[w.VISIBILITY_CHANGE,w.TRACK_SELECTED,w.TRACKS_LOADED]};rb.prototype.handleNotification=function(a){var b,c,d,f,g,h,k,l;b=a.getBody();switch(a.getName()){case w.TRACKS_LOADED:f=0;for(h=b.length;f<h;f++)if(c=b[f],"captions"===c.kind||"subtitles"===c.kind)for(a=this.video.addTextTrack(c.kind,c.label,c.srclang),l=c.cues,g=0,k=l.length;g<k;g++)c=l[g],d=new TextTrackCue(c.startTime,c.endTime,c.text),c.id=c.id,a.addCue(d);break;case w.TRACK_SELECTED:-1<
this.index&&(this.video.textTracks[this.index].mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case w.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};var cb=function(){cb.__super__.constructor.call(this)};f(cb,ia);cb.prototype.initializeNotifier=function(a){cb.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(B.NAME);this.media=
this.facade.player.retrieveProxy(n.NAME)};cb.prototype.onRegister=function(){cb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};var sb=function(a){sb.__super__.constructor.call(this,a)};f(sb,cb);sb.prototype.componentName="captioning";sb.prototype.captionButton=null;sb.prototype.onRegister=function(){var a;a=new Ia(this.localizationManager.getString(s.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this));this.facade.registerMediator(a);this.captionButton=
a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.captionButton);sb.__super__.onRegister.call(this)};sb.prototype.onclick=function(a){var b;a.stopImmediatePropagation();"embedded"===(null!=(b=this.plugin.getTrack())?b.type:void 0)?this.sendNotification(w.VISIBILITY_CHANGE,this.plugin.getHidden()):a.currentTarget===this.captionButton&&this.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden());return!1};sb.prototype.listNotificationInterests=function(){return[w.VISIBILITY_CHANGE,
w.ENABLED,w.TRACK_SELECTED]};sb.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;switch(a.getName()){case w.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case w.VISIBILITY_CHANGE:e="cc-active";break;case w.ENABLED:c=b?d.ADD_CONTROL_STATE:d.REMOVE_CONTROL_STATE,e="cc-enabled"}this.sendNotification(c,e)};var db=function(){db.__super__.constructor.call(this)};f(db,Y);
db.NAME="Feature";db.prototype.featureName=null;db.prototype.getFeatureName=function(){return this.featureName};db.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification("registerfeature",this)};db.prototype.onRegister=function(){this.registerFeature();db.__super__.onRegister.call(this)};db.prototype.listNotificationPublications=function(){return db.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};var ic=function(){return ic.__super__.constructor.apply(this,
arguments)};f(ic,Q);ic.NAME="BrandingWrapper";ic.prototype.createFlashVars=function(a){null!=this.config.id&&(a.branding=this.config.id);return a};ic.prototype.createXML=function(a){var b,c,d,f,g,h,k,l;if(null!=(null!=(b=this.config)?b.logo:void 0)){b="background-image: url('"+this.config.logo+"');";f=a.getElementsByTagName("element");k=0;for(l=f.length;k<l;k++)d=f[k],g=d.getAttribute("id"),"logoOverlay"===g?h=d:"controls"===g&&(c=d);null==h?(h=a.createElement("element"),h.setAttribute("id","logoOverlay"),
h.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+b),c.appendChild(h)):(c=h.getAttribute("style"),c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,b):b+c,h.setAttribute("style",c))}return a};var eb=function(){eb.__super__.constructor.call(this)};f(eb,ia);eb.prototype.componentName="branding";eb.prototype.logo=null;eb.prototype.text=null;eb.prototype.container=null;eb.prototype.onRegister=function(){this.container=
this.create("branding-container");this.logo=this.create(["branding-image","hidden"],this.container,"img");this.text=this.create("branding-text",this.container);eb.__super__.onRegister.call(this)};eb.prototype.listNotificationInterests=function(){return[d.READY]};eb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:a=a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=a.logo,this.classList.remove("hidden",this.logo)):this.classList.add("hidden",this.logo);a=this.config.getDomain();
null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML="\x3cspan\x3e"+this.localizationManager.getString(s.MSG_VIEW_ALL)+'\x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+'"\x3e'+this.config.getDomain()+"\x3c/a\x3e "+this.localizationManager.getString(s.MSG_VIDEO)+".")}};var Ca=function(a){Ca.__super__.constructor.call(this,a)};f(Ca,B);Ca.NAME=B.NAME;Ca.prototype.defaults={id:null,title:null,link:null,logo:null,target:null};Ca.prototype.getID=function(){return this.data.id};
Ca.prototype.setID=function(a){return this.data.id=a};Ca.prototype.getTarget=function(){return this.data.target};Ca.prototype.setTarget=function(a){return this.data.target=a};Ca.prototype.getTitle=function(){return this.data.title};Ca.prototype.setTitle=function(a){return this.data.title=a};Ca.prototype.getLink=function(){return this.data.link};Ca.prototype.setLink=function(a){return this.data.link=a};Ca.prototype.getLogo=function(){return this.data.logo};Ca.prototype.setLogo=function(a){return this.data.logo=
a};var ca=function(){ca.__super__.constructor.call(this)};f(ca,db);ca.prototype.featureName="captioning";ca.prototype.moduleName="captioning";ca.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,Nd);this.registerCommand(d.STARTED,Pd);this.registerCommand(d.TIME_UPDATE,Md);this.registerCommand(w.VISIBILITY_CHANGE,Od)};ca.prototype.createModel=function(){this.proxy=new P(this.config);this.registerProxy(this.proxy)};ca.prototype.createView=function(){var a;a=new sb;this.registerMediator(a);
this.registerMediator(new K(a.viewComponent))};ca.prototype.createAPI=function(){return new CaptioningAPI(this)};ca.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,w.TOGGLE_SETTINGS_VISIBILITY]};ca.prototype.listNotificationPublications=function(){var a,b;return ca.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in w)b=w[a],b!==w.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,
"updatesettings",d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};ca.prototype.listNotificationEvents=function(){return[w.VISIBILITY_CHANGE,w.ENABLED]};ca.prototype.getHidden=function(){return this.proxy.getHidden()};ca.prototype.setHidden=function(a){this.sendNotification(w.VISIBILITY_CHANGE,!a);return a};ca.prototype.getTracks=function(){return this.proxy.getTracks()};ca.prototype.getTrack=function(){return this.proxy.getTrack()};ca.prototype.setTrack=function(a){this.proxy.setTrack(a);return a};ca.prototype.selectTrackByIndex=
function(a){return this.proxy.selectTrackByIndex(a)};ca.prototype.selectTrackByLanguage=function(a){return this.proxy.selectTrackByLanguage(a)};ca.prototype.changeSettings=function(a){this.sendNotification(w.SETTINGS_CHANGE,a);return a};y.registerPlugin("captioning","html",ca);var Ua=function(a){Ua.__super__.constructor.call(this,a)};f(Ua,B);Ua.NAME=B.NAME;Ua.prototype.defaults={url:null};Ua.prototype.hidden=!0;Ua.prototype.getURL=function(){return this.data.url};Ua.prototype.setURL=function(a){return this.data.url=
a};Ua.prototype.getHidden=function(){return this.hidden};Ua.prototype.setHidden=function(a){return this.hidden=a};Ua.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=h.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};var Qd=function(){Qd.__super__.constructor.call(this)};f(Qd,puremvc.SimpleCommand);Qd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(Ua.NAME);
b.setHidden(a.getBody());b.setURL(""+this.facade.player.getSrc());!1===a.getBody()&&b.invoke()};var wa=function(){wa.__super__.constructor.call(this)};f(wa,cb);wa.prototype.componentName="stats";wa.prototype.statsText=null;wa.prototype.statsButton=null;wa.prototype.bitrateText=null;wa.prototype.bitrateArr=null;wa.prototype.onRegister=function(){var a=this;this.sendNotification(d.ADD_CONTROL_STATE,"stats-enabled");this.classList.add("hidden");this.statsFormat=this.create("stats-text");this.statsBitRate=
this.create("stats-text");this.statsPlayBack=this.create("stats-text");this.statsAnalytics=this.create("stats-text");this.statsButton=this.create("stats-button",!1);this.statsButton.onclick=function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",!a.plugin.getHidden());return!1};this.sendNotification(d.ADD_CONTROL,this.statsButton);wa.__super__.onRegister.call(this)};wa.prototype.listNotificationInterests=function(){return["statsvisibilitychange","bitratesUpdate"]};wa.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eLoading...\x3c/p\x3e",this.renderStats());break;case "bitratesUpdate":null!=a?this.checkContentType(a):this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+
"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eNot Available\x3c/p\x3e"}};wa.prototype.renderStats=function(){var a,b,c,d,f,g,k,l;try{g=this.facade.player,c=void 0===g.getMedia()?"Not Available":g.getMedia().type,k=""===g.getSrc()||null===g.getSrc()?"Not Available":g.getSrc(),b=h.getDevice(),null==b&&(b=""),f=""!==this.facade.player.getConfig().mode&&null!==this.facade.player.getConfig().mode&&-1!==this.facade.player.getConfig().mode.indexOf("html")?this.facade.player.getVersion()+
", HTML5 Video: "+b:"Not Available",d=null!=(l=this.facade.player.retrieveProxy(O.NAME).getActivePlaybackCore())?l.proxyName.indexOf("dash"):void 0,-1<d&&(f+=", dash.js"),a=""===this.facade.player.getConfig().mediaanalytics.config||null===this.facade.player.getConfig().mediaanalytics.config?"Not Available":this.facade.player.getConfig().mediaanalytics.config,this.statsFormat.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eStream\x3c/b\x3e\x3c/p\x3e\x3cp\x3eFormat: "+
c+"\x3c/p\x3e\x3cp\x3eURL: "+k+"\x3c/p\x3e",this.statsPlayBack.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e\x3c/p\x3e"+f,this.statsAnalytics.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e\x3c/p\x3e"+a}catch(n){this.facade.logger.error("[AMP Stats Render Error]:",n)}};wa.prototype.checkContentType=function(a){var b,c,d,f=this;this.bitrateArr=[];if("object"===typeof a&&-1!==this.facade.player.getMedia().type.indexOf("dash"))h.get(a.URL,
{onload:function(a){var b,c,d,e;a=aa.parse(a.detail.responseText).querySelectorAll("AdaptationSet[mimeType*\x3d'video']")[0].querySelectorAll("Representation");d=0;for(e=a.length;d<e;d++)c=a[d],b=(parseInt(c.getAttribute("bandwidth"))/1E3).toFixed(0),c=c.getAttribute("width")+"x"+c.getAttribute("height"),f.bitrateArr.push({bitrate:b,res:c});return f.constructBitrateText(f.bitrateArr)},onerror:function(a){return f.facade.logger.error("[AMP Stats ERROR]",a)}});else{d=a.split("#");b=0;for(c=d.length;b<
c;b++)a=d[b],-1!==a.indexOf("BANDWIDTH")&&-1!==a.indexOf("RESOLUTION")&&this.bitrateArr.push(this.parseBitrate(a));this.constructBitrateText(this.bitrateArr)}};wa.prototype.constructBitrateText=function(a){var b,c,d,f;this.bitrateArr=a;this.bitrateText="";this.bitrateArr.sort(function(a,b){var c,d;c=parseInt(a.bitrate);d=parseInt(b.bitrate);return c<d?-1:c>d?1:0});f=this.bitrateArr;a=c=0;for(d=f.length;c<d;a=++c)b=f[a],this.bitrateText+="\x3cp\x3e"+(a+1)+". "+b.bitrate+" kbps "+b.res+"\x3c/p\x3e";
""===this.bitrateText&&(this.bitrateText="\x3cp\x3eNot Available\x3c/p\x3e");this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e"+this.bitrateText};wa.prototype.parseBitrate=function(a){var b,c,d;c=a.indexOf("BANDWIDTH");b=a.indexOf(",",c+10);b=a.slice(c+10,b);d=a.indexOf("RESOLUTION");c=a.indexOf(",",d+10);if(20<c-d||-1===c)c=a.indexOf("x",d+10)+4;a=a.slice(d+11,c);return{bitrate:parseInt(b)/1E3,res:a}};var ra=
function(a){ra.__super__.constructor.call(this,a.types);this.buffer=a.buffer};f(ra,Ra);ra.prototype.initialized=!0;ra.prototype.playbackCoreName="dash";ra.prototype.context=null;ra.prototype.player=null;ra.prototype.buffer=null;ra.prototype.isDVR=!1;ra.prototype.resumecomplete=function(){this.applyHandlers(!0);this.play()};ra.prototype.load=function(){var a,b=this;a=this.getMediaElement();a.addEventListener("loadedmetadata",this.resumeHandlers.canplay);this.context=new Dash.di.DashContext;this.player=
new MediaPlayer(this.context);null!=this.buffer&&(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=this.buffer);this.player.startup();this.player.addEventListener("error",this.onError.bind(this));this.player.debug.setLogToBrowserConsole(this.facade.logger.enabled);this.player.attachView(a);this.player.setAutoPlay(!1);this.player.attachSource(this.getSrc());this.isDVR="dvr"===this.facade.retrieveProxy(n.NAME).getTemporalType();!0===this.isDVR&&a.addEventListener("timeupdate",function(a){var e,
f;try{f=b.player.time(),e=b.player.duration(),b.sendNotification(d.DISPLAY_TIME,{value:f/e,currentTime:f,duration:e})}catch(g){b.facade.logger.error(g)}})};ra.prototype.seek=function(a){ra.__super__.seek.call(this,!0===this.isDVR?this.player.getDVRSeekOffset(a):a)};ra.prototype.getDuration=function(){return!0===this.isDVR?this.player.duration():ra.__super__.getDuration.call(this)};ra.prototype.getStats=function(){return{}};ra.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",
a)};var fb=function(){fb.__super__.constructor.call(this)};f(fb,Y);fb.NAME="BrandingPlugin";fb.prototype.moduleName="branding";fb.prototype.createModel=function(){this.registerProxy(new Ca(this.config))};fb.prototype.createView=function(){this.registerMediator(new eb)};fb.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(d.ADD_APPLICATION_STATE,"branding-"+this.config.id);fb.__super__.onRegister.call(this)};fb.prototype.listNotificationInterests=function(){return[d.READY]};
y.registerPlugin("branding","html",fb);y.registerPlugin("branding","flash",ic);y.registerPlugin("branding","external",fb);var Rd=function(){Rd.__super__.constructor.call(this)};f(Rd,puremvc.SimpleCommand);Rd.prototype.execute=function(a){var b,c,e,f,g=this;e=a.getBody();this.facade.retrieveProxy(l.NAME);a=this.facade.getMediaElement();null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(v.NAME),c.setDisplayState(e),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},
b.exit=function(){return document.cancelFullscreen()},b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",
b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===J.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,J.NORMAL)})):e===J.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new $("fullscreenchange",e===J.FULL_SCREEN)))};
var jc=function(a){jc.__super__.constructor.call(this,a)};f(jc,ea);jc.NAME=B.NAME;jc.prototype.defaults={types:["application/dash+xml"],buffer:null};jc.prototype.initialize=function(){var a,b;window.MediaSource=window.MediaSource||window.WebKitMediaSource;null!=window.MediaSource&&(this.sendNotification(d.INITIALIZED),a=new ra(this.getConfigurationData()),b=this.facade.player.retrieveProxy(O.NAME),b.registerPlaybackCore(a))};var z=function(a){var b,c,d;this.shim=a;z.__super__.constructor.call(this);
this.state=cast.receiver.media.PlayerState.IDLE;try{d=document.createElement("style"),d.type="text/css",d.appendChild(document.createTextNode("")),document.head.appendChild(d),c=d.sheet,b=c.insertRule(".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}",0),this.cssRule=c.rules[b]}catch(f){N.error(f)}};f(z,Ha);z.prototype.player=null;z.prototype.callbackMap=null;z.prototype.state=null;z.prototype.activeTrackId=null;z.prototype.cssRule=null;z.prototype.textTrackStyle=
null;z.prototype.ccHandler=null;z.prototype.feed=null;z.prototype.media=null;z.prototype.tracks=null;z.prototype.registerPlayer=function(a){var b,c,d=this;this.player=a;b=this.dispatchEvent.bind(this);["loadedmetadata","ended","error"].forEach(function(c){return a.addEventListener(c,b)});c=function(){d.player.removeEventListener("ready",c);d.applyMedia();d.applyFeed();d.applyClassName()};this.player.addEventListener("ready",c);this.player.addEventListener("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING));
this.player.addEventListener("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.player.addEventListener("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};z.prototype.setState=function(a){if(a!==this.state)return this.state=a,this.shim.mediaManager.broadcastStatus(!0),a};z.prototype.registerErrorCallback=function(a){this.onerror=a};z.prototype.registerEndedCallback=function(a){this.onended=a};z.prototype.registerLoadCallback=function(a){this.onloadedmetadata=
a};z.prototype.unregisterErrorCallback=function(){this.onerror=null};z.prototype.unregisterEndedCallback=function(){this.onended=null};z.prototype.unregisterLoadCallback=function(){this.onloadedmetadata=null};z.prototype.load=function(a,b,c,d){var f,g,h,k,l,n,p;g=this.shim.mediaManager.getMediaInformation();f=g.customData||{};k=g.metadata||{};null!=d?this.editTracksInfo(d):this.activeTrackId=null;if(null!=f.feed&&null!=(null!=(l=this.player)?l.feed:void 0))this.feed=f.feed,this.media=null,this.applyFeed();
else{this.feed=null;a={src:a,type:g.contentType,title:k.title,poster:null!=(n=k.images)?n.url:void 0,description:k.subtitle,pubDate:new Date(g.releaseDate),metadata:f,duration:g.duration,startTime:c||(null!=(p=f.media)?p.startTime:void 0),autoplay:b};if(null!=f.media)for(h in n=f.media,n)f=n[h],null==a[h]&&(a[h]=f);this.tracks=g.tracks;this.media=a;this.applyMedia()}};z.prototype.applyMedia=function(){null!=this.player&&null!=this.media&&(this.player.setMedia(this.media),this.setState(cast.receiver.media.PlayerState.BUFFERING))};
z.prototype.loadTracks=function(a,b){var c;this.player.removeEventListener("loadedmetadata",this.ccHandler);0<(null!=a?a.length:void 0)&&(c=this.getTrack(0),null!=c&&/ttml/.test(c.trackContentType))};z.prototype.applyFeed=function(){null!=this.player&&null!=this.feed&&(this.player.addEventListener("mediachange",this.mediachangeHandler.bind(this)),null!=feed.data?this.player.feed.setData(feed.data):null!=feed.url&&this.player.feed.setURL(feed.url))};z.prototype.mediachangeHandler=function(a){var b;
this.removeHandler("mediachange");a=this.player.getMedia();b=new cast.receiver.media.MediaInformation;b.contentId=a.src;b.contentType=a.type;b.customData=a.metadata;b.duration=a.duration;b.metadata={title:a.title,subtitle:a.description,images:[{url:a.poster}],releaseDate:a.pubDate.toISOString()};this.media=a;this.shim.mediaManager.setMediaInformation(b,!0)};z.prototype.reset=function(){};z.prototype.play=function(){this.player.play()};z.prototype.seek=function(a,b){this.player.setCurrentTime(a);switch(b){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();
break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};z.prototype.pause=function(){return this.player.pause()};z.prototype.getState=function(){return this.state};z.prototype.getCurrentTimeSec=function(){return null!=this.player?this.player.getCurrentTime():0};z.prototype.getDurationSec=function(){return null!=this.player?this.player.getDuration():0};z.prototype.getVolume=function(){var a;a=new cast.receiver.media.Volume;a.level=this.player.getVolume();a.muted=this.player.getMuted();
return a};z.prototype.setVolume=function(a){null!=a.level&&this.player.setVolume(a.level);!0===a.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1);return a};z.prototype.editTracksInfo=function(a){var b;null!=a.activeTrackIds&&(b=a.activeTrackIds[0],this.activeTrackId!==b&&(this.activeTrackId=b,this.applyClassName()));a=a.textTrackStyle;null!=a&&null!=this.cssRule&&(this.textTrackStyle=a,null!=a.foregroundColor&&(this.cssRule.style.color=this.hexToRgba(a.foregroundColor)),
null!=a.backgroundColor&&(this.cssRule.style.backgroundColor=this.hexToRgba(a.backgroundColor)),a.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS&&(this.cssRule.style.borderRadius=a.windowRoundedCornerRadius+"px"),null!=a.fontScale&&(this.cssRule.style.fontSize=a.fontScale+"em"),null!=a.fontFamily&&(this.cssRule.style.fontFamily=a.fontFamily))};z.prototype.applyClassName=function(a){null!=this.player&&(a=this.player.getMediaElement().classList,null!=this.activeTrackId?a.add("akamai-cc"):
a.remove("akamai-cc"))};z.prototype.hexToRgba=function(a){var b,c,d;if(!/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(a))return a;d=parseInt(a.substring(1,3),16);c=parseInt(a.substring(3,5),16);b=parseInt(a.substring(5,7),16);a=9===a.length?parseInt(a.substring(7,9),16)/256:1;return"rgba("+d+","+c+","+b+","+a+")"};z.prototype.getTrack=function(a){var b;null==a&&(a=this.activeTrackId);b=this.tracks.filter(function(b){return b.trackId===a})[0];null!=b&&null==b.trackContentType&&(b.trackContentType=cast.player.api.CaptionsType.CEA608);
return b};var ge=[h.mimeTypes.m3u8,h.mimeTypes.mp4,h.mimeTypes.mpd,h.mimeTypes.ism,h.mimeTypes.webm,h.mimeTypes.mp3],t=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";t.__super__.constructor.call(this,a.sender)};f(t,ea);t.NAME=B.NAME;t.prototype.defaults={applicationID:"CC1AD845"};t.prototype.session=null;t.prototype.media=null;t.prototype.messageBus=null;t.prototype.feed=null;t.prototype.currentTime=null;t.prototype.duration=null;t.prototype.receiverAvailable=!1;t.prototype.currentTime=
0;t.prototype.duration=0;t.prototype.playerState=null;t.prototype.displayTimeTimeout=null;t.prototype.initialize=function(){var a,b=this;"undefined"!==typeof chrome&&null!==chrome&&null!=(a=chrome.cast)&&a.isAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(a,d){!0===a?b.initializeCastApi():b.logError("cast load error",d)}};t.prototype.initializeCastApi=function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,
this.sessionListener.bind(this),this.receiverListener.bind(this),chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};t.prototype.onInitSuccess=function(a){this.logEvent("init success",a)};t.prototype.onInitError=function(a){this.logError("init error",a)};t.prototype.receiverListener=function(a){this.receiverAvailable="available"===a;this.sendNotification(gb.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+
(this.receiverAvailable?"found":"list empty"))};t.prototype.sessionListener=function(a){this.logEvent("session listener",a);if(0!==a.media.length)this.onMediaDiscovered(a.media[0]);else this.onRequestSessionSuccess(a)};t.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};t.prototype.send=function(a){this.session.sendMessage(this.messageBus,a,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};t.prototype.onLaunchError=
function(a){this.logError("launch error.",a)};t.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));a=this.facade.player.retrieveProxy(l.NAME);0===this.session.media.length&&this.loadMedia(a.getCurrentTime())};t.prototype.onUpdate=function(a){a||(this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"amp"}),this.stopDisplayTimeUpdate())};
t.prototype.onMessageSuccess=function(a){this.logEvent("message sent",a)};t.prototype.onMessageError=function(a){this.logError("message error",a)};t.prototype.onMessage=function(a,b){var c,e;b=JSON.parse(b);e=b.type;c=b.detail||{};switch(e){case "dispatchevent":e="player"===c.target?this.facade.player.parent:this.facade.player.parent[c.target],null!=e&&e.dispatchEvent(c.event)}this.sendNotification(d.DISPATCH_EVENT,{type:"message",message:b})};t.prototype.onStop=function(a){this.logEvent("stop");
this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};t.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};t.prototype.onStopError=function(a){this.logError("stop error",a)};t.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};t.prototype.logError=function(a,b){this.facade.logger.error("[AMP CHROMECAST ERROR] "+a,b)};t.prototype.getFeed=function(){return this.feed};t.prototype.setFeed=function(a){this.feed!==
a&&(this.feed=a,null!=this.session&&this.loadMedia())};t.prototype.loadMedia=function(a){var b,c,d,f,g;null==a&&(a=0);d=this.facade.player.retrieveProxy(n.NAME).getData();null!=d&&(b=function(a){return-1<ge.indexOf(a)?"maybe":""},f=h.selectSource(d.source,b),null!=f&&(b={media:d},c=null!=(g=this.facade.player.getModules())?g.feed:void 0,null!=c&&(b.feed={data:c.getData(),url:c.getURL()}),a=this.mediaToLoadRequest(d,f,a,b),this.session.loadMedia(a,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))))};
t.prototype.mediaToLoadRequest=function(a,b,c,d){var f,g,h;g=new chrome.cast.media.GenericMediaMetadata;g.title=a.title;g.subtitle=a.description;g.image=[new chrome.cast.Image(a.poster)];g.releaseDate=null!=(f=a.pubDate)?"function"===typeof f.toISOString?f.toISOString():void 0:void 0;b=new chrome.cast.media.MediaInfo(b.src,b.type);b.duration=a.duration;b.customData=d;b.metadata=g;if(0<(null!=(h=a.track)?h.length:void 0))for(b.tracks=[],h=a.track,f=d=0,g=h.length;d<g;f=++d)a=h[f],f=new chrome.cast.media.Track(f,
chrome.cast.media.TrackType.TEXT),f.subtype=chrome.cast.media.TextTrackType.CAPTIONS,f.name="Closed Captions",f.language=a.srclang,f.customData=a,f.trackContentId=a.src,f.trackContentType=a.type,b.tracks.push(f);b=new chrome.cast.media.LoadRequest(b);b.currentTime=c;return b};t.prototype.onMediaDiscovered=function(a){null!=this.media&&this.media.removeUpdateListener(this.mediaStatusUpdate);this.media=a;this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this);this.media.addUpdateListener(this.mediaStatusUpdate);
this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"chromecast"})};t.prototype.onMediaStatusUpdate=function(a){this.logEvent("mediastatusupdate",a);this.updatePlayerState(this.media.playerState);this.updateDisplayTime();!1===a&&this.stopDisplayTimeUpdate()};t.prototype.updatePlayerState=function(a){var b;if(a!==this.playerState){this.playerState=a;switch(this.playerState){case chrome.cast.media.PlayerState.BUFFERING:b=D.WAITING;break;case chrome.cast.media.PlayerState.PLAYING:b=D.PLAYING;break;
case chrome.cast.media.PlayerState.PAUSED:b=D.PAUSED}this.sendNotification(d.CHANGE_PLAY_STATE,b);this.playerState===chrome.cast.media.PlayerState.PLAYING?this.startDisplayTimeUpdate():this.stopDisplayTimeUpdate()}};t.prototype.startDisplayTimeUpdate=function(){this.stopDisplayTimeUpdate();this.displayTimeTimeout=setInterval(this.updateDisplayTime.bind(this),100)};t.prototype.stopDisplayTimeUpdate=function(){clearInterval(this.displayTimeTimeout);this.displayTimeTimeout=null};t.prototype.updateDisplayTime=
function(){var a,b,c;a=this.media.getEstimatedTime()||0;b=(null!=(c=this.media.media)?c.duration:void 0)||a;b!==this.duration?(this.duration=b,this.sendNotification(d.CHANGE_DURATION,this.duration)):a!==this.currentTime&&(this.currentTime=a,this.sendNotification(d.DISPLAY_TIME,{currentTime:this.currentTime,duration:this.duration}))};t.prototype.onMediaError=function(a){this.logError("media error",a);this.stopDisplayTimeUpdate()};t.prototype.play=function(){this.media.play()};t.prototype.pause=function(){this.media.pause()};
t.prototype.setCurrentTime=function(a){var b;b=new chrome.cast.media.SeekRequest;b.currentTime=a;this.media.seek(b)};t.prototype.getCurrentTime=function(){return this.currentTime};t.prototype.isReceiverAvailable=function(){return this.receiverAvailable};var Ic=function(){Ic.__super__.constructor.call(this)};f(Ic,ga);Ic.prototype.execute=function(a){this.config.launch()};var Sd=function(){Sd.__super__.constructor.call(this)};f(Sd,ga);Sd.prototype.execute=function(a){this.config.send({type:"captioning.visibilitychange",
detail:{visibility:a.getBody()}})};var Td=function(){Td.__super__.constructor.call(this)};f(Td,ga);Td.prototype.execute=function(a){this.config.send({type:"captioning.settingschange",detail:a.getBody()})};var Ud=function(){Ud.__super__.constructor.call(this)};f(Ud,ga);Ud.prototype.execute=function(a){this.facade.player.getViewComponent().hidden=!1;this.plugin.ready()};var la=function(a,b){this.receiver=b;la.__super__.constructor.call(this,a)};f(la,Ra);la.prototype.initialized=!0;la.prototype.player=
null;la.prototype.host=null;la.prototype.protocol=null;la.prototype.playbackCoreName="chromecast";la.prototype.manifest=null;la.prototype.xhr=null;la.prototype.trackInfo=null;la.prototype.receiver=null;la.prototype.reset=function(){la.__super__.reset.call(this);this.manifest=this.xhr=null};la.prototype.unload=function(){null!=this.player&&(this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle},this.receiver.chromecastPlayer.activeTrackId=
null,this.receiver.chromecastPlayer.textTrackStyle=null,this.player.unload(),this.player=null)};la.prototype.load=function(){var a=this;null!=this.xhr?null!=this.manifest&&this.loadMediaPlayer():(this.xhr=new XMLHttpRequest,this.xhr.onload=function(b){200===a.xhr.status&&(a.manifest=a.xhr.responseText,a.loadMediaPlayer())},this.xhr.onerror=function(b){a.facade.logger.error(b);a.player.unload()},this.xhr.open("GET",this.getSrc()),this.xhr.send())};la.prototype.loadMediaPlayer=function(){var a,b,c=
this;this.playWhenLoaded=this.data.loading=!0;this.unload();a=this.facade.getMediaElement();a.addEventListener("canplay",this.resumeHandlers.canplay);a.addEventListener("loadedmetadata",this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);null!=a.src&&(a.src=null);!0===N.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);this.host=new cast.player.api.Host({mediaElement:a,
url:this.getSrc()});this.host.updateManifestRequestInfo=function(a){a.url===c.getSrc()&&(a.skipRequest=!0,a.setResponse(c.manifest))};this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+a);c.player.unload()};a=this.facade.retrieveProxy(n.NAME).getType();b=h.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case b.ism:this.protocol=
cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};la.prototype.resumecomplete=function(){la.__super__.resumecomplete.call(this)};var Vd=function(){Vd.__super__.constructor.call(this)};f(Vd,ga);Vd.prototype.execute=function(a){this.facade.logger.debug("ChromeCastBreakStartCommand");a=this.facade.player.retrieveProxy(O.NAME).getActivePlaybackCore();
"chromecast"===a.getPlaybackCoreName()&&(a.unload(),a.src=null)};var Jc=function(){Jc.__super__.constructor.call(this)};f(Jc,cb);Jc.prototype.onRegister=function(){this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver");Jc.__super__.onRegister.call(this)};var hb=function(){hb.__super__.constructor.call(this)};f(hb,cb);hb.prototype.componentName="chromecast";hb.prototype.controls=null;hb.prototype.onRegister=function(){this.controls=new La;hb.__super__.onRegister.call(this)};hb.prototype.registerOverlay=
function(){};hb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_TARGET_CHANGE,d.CHANGE_PLAY_STATE]};hb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_TARGET_CHANGE:b=a.target;"chromecast"===b?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case d.CHANGE_PLAY_STATE:this.controls.setState(a)}};var tb=function(){tb.__super__.constructor.call(this)};f(tb,hb);tb.prototype.chromeCastButton=
null;tb.prototype.onRegister=function(){this.chromeCastButton=new kc;this.facade.registerMediator(this.chromeCastButton);tb.__super__.onRegister.call(this)};tb.prototype.listNotificationInterests=function(){return tb.__super__.listNotificationInterests.call(this).concat([gb.AVAILABILITY_CHANGE])};tb.prototype.handleNotification=function(a){var b;tb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case gb.AVAILABILITY_CHANGE:!0===a?(this.sendNotification(d.ADD_CONTROL_STATE,
"chromecast"),this.facade.player.sendNotification(d.ADD_CONTROL,this.chromeCastButton.getViewComponent())):(this.sendNotification(d.REMOVE_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(d.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}};var H=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";H.__super__.constructor.call(this,a.receiver)};f(H,ea);H.NAME=B.NAME;H.prototype.defaults={shim:null,types:["application/x-mpegURL","application/dash+xml",
"application/vnd.ms-sstr+xml"]};H.prototype.messageBus=null;H.prototype.castReceiverManager=null;H.prototype.castMessageBus=null;H.prototype.startTime=0;H.prototype.currentTime=0;H.prototype.boundHandler=null;H.prototype.amp=null;H.prototype.mediaManager=null;H.prototype.playbackCore=null;H.prototype.teardownTimeout=null;H.prototype.chromecastPlayer=null;H.prototype.initialize=function(){var a;H.__super__.initialize.call(this);this.sendNotification(d.INITIALIZED);a=new la(this.getConfigurationData().types,
this);this.facade.player.retrieveProxy(O.NAME).registerPlaybackCore(a)};H.prototype.ready=function(){!0===this.facade.logger.enabled&&cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG);this.shim=ub.getInstance();this.castReceiverManager=this.shim.castReceiverManager;this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);this.castReceiverManager.onSenderConnected=this.onSenderConnected.bind(this);
this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.player;this.chromecastPlayer=this.shim.player;this.chromecastPlayer.registerPlayer(this.amp);this.mediaManager=this.shim.mediaManager;this.castMessageBus=this.shim.castMessageBuses[this.messageBus];this.castMessageBus.onMessage=this.onMessage.bind(this);this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));this.amp.addEventListener("pause",
this.startTeardownTimeout.bind(this,1200));this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this));this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this));null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",this.dispatchEvent.bind(this,
"ads")),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads")));this.startTeardownTimeout(300)};H.prototype.logEvent=function(a,b){null==a?a=b.type||"":null==b&&(b=a.data,a=b.type);this.facade.logger.log("[CHROMECAST] ",a,b)};H.prototype.onSenderConnected=function(a){this.logEvent("senderconnected",a);setTimeout(this.sendNotification.bind(this,
d.DISPATCH_EVENT,new $("senderconnected",a)),0)};H.prototype.onSenderDisconnected=function(a){this.logEvent("sender disconnected",a);0===this.castReceiverManager.getSenders().length&&a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&this.teardown();setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new $("senderdisconnected",a)),0)};H.prototype.onMessage=function(a){var b,c,e,f,g;this.logEvent("message from sender",a);try{if(e=a.data||a.message,null!=e&&(g=e.type,b=e.detail,
"string"===typeof b&&(b=JSON.parse(b)),null!=b)){switch(g){case "captioning.visibilitychange":c=[];!0===b.visibility&&c.push(0);this.chromecastPlayer.editTracksInfo({activeTrackIds:c});break;case "captioning.settingschange":f=new cast.receiver.media.TextTrackStyle;f.foregroundColor=b.fontColor;f.backgroundColor=b.backgroundColor;f.fontScale=b.size;f.windowColor=b.windowColor;f.fontFamily=b.fontFamily;f.edgeColor=b.edgeColor;f.edgeType=b.edgeType;this.chromecastPlayer.editTracksInfo({textTrackStyle:f});
break;case "stats.visibilitychange":this.amp.stats.setHidden(!b.visibility)}this.sendNotification(d.DISPATCH_EVENT,a)}}catch(h){this.error(h)}};H.prototype.onClose=function(a){this.logEvent("message channel closed",a)};H.prototype.eventHandler=function(a){var b;b={type:a.type};null!=a.detail&&(b.detail=a.detail);this.send(b)};H.prototype.dispatchEvent=function(a,b){this.send({type:"dispatchevent",detail:{target:a,event:b}})};H.prototype.send=function(a){this.castMessageBus.broadcast(a)};H.prototype.startTeardownTimeout=
function(a){this.stopTeardownTimeout();this.teardownTimeout=setTimeout(this.teardown.bind(this),1E3*a)};H.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)};H.prototype.teardown=function(){window.close()};var Wd=function(){Wd.__super__.constructor.call(this)};f(Wd,ga);Wd.prototype.execute=function(a){this.config.setFeed(a.getBody())};var Kc=function(){Kc.__super__.constructor.call(this)};f(Kc,ga);Kc.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekCommand");
this.plugin.setCurrentTime(a.getBody())};var kc=function(){kc.__super__.constructor.call(this)};f(kc,Ia);kc.prototype.componentName="chromecast";kc.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(gb.LAUNCH);return!1};var Lc=function(){Lc.__super__.constructor.call(this)};f(Lc,ga);Lc.prototype.execute=function(a){switch(this.facade.player.retrieveProxy(v.NAME).getPlayState()){case D.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case D.PAUSED:case D.READY:this.plugin.play();
break;case D.PLAYING:case D.WAITING:this.plugin.pause()}};var La=function(){La.__super__.constructor.call(this)};f(La,Sa);La.prototype.componentName="chromecast-controls";La.prototype.message=null;La.prototype.messageContainer=null;La.prototype.button=null;La.prototype.captioningActive=!1;La.prototype.initializeNotifier=function(a){La.__super__.initializeNotifier.call(this,a);this.viewComponent.innerHTML="";this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",
this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=new kc};La.prototype.onRegister=function(){var a,b,c;this.facade.registerMediator(this.button);La.__super__.onRegister.call(this);a=new ob(this.controlBar);a.setDisabled(!0);this.facade.registerMediator(a);this.sendNotification(d.ADD_CONTROL,this.button.getViewComponent());this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||!0!==(null!=(b=this.facade.player.captioning)?null!=
(c=b.config)?c.enabled:void 0:void 0)||(a=new Ia(this.localizationManager.getString(s.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(a),this.captionButton=a.getViewComponent(),this.sendNotification(d.ADD_CONTROL,this.captionButton),this.sendNotification(d.ADD_CONTROL_STATE,"cc-enabled"))};La.prototype.captionButtonClick=function(){this.captioningActive=!this.captioningActive;try{this.facade.player.parent.chromecast.postMessage({type:"captioning.visibilitychange",
detail:{visibility:this.captioningActive}})}catch(a){this.facade.logger.error("[AMP Chromecast Captioning Error]",a)}this.sendNotification(this.captioningActive?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"cc-active")};var Sb=function(){Sb.__super__.constructor.call(this)};f(Sb,ga);Sb.prototype.execute=function(a){var b;a=a.getBody().target;"chromecast"===a?this.facade.player.pause():"amp"===a&&(a=this.plugin.getCurrentTime(),b=this.facade.player.getDuration(),0!==a&&(a!==b&&(this.seekedHandler=
this.seeked.bind(this),this.facade.player.addEventListener("seeked",this.seekedHandler)),this.facade.player.setCurrentTime(a)))};Sb.prototype.seeked=function(a){this.facade.player.removeEventListener("seeked",this.seekedHandler);this.facade.player.play()};Sb.prototype.seekedHandler=null;var I=function(){I.__super__.constructor.call(this)};f(I,Y);I.prototype.moduleName="chromecast";I.prototype.isAvailable=function(){return this.isSender()||this.isReceiver()};I.prototype.loadResources=function(){this.isAvailable()?
I.__super__.loadResources.call(this):this.resourcesLoaded()};I.prototype.onRegister=function(){this.isAvailable()?I.__super__.onRegister.call(this):this.sendNotification(xa.PLUGIN_REGISTERED,this)};I.prototype.createModel=function(){this.proxy=this.isSender()?new t(this.config):new H(this.config);this.registerProxy(this.proxy)};I.prototype.createController=function(){this.isSender()?(this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Sb),this.registerCommand(gb.LAUNCH,Ic),this.registerCommand(M.TOGGLE_PLAY_PAUSE,
Lc),this.registerCommand(M.SEEK,Kc),this.registerCommand(w.VISIBILITY_CHANGE,Sd),this.registerCommand(w.SETTINGS_CHANGE,Td)):this.isReceiver()&&(this.registerCommand(d.READY,Ud),this.registerCommand("adsbreakstart",Vd))};I.prototype.createView=function(){this.isSender()?this.registerMediator(new tb):this.isReceiver()&&this.registerMediator(new Jc)};I.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};I.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};
I.prototype.listNotificationInterests=function(){return[d.READY,w.VISIBILITY_CHANGE,w.SETTINGS_CHANGE,"adsbreakstart"]};I.prototype.listNotificationEvents=function(){return I.__super__.listNotificationEvents.call(this).concat([gb.AVAILABILITY_CHANGE])};I.prototype.listNotificationPublications=function(){return I.__super__.listNotificationPublications.apply(this,arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.PLAYBACK_TARGET_CHANGE,gb.AVAILABILITY_CHANGE,
d.MEDIA_CHANGE,d.CHANGE_PLAY_STATE,d.CHANGE_DURATION,d.DISPLAY_TIME])};I.prototype.play=function(){var a;"function"===typeof(a=this.proxy).play&&a.play()};I.prototype.pause=function(){var a;"function"===typeof(a=this.proxy).pause&&a.pause()};I.prototype.setCurrentTime=function(a){this.proxy.setCurrentTime(a);return a};I.prototype.isReceiverAvailable=function(){var a;return(null!=(a=this.proxy)?"function"===typeof a.isReceiverAvailable?a.isReceiverAvailable():void 0:void 0)||!1};I.prototype.getMedia=
function(){return this.proxy.media};I.prototype.getSession=function(){return this.proxy.session};I.prototype.getMediaManager=function(){return this.proxy.mediaManager};I.prototype.getCastReceiverManager=function(){return this.proxy.castReceiverManager};I.prototype.getCastMessageBus=function(){return this.proxy.castMessageBuses[this.proxy.messageBus]};I.prototype.postMessage=function(a){this.proxy.send(a)};y.registerPlugin("chromecast","html",I);var Jb=function(){Jb.__super__.constructor.call(this)};
f(Jb,I);Jb.NAME="ChromeCastFlashPlugin";Jb.prototype.createModel=function(){this.proxy=new t(this.config);this.registerProxy(this.proxy)};Jb.prototype.createController=function(){this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Sb);this.registerCommand(gb.LAUNCH,Ic);this.registerCommand("feedchanged",Wd);this.registerCommand(M.TOGGLE_PLAY_PAUSE,Lc);this.registerCommand(M.SEEK,Kc)};Jb.prototype.createView=function(){this.registerMediator(new hb)};Jb.prototype.listNotificationInterests=function(){return["feedchanged",
d.CHANGE_MEDIA]};var gb={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"},ha=function(a,b){ha.__super__.constructor.call(this,a,b);this.plugin=new Jb;this.plugin.initialize(b,this.player);a.registerModule(this.plugin)};f(ha,Q);ha.NAME="ChromeCastWrapper";ha.prototype.buttonId="chromecastBtn";ha.prototype.plugin=null;ha.prototype.createXML=function(a){if(!1===this.hasControls(a))return a;null==this.getControls(a)[this.buttonId]&&this.createElement(a,this.buttonId);return a};ha.prototype.listNotificationInterests=
function(){return ha.__super__.listNotificationInterests.call(this).concat(["mediaPlayerElementEvent","mediaLoadStateReady","mediaLoadStateLoading","mediaPlayerApplicationStateChange",gb.AVAILABILITY_CHANGE])};ha.prototype.handleNotification=function(a){var b,c;ha.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case "mediaPlayerElementEvent":"click"===a.type&&a.element===this.buttonId&&this.plugin.sendNotification(gb.LAUNCH);break;case gb.AVAILABILITY_CHANGE:null!=
(null!=(c=this.player.mediaElement)?c.setPlayerProperty:void 0)&&this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:a});break;case "mediaPlayerApplicationStateChange":case "mediaLoadStateReady":case "mediaLoadStateLoading":(b=this.plugin.isReceiverAvailable())&&this.player.mediaElement.setPlayerProperty(this.buttonId,{state:1}),this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:b})}};ha.prototype.play=function(){this.plugin.play()};ha.prototype.pause=function(){this.plugin.pause()};
ha.prototype.setCurrentTime=function(a){this.plugin.setCurrentTime(a);return a};ha.prototype.getMedia=function(){return this.plugin.getMedia()};ha.prototype.getSession=function(){return this.plugin.getSession()};ha.prototype.getMediaManager=function(){return this.plugin.getMediaManager()};ha.prototype.getCastReceiverManager=function(){return this.plugin.getCastReceiverManager()};ha.prototype.getCastMessageBus=function(){return this.plugin.getCastMessageBuses()};ha.prototype.postMessage=function(a){this.plugin.postMessage(a)};
y.registerPlugin("chromecast","flash",ha);var ib=function(){ib.__super__.constructor.call(this)};f(ib,Y);ib.prototype.moduleName="stats";ib.prototype.createModel=function(){this.proxy=new Ua(this.config);this.registerProxy(this.proxy)};ib.prototype.createController=function(){this.registerCommand("statsvisibilitychange",Qd)};ib.prototype.createView=function(){this.registerMediator(new wa)};ib.prototype.listNotificationPublications=function(){return ib.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,
d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,"statsvisibilitychange"])};ib.prototype.getHidden=function(){return this.proxy.getHidden()};ib.prototype.setHidden=function(a){this.sendNotification("statsvisibilitychange",a);return a};y.registerPlugin("stats","html",ib);var ub=function(a,b){var c,d;if(/CrKey/.test(navigator.userAgent)&&"undefined"!==typeof cast&&null!==cast){ub.__super__.constructor.call(this);this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=
this.dispatchEvent.bind(this,{type:"ready"});this.castReceiverManager.onSenderConnected=this.dispatchEvent.bind(this,{type:"senderconnected"});this.castReceiverManager.onSenderDisconnected=this.dispatchEvent.bind(this,{type:"senderdisconnected"});this.castReceiverManager.onShutdown=this.dispatchEvent.bind(this,{type:"shutdown"});this.castReceiverManager.onStandbyChanged=this.dispatchEvent.bind(this,{type:"standbychange"});this.castReceiverManager.onSystemVolumeChanged=this.dispatchEvent.bind(this,
{type:"systemvolumechanged"});this.castReceiverManager.onVisibilityChanged=this.dispatchEvent.bind(this,{type:"visibilitychanged"});this.player=new z(this);this.mediaManager=new cast.receiver.MediaManager(this.player);null==b&&(b={});b["urn:x-cast:com.akamai.amp.cast"]=cast.receiver.CastMessageBus.MessageType.JSON;this.castMessageBuses={};for(c in b)d=b[c],this.castMessageBuses[c]=this.castReceiverManager.getCastMessageBus(c,d);this.castReceiverManager.start(a)}};f(ub,Ha);ub.prototype.castReceiverManager=
null;ub.prototype.mediaManager=null;ub.prototype.castMessageBuses=null;ub.prototype.player=null;ub.getInstance=function(){return this.instance};ub.instance=new ub;var Tb=function(){Tb.__super__.constructor.call(this)};f(Tb,Y);Tb.prototype.moduleName="dash";Tb.prototype.createModel=function(){this.registerProxy(new jc(this.config))};Tb.prototype.registered=function(){this.player.registerCommand(d.CHANGE_DISPLAY_STATE,Rd);Tb.__super__.registered.call(this)};y.registerPlugin("dash","html",Tb);var Mc=
function(){Mc.__super__.constructor.call(this)};f(Mc,Y);Mc.prototype.listNotificationPublications=function(){return Mc.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};var Fa=function(a){Fa.__super__.constructor.call(this,null,null,null,a,onclick)};f(Fa,Ia);Fa.prototype.panel=null;Fa.prototype.timeout=null;Fa.prototype.closePanelDelayed=null;Fa.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);
"desktop"===h.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel;Fa.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(d.ADD_CONTROL,this.viewComponent)};Fa.prototype.openPanel=function(){clearTimeout(this.timeout);this.sendNotification(pa.OPEN_PANEL,this.panel);this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};
Fa.prototype.closePanel=function(){h.isMouseOverElement(this.panel.viewComponent)||h.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(v.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(pa.CLOSE_PANEL,this.panel))};Fa.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)};Fa.prototype.togglePanel=function(){this.sendNotification(pa.TOGGLE_PANEL,this.panel)};
Fa.prototype.clickPanel=function(){};var Ub=function(a){Ub.__super__.constructor.call(this,a,null,null,null)};f(Ub,L);Ub.prototype.componentType="panel";Ub.prototype.control=null;Ub.prototype.onRegister=function(){Ub.__super__.onRegister.call(this);this.sendNotification(pa.ADD_PANEL,this)};var Kb=function(a){Kb.__super__.constructor.call(this,a)};f(Kb,ea);Kb.NAME=B.NAME;Kb.prototype.loaded=!0;Kb.prototype.controlName=null;Kb.prototype.getControlName=function(){return this.controlName};Kb.prototype.setControlName=
function(a){return this.controlName=a};var Vb=function(a){Vb.__super__.constructor.call(this,a)};f(Vb,Kb);Vb.NAME=B.NAME;Vb.prototype.hidden=!0;Vb.prototype.getHidden=function(){return this.hidden};Vb.prototype.setHidden=function(a){return this.hidden=a};var Wb=function(a){Wb.__super__.constructor.call(this,a)};f(Wb,Vb);Wb.NAME=B.NAME;Wb.prototype.controlName="volume";Wb.prototype.defaults={direction:"vertical"};Wb.prototype.getDirection=function(){return this.data.direction};var Xd=function(a,b){null==
b&&(b={});Xd.__super__.constructor.call(this,a,b)};f(Xd,Q);Xd.NAME="VolumePanelWrapper";y.registerPlugin("volumepanel","flash",Xd);var Yd=function(a){Yd.__super__.constructor.call(this,a)};f(Yd,Fa);Yd.prototype.clickHandler=function(){this.sendNotification(d.TOGGLE_MUTED)};var Lb=function(a,b){Lb.__super__.constructor.call(this,a,b)};f(Lb,F);Lb.prototype.componentName="volume";Lb.prototype.setValue=function(a){Lb.__super__.setValue.call(this,a);this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification("updatesettings",
{volume:a});return a};Lb.prototype.listNotificationInterests=function(){return[d.VOLUME_CHANGE,d.READY]};Lb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:this.updateValue(this.facade.player.retrieveProxy(l.NAME).getVolume());break;case d.VOLUME_CHANGE:this.updateValue(a.getBody())}};var na=function(){na.__super__.constructor.call(this);this.controls={}};f(na,cb);na.prototype.panel=null;na.prototype.control=null;na.prototype.separator=null;na.prototype.controls=null;na.prototype.labels=
null;na.prototype.closed=!0;na.prototype.panelClass=Ub;na.prototype.controlClass=Fa;na.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;null==this.labels&&(this.labels={});this.createPanelControls(name)};na.prototype.createControl=function(a){a=new this.controlClass(a);this.facade.registerMediator(a);
return a};na.prototype.createPanel=function(a){a=new this.panelClass(a);this.facade.registerMediator(a);return a};na.prototype.createSeparator=function(a){return this.create(["separator","icon"],this.panel)};na.prototype.createPanelControls=function(a){var b,c,d;a=this.plugin.getConfigurationData();for(b in a)c=a[b],!0===c&&(this.controls[b]=this.addPanelControl(new Ia(this.localizationManager.getString(this.labels[b]),null,null,b,null!=(d=this.panelButtonClickHandler)?"function"===typeof d.bind?
d.bind(this,b):void 0:void 0)))};na.prototype.addPanelControl=function(a){this.facade.registerMediator(a);this.panel.getViewComponent().appendChild(a.getViewComponent());return a};na.prototype.panelButtonClickHandler=function(){this.sendNotification(pa.CLOSE_PANEL,this.panel)};var Ga=function(){Ga.__super__.constructor.call(this)};f(Ga,na);Ga.prototype.componentName="volume";Ga.prototype.slider=null;Ga.prototype.level=null;Ga.prototype.controlClass=Yd;Ga.prototype.onRegister=function(){Ga.__super__.onRegister.call(this);
this.slider=new Lb(this.panel,this.plugin.getDirection());this.facade.registerMediator(this.slider)};Ga.prototype.updateVolumeButton=function(a){a=Math.ceil(10*a);a!==this.level&&(null!=this.level&&this.sendNotification(d.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=a,this.sendNotification(d.ADD_CONTROL_STATE,"volume-"+this.level))};Ga.prototype.listNotificationInterests=function(){return Ga.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE])};Ga.prototype.handleNotification=
function(a){Ga.__super__.handleNotification.call(this,a);switch(a.getName()){case d.VOLUME_CHANGE:this.updateVolumeButton(a.body)}};var Nc=function(){Nc.__super__.constructor.call(this)};f(Nc,Mc);Nc.prototype.listNotificationPublications=function(){var a,b;return Nc.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in pa)b=pa[a],c.push(b);return c}())};var Ma=function(){Ma.__super__.constructor.call(this)};f(Ma,Nc);Ma.prototype.moduleName="volumepanel";Ma.prototype.isVolumeSettable=
function(){var a,b,c,d;c=!1;d=this.player.getMediaElement();b=d.volume;a=Math.random();d.volume=a;d.volume===a&&(c=!0);d.volume=b;return c};Ma.prototype.createFramework=function(){this.isVolumeSettable()&&Ma.__super__.createFramework.call(this)};Ma.prototype.createModel=function(){this.registerProxy(new Wb(this.config))};Ma.prototype.createView=function(){this.isVolumeSettable()&&this.registerMediator(new Ga)};Ma.prototype.listNotificationPublications=function(){return Ma.__super__.listNotificationPublications.apply(this,
arguments).concat([d.CHANGE_VOLUME,d.TOGGLE_MUTED,"updatesettings"])};Ma.prototype.listNotificationInterests=function(){return Ma.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE,d.READY])};y.registerPlugin("volumepanel","html",Ma);Zd.akamai={amp:{AMP:y,utils:{Utils:h,QueryString:Hb,Logger:N}}};window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP v4.21.0.0003",Zd)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP v4.21.0.0003")})();